<?xml version="1.0" encoding="utf-8"?>
<search>
  
  
  
  <entry>
    <title>CS106L-06</title>
    <link href="/2025/11/30/CS106L-06/"/>
    <url>/2025/11/30/CS106L-06/</url>
    
    <content type="html"><![CDATA[<h2 id="ç¬¬15è®²ï¼šç±»å‹å®‰å…¨ä¸-std-optional"><a href="#ç¬¬15è®²ï¼šç±»å‹å®‰å…¨ä¸-std-optional" class="headerlink" title="ç¬¬15è®²ï¼šç±»å‹å®‰å…¨ä¸ std::optional"></a>ç¬¬15è®²ï¼šç±»å‹å®‰å…¨ä¸ <code>std::optional</code></h2><h3 id="ä¸ºä»€ä¹ˆç±»å‹å®‰å…¨è‡³å…³é‡è¦ï¼Ÿ"><a href="#ä¸ºä»€ä¹ˆç±»å‹å®‰å…¨è‡³å…³é‡è¦ï¼Ÿ" class="headerlink" title="ä¸ºä»€ä¹ˆç±»å‹å®‰å…¨è‡³å…³é‡è¦ï¼Ÿ"></a>ä¸ºä»€ä¹ˆç±»å‹å®‰å…¨è‡³å…³é‡è¦ï¼Ÿ</h3><p>ä¼ ç»Ÿæ¥å£ï¼ˆå¦‚ <code>vector::back()</code>ï¼‰æ‰¿è¯ºè¿”å› <code>T&amp;</code>ï¼Œä½†ç©ºå®¹å™¨æ—¶è¡Œä¸ºæœªå®šä¹‰ã€‚ç±»å‹ç³»ç»Ÿåº”åœ¨ç¼–è¯‘æœŸæˆ–æ¥å£å±‚é¢æš´éœ²ã€Œå¯èƒ½ä¸å­˜åœ¨çš„å€¼ã€ã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-comment">// âŒ é—®é¢˜ä»£ç </span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">removeOddsFromEnd</span><span class="hljs-params">(std::vector&lt;<span class="hljs-type">int</span>&gt;&amp; v)</span> </span>&#123;<br>    <span class="hljs-keyword">while</span> (v.<span class="hljs-built_in">back</span>() % <span class="hljs-number">2</span> == <span class="hljs-number">1</span>)   <span class="hljs-comment">// è‹¥ v.empty() â†’ UB!</span><br>        v.<span class="hljs-built_in">pop_back</span>();<br>&#125;<br></code></pre></td></tr></table></figure><hr><h3 id="std-optionalï¼šä¼˜é›…å»ºæ¨¡ã€Œå¯èƒ½ç¼ºå¤±çš„å€¼ã€"><a href="#std-optionalï¼šä¼˜é›…å»ºæ¨¡ã€Œå¯èƒ½ç¼ºå¤±çš„å€¼ã€" class="headerlink" title="std::optional&lt;T&gt;ï¼šä¼˜é›…å»ºæ¨¡ã€Œå¯èƒ½ç¼ºå¤±çš„å€¼ã€"></a><code>std::optional&lt;T&gt;</code>ï¼šä¼˜é›…å»ºæ¨¡ã€Œå¯èƒ½ç¼ºå¤±çš„å€¼ã€</h3><p>ä¸åŒäº <code>std::pair&lt;bool, T&gt;</code>ï¼Œ<code>optional</code> æ”¯æŒæ— é»˜è®¤æ„é€ çš„ç±»å‹ï¼Œè¯­ä¹‰æ›´æ¸…æ™°ã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-function">std::optional&lt;<span class="hljs-type">int</span>&gt; <span class="hljs-title">div</span><span class="hljs-params">(<span class="hljs-type">int</span> a, <span class="hljs-type">int</span> b)</span> </span>&#123;<br>    <span class="hljs-keyword">if</span> (b == <span class="hljs-number">0</span>) <span class="hljs-keyword">return</span> std::<span class="hljs-literal">nullopt</span>;<br>    <span class="hljs-keyword">return</span> a / b;<br>&#125;<br><br><span class="hljs-keyword">auto</span> res = <span class="hljs-built_in">div</span>(<span class="hljs-number">10</span>, <span class="hljs-number">3</span>);<br><span class="hljs-keyword">if</span> (res.<span class="hljs-built_in">has_value</span>()) &#123;<br>    std::cout &lt;&lt; res.<span class="hljs-built_in">value</span>();   <span class="hljs-comment">// 3</span><br>&#125;<br>std::cout &lt;&lt; res.<span class="hljs-built_in">value_or</span>(<span class="hljs-number">-1</span>);  <span class="hljs-comment">// 3ï¼›å¤±è´¥æ—¶å›é€€</span><br></code></pre></td></tr></table></figure><p><strong>é™åˆ¶ä¸æƒè¡¡</strong>ï¼š</p><ul><li><code>std::optional&lt;T&amp;&gt;</code> ä¸è¢«æ”¯æŒï¼ˆå¼•ç”¨å¿…é¡»ç»‘å®šæœ‰æ•ˆå¯¹è±¡ï¼‰</li><li>STL æœªå¤§è§„æ¨¡é‡‡ç”¨ï¼ˆæ€§èƒ½ã€å†å²å…¼å®¹æ€§ï¼‰ï¼Œå¦‚ <code>vector::at()</code> ä»æŠ›å¼‚å¸¸</li><li><code>.value()</code> å¯èƒ½æŠ› <code>bad_optional_access</code></li></ul><p><strong>Monadic é£æ ¼ï¼ˆC++23ï¼‰</strong>ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-keyword">auto</span> safe_sqrt = [](<span class="hljs-type">double</span> x) -&gt; std::optional&lt;<span class="hljs-type">double</span>&gt; &#123;<br>    <span class="hljs-keyword">return</span> x &gt;= <span class="hljs-number">0</span> ? std::optional&#123;std::<span class="hljs-built_in">sqrt</span>(x)&#125; : std::<span class="hljs-literal">nullopt</span>;<br>&#125;;<br><br><span class="hljs-built_in">div</span>(<span class="hljs-number">9</span>, <span class="hljs-number">3</span>)<br>    .<span class="hljs-built_in">and_then</span>(safe_sqrt)<br>    .<span class="hljs-built_in">transform</span>([](<span class="hljs-type">double</span> x) &#123; <span class="hljs-keyword">return</span> x * <span class="hljs-number">2</span>; &#125;);<br></code></pre></td></tr></table></figure><hr><h2 id="ç¬¬16è®²ï¼šRAII-ä¸æ™ºèƒ½æŒ‡é’ˆ"><a href="#ç¬¬16è®²ï¼šRAII-ä¸æ™ºèƒ½æŒ‡é’ˆ" class="headerlink" title="ç¬¬16è®²ï¼šRAII ä¸æ™ºèƒ½æŒ‡é’ˆ"></a>ç¬¬16è®²ï¼šRAII ä¸æ™ºèƒ½æŒ‡é’ˆ</h2><h3 id="RAIIï¼ˆResource-Acquisition-Is-Initializationï¼‰"><a href="#RAIIï¼ˆResource-Acquisition-Is-Initializationï¼‰" class="headerlink" title="RAIIï¼ˆResource Acquisition Is Initializationï¼‰"></a>RAIIï¼ˆResource Acquisition Is Initializationï¼‰</h3><blockquote><p>èµ„æºè·å–å³åˆå§‹åŒ–â€”â€”æ„é€ å³è·å–ï¼Œææ„å³é‡Šæ”¾ã€‚ä¿è¯å¼‚å¸¸å®‰å…¨ã€æœç»æ³„æ¼ã€‚</p></blockquote><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-comment">// âŒ æ‰‹åŠ¨ç®¡ç†ï¼šexception-safety ä¸º 0</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">f</span><span class="hljs-params">()</span> </span>&#123;<br>    Resource* r = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Resource</span>();<br>    <span class="hljs-built_in">risky_operation</span>();  <span class="hljs-comment">// æŠ›å¼‚å¸¸ï¼Ÿâ†’ leak!</span><br>    <span class="hljs-keyword">delete</span> r;<br>&#125;<br><br><span class="hljs-comment">// âœ… RAIIï¼šlock_guardã€fstreamã€unique_ptr...</span><br>&#123;<br>    <span class="hljs-function">std::lock_guard&lt;std::mutex&gt; <span class="hljs-title">lk</span><span class="hljs-params">(mtx)</span></span>;<br>    <span class="hljs-function">std::ifstream <span class="hljs-title">file</span><span class="hljs-params">(<span class="hljs-string">&quot;data.txt&quot;</span>)</span></span>;<br>    <span class="hljs-comment">// å³ä½¿æŠ›å¼‚å¸¸ï¼Œèµ„æºä»é‡Šæ”¾</span><br>&#125;<br></code></pre></td></tr></table></figure><hr><h3 id="æ™ºèƒ½æŒ‡é’ˆä¸‰å‰‘å®¢"><a href="#æ™ºèƒ½æŒ‡é’ˆä¸‰å‰‘å®¢" class="headerlink" title="æ™ºèƒ½æŒ‡é’ˆä¸‰å‰‘å®¢"></a>æ™ºèƒ½æŒ‡é’ˆä¸‰å‰‘å®¢</h3><table><thead><tr><th>ç±»å‹</th><th>è¯­ä¹‰</th><th align="center">copy</th><th align="center">move</th><th align="center">å…±äº«è®¡æ•°</th></tr></thead><tbody><tr><td><code>std::unique_ptr&lt;T&gt;</code></td><td>ç‹¬å æ‰€æœ‰æƒ</td><td align="center">âŒ</td><td align="center">âœ…</td><td align="center">å¦</td></tr><tr><td><code>std::shared_ptr&lt;T&gt;</code></td><td>å…±äº«æ‰€æœ‰æƒ</td><td align="center">âœ…</td><td align="center">âœ…</td><td align="center">âœ…ï¼ˆåŸå­ï¼‰</td></tr><tr><td><code>std::weak_ptr&lt;T&gt;</code></td><td>è§‚å¯Ÿ shared_ptr</td><td align="center">âœ…</td><td align="center">âœ…</td><td align="center">å¦</td></tr></tbody></table><p><strong>åˆå§‹åŒ–é»„é‡‘æ³•åˆ™</strong>ï¼šæ°¸è¿œç”¨ <code>make_unique</code> &#x2F; <code>make_shared</code></p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-comment">// âŒ å±é™©ï¼šä¸¤æ¬¡åˆ†é…ï¼Œå¼‚å¸¸ä¸å®‰å…¨</span><br><span class="hljs-keyword">auto</span> p = std::<span class="hljs-built_in">unique_ptr</span>&lt;MyClass&gt;(<span class="hljs-keyword">new</span> <span class="hljs-built_in">MyClass</span>(arg));<br><br><span class="hljs-comment">// âœ… å®‰å…¨é«˜æ•ˆï¼šä¸€æ¬¡åˆ†é… + noexcept ä¿è¯</span><br><span class="hljs-keyword">auto</span> p = std::<span class="hljs-built_in">make_unique</span>&lt;MyClass&gt;(arg);<br><span class="hljs-keyword">auto</span> s = std::<span class="hljs-built_in">make_shared</span>&lt;MyClass&gt;(arg);<br></code></pre></td></tr></table></figure><p><strong>å¾ªç¯å¼•ç”¨é™·é˜±ä¸ <code>weak_ptr</code> è§£æ³•</strong>ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-keyword">struct</span> <span class="hljs-title class_">Node</span> &#123;<br>    std::shared_ptr&lt;Node&gt; next;<br>    std::weak_ptr&lt;Node&gt; prev;  <span class="hljs-comment">// é¿å…åŒå‘å¼ºå¼•ç”¨</span><br>&#125;;<br><br><span class="hljs-keyword">auto</span> a = std::<span class="hljs-built_in">make_shared</span>&lt;Node&gt;();<br><span class="hljs-keyword">auto</span> b = std::<span class="hljs-built_in">make_shared</span>&lt;Node&gt;();<br>a-&gt;next = b;<br>b-&gt;prev = a;  <span class="hljs-comment">// weak_ptr ä¸å¢å¼•ç”¨è®¡æ•° â†’ å¯æ­£å¸¸ææ„</span><br></code></pre></td></tr></table></figure><hr><h2 id="é¡¹ç›®æ„å»ºï¼šä»-g-åˆ°-CMake"><a href="#é¡¹ç›®æ„å»ºï¼šä»-g-åˆ°-CMake" class="headerlink" title="é¡¹ç›®æ„å»ºï¼šä» g++ åˆ° CMake"></a>é¡¹ç›®æ„å»ºï¼šä» <code>g++</code> åˆ° CMake</h2><h3 id="æ‰‹åŠ¨ç¼–è¯‘çš„å±€é™æ€§"><a href="#æ‰‹åŠ¨ç¼–è¯‘çš„å±€é™æ€§" class="headerlink" title="æ‰‹åŠ¨ç¼–è¯‘çš„å±€é™æ€§"></a>æ‰‹åŠ¨ç¼–è¯‘çš„å±€é™æ€§</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">g++ -std=c++20 main.cpp utils.cpp parser.cpp -o app<br><span class="hljs-comment"># 2000+ æ–‡ä»¶ï¼Ÿâ†’ ä¸å¯è¡Œ</span><br></code></pre></td></tr></table></figure><h3 id="Makefile"><a href="#Makefile" class="headerlink" title="Makefile"></a>Makefile</h3><figure class="highlight makefile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs makefile">CXX = g++<br>CXXFLAGS = -std=c++20 -Wall<br>SRCS = <span class="hljs-variable">$(<span class="hljs-built_in">wildcard</span> *.cpp)</span><br>TARGET = app<br><br><span class="hljs-section">all: <span class="hljs-variable">$(TARGET)</span></span><br><br><span class="hljs-variable">$(TARGET)</span>: <span class="hljs-variable">$(SRCS)</span><br><span class="hljs-variable">$(CXX)</span> <span class="hljs-variable">$(CXXFLAGS)</span> <span class="hljs-variable">$^</span> -o <span class="hljs-variable">$@</span><br><br><span class="hljs-section">clean:</span><br>rm -f <span class="hljs-variable">$(TARGET)</span><br></code></pre></td></tr></table></figure><h3 id="CMake"><a href="#CMake" class="headerlink" title="CMake"></a>CMake</h3><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs cmake"><span class="hljs-keyword">cmake_minimum_required</span>(VERSION <span class="hljs-number">3.14</span>)<br><span class="hljs-keyword">project</span>(cs106l_proj)<br><span class="hljs-keyword">set</span>(CMAKE_CXX_STANDARD <span class="hljs-number">20</span>)<br><br><span class="hljs-keyword">file</span>(GLOB SRCS <span class="hljs-string">&quot;*.cpp&quot;</span>)<br><span class="hljs-keyword">add_executable</span>(app <span class="hljs-variable">$&#123;SRCS&#125;</span>)<br></code></pre></td></tr></table></figure><p>æ„å»ºæµç¨‹ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">mkdir</span> build &amp;&amp; <span class="hljs-built_in">cd</span> build<br>cmake ..<br>make<br>./app<br></code></pre></td></tr></table></figure><hr><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><table><thead><tr><th>æ¦‚å¿µ</th><th>æ ¸å¿ƒæ€æƒ³</th><th>å·¥ç¨‹ä»·å€¼</th></tr></thead><tbody><tr><td><strong>RAII</strong></td><td>èµ„æº &#x3D; å¯¹è±¡ç”Ÿå‘½å‘¨æœŸ</td><td>è‡ªåŠ¨åŒ–ç®¡ç†ï¼Œæœç»æ³„æ¼</td></tr><tr><td><strong>æ™ºèƒ½æŒ‡é’ˆ</strong></td><td>æ‰€æœ‰æƒè¯­ä¹‰ç¼–ç äºç±»å‹</td><td>ç¼–è¯‘æœŸé˜²æ­¢ use-after-free</td></tr><tr><td><strong>std::optional</strong></td><td>æ˜¾å¼è¡¨è¾¾ã€Œå¯èƒ½ç¼ºå¤±ã€</td><td>æ¶ˆé™¤ç©ºå€¼ UBï¼Œæ¥å£æ›´å®‰å…¨</td></tr></tbody></table>]]></content>
    
    
    <categories>
      
      <category>CS106L</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>CS106L-05</title>
    <link href="/2025/11/30/CS106L-05/"/>
    <url>/2025/11/30/CS106L-05/</url>
    
    <content type="html"><![CDATA[<h2 id="ç¬¬13è®²ï¼šç‰¹æ®Šæˆå‘˜å‡½æ•°ï¼ˆSpecial-Member-Functionsï¼‰"><a href="#ç¬¬13è®²ï¼šç‰¹æ®Šæˆå‘˜å‡½æ•°ï¼ˆSpecial-Member-Functionsï¼‰" class="headerlink" title="ç¬¬13è®²ï¼šç‰¹æ®Šæˆå‘˜å‡½æ•°ï¼ˆSpecial Member Functionsï¼‰"></a>ç¬¬13è®²ï¼šç‰¹æ®Šæˆå‘˜å‡½æ•°ï¼ˆSpecial Member Functionsï¼‰</h2><p>C++ å¯¹è±¡ç”Ÿå‘½å‘¨æœŸç”±å…­ç±»ç‰¹æ®Šæˆå‘˜å‡½æ•°ç®¡ç†ï¼Œå®ƒä»¬æ˜¯ RAII çš„åŸºçŸ³ã€‚</p><h3 id="å…­å¤§-SMF-æ¦‚è§ˆ"><a href="#å…­å¤§-SMF-æ¦‚è§ˆ" class="headerlink" title="å…­å¤§ SMF æ¦‚è§ˆ"></a>å…­å¤§ SMF æ¦‚è§ˆ</h3><table><thead><tr><th>SMF</th><th>é»˜è®¤ç”Ÿæˆæ—¶æœº</th><th>ä½œç”¨</th><th>æ˜¾å¼ç¦ç”¨</th></tr></thead><tbody><tr><td>é»˜è®¤æ„é€  <code>T()</code></td><td>æ— ç”¨æˆ·å®šä¹‰æ„é€ æ—¶</td><td>æ„é€ å¯¹è±¡</td><td><code>= delete</code></td></tr><tr><td>ææ„ <code>~T()</code></td><td>æ€»ç”Ÿæˆ</td><td>æ¸…ç†èµ„æº</td><td><code>= delete</code></td></tr><tr><td>æ‹·è´æ„é€  <code>T(const T&amp;)</code></td><td>éœ€è¦æ‹·è´æ—¶</td><td>æŒ‰æˆå‘˜é€å­—æ®µæ‹·è´</td><td><code>= delete</code></td></tr><tr><td>æ‹·è´èµ‹å€¼ <code>operator=(const T&amp;)</code></td><td>éœ€è¦èµ‹å€¼æ—¶</td><td>æŒ‰æˆå‘˜é€å­—æ®µèµ‹å€¼</td><td><code>= delete</code></td></tr><tr><td>ç§»åŠ¨æ„é€  <code>T(T&amp;&amp;)</code></td><td>C++11+ï¼Œéœ€è¦ç§»åŠ¨æ—¶</td><td>æ¥ç®¡å³å€¼èµ„æº</td><td><code>= delete</code></td></tr><tr><td>ç§»åŠ¨èµ‹å€¼ <code>operator=(T&amp;&amp;)</code></td><td>C++11+ï¼Œéœ€è¦ç§»åŠ¨æ—¶</td><td>æ¥ç®¡å¹¶æ¸…ç†å³å€¼èµ„æº</td><td><code>= delete</code></td></tr></tbody></table><p><strong>å…³é”®äº‹å®</strong>ï¼š</p><ul><li>ç¼–è¯‘å™¨ä»…åœ¨é¦–æ¬¡ä½¿ç”¨æ—¶ç”Ÿæˆï¼ˆä¸”ä»…å½“æ— ä»»ä½•ç”¨æˆ·å®šä¹‰ SMF æ—¶æ‰ç”Ÿæˆæ‰€æœ‰é»˜è®¤ SMFï¼‰</li><li>é»˜è®¤æ‹·è´&#x2F;ç§»åŠ¨éƒ½æ˜¯ member-wiseï¼ˆæˆå‘˜ä¾æ¬¡è°ƒç”¨å…¶å¯¹åº” SMFï¼‰â€”â€”å¯¹æŒ‡é’ˆæ˜¯<strong>æµ…æ‹·è´</strong></li></ul><hr><h3 id="ä¸ºä½•è¦é‡å†™-SMFsï¼Ÿâ€”â€”æŒ‡é’ˆçš„ç¾éš¾"><a href="#ä¸ºä½•è¦é‡å†™-SMFsï¼Ÿâ€”â€”æŒ‡é’ˆçš„ç¾éš¾" class="headerlink" title="ä¸ºä½•è¦é‡å†™ SMFsï¼Ÿâ€”â€”æŒ‡é’ˆçš„ç¾éš¾"></a>ä¸ºä½•è¦é‡å†™ SMFsï¼Ÿâ€”â€”æŒ‡é’ˆçš„ç¾éš¾</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-keyword">template</span> &lt;<span class="hljs-keyword">typename</span> T&gt;<br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Vector</span> &#123;<br>    <span class="hljs-type">size_t</span> _size = <span class="hljs-number">0</span>, _capacity = <span class="hljs-number">4</span>;<br>    T* _data = <span class="hljs-keyword">new</span> T[_capacity];<br>    <span class="hljs-comment">// ç¼–è¯‘å™¨é»˜è®¤æ‹·è´æ„é€ ï¼ˆmember-wiseï¼‰ï¼š</span><br>    <span class="hljs-comment">//   _data â† other._data   âŒ åŒä¸€æŒ‡é’ˆï¼</span><br>&#125;;<br><br>Vector&lt;<span class="hljs-type">int</span>&gt; v1&#123;<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>&#125;;<br>Vector&lt;<span class="hljs-type">int</span>&gt; v2 = v1;  <span class="hljs-comment">// æµ…æ‹·è´ â†’ v1._data == v2._data</span><br><span class="hljs-comment">// v1, v2 ææ„æ—¶å‡ delete[] åŒä¸€å—å†…å­˜ â‡’ double free!</span><br></code></pre></td></tr></table></figure><p><strong>è§£å†³æ–¹æ¡ˆï¼šæ·±æ‹·è´</strong></p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-comment">// æ‹·è´æ„é€ </span><br><span class="hljs-built_in">Vector</span>(<span class="hljs-type">const</span> Vector&amp; other)<br>    : _size(other._size), _capacity(other._capacity),<br>      _data(<span class="hljs-keyword">new</span> T[_capacity]) &#123;<br>    std::<span class="hljs-built_in">copy</span>(other._data, other._data + _size, _data);<br>&#125;<br><br><span class="hljs-comment">// æ‹·è´èµ‹å€¼ï¼ˆéœ€è‡ªèµ‹å€¼å®‰å…¨ï¼‰</span><br>Vector&amp; <span class="hljs-keyword">operator</span>=(<span class="hljs-type">const</span> Vector&amp; other) &#123;<br>    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span> == &amp;other) <span class="hljs-keyword">return</span> *<span class="hljs-keyword">this</span>;<br>    <span class="hljs-keyword">delete</span>[] _data;<br>    _size = other._size;<br>    _capacity = other._capacity;<br>    _data = <span class="hljs-keyword">new</span> T[_capacity];<br>    std::<span class="hljs-built_in">copy</span>(other._data, other._data + _size, _data);<br>    <span class="hljs-keyword">return</span> *<span class="hljs-keyword">this</span>;<br>&#125;<br></code></pre></td></tr></table></figure><blockquote><p><strong>Rule of Threeï¼ˆä¸‰æ³•åˆ™ï¼‰</strong>ï¼šè‹¥éœ€è‡ªå®šä¹‰ææ„&#x2F;æ‹·è´æ„é€ &#x2F;æ‹·è´èµ‹å€¼å…¶ä¸€ï¼Œåˆ™ä¸‰è€…éƒ½åº”è‡ªå®šä¹‰ã€‚å› æ‰‹åŠ¨ç®¡ç†èµ„æºæ—¶ï¼Œç¼–è¯‘å™¨ç”Ÿæˆçš„ SMF å¿…ç„¶é”™è¯¯ã€‚</p></blockquote><hr><h3 id="ç¦ç”¨æ‹·è´ï¼šdelete-å…³é”®å­—"><a href="#ç¦ç”¨æ‹·è´ï¼šdelete-å…³é”®å­—" class="headerlink" title="ç¦ç”¨æ‹·è´ï¼šdelete å…³é”®å­—"></a>ç¦ç”¨æ‹·è´ï¼š<code>delete</code> å…³é”®å­—</h3><p>å¯¹ä¸å¯å¤åˆ¶èµ„æºï¼ˆå¦‚æ–‡ä»¶å¥æŸ„ã€å¯†ç ç®¡ç†å™¨ï¼‰ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-keyword">class</span> <span class="hljs-title class_">PasswordManager</span> &#123;<br>    std::string master_key;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-built_in">PasswordManager</span>() = <span class="hljs-keyword">default</span>;<br>    ~<span class="hljs-built_in">PasswordManager</span>() = <span class="hljs-keyword">default</span>;<br><br>    <span class="hljs-comment">// ç¦æ­¢æ‹·è´</span><br>    <span class="hljs-built_in">PasswordManager</span>(<span class="hljs-type">const</span> PasswordManager&amp;) = <span class="hljs-keyword">delete</span>;<br>    PasswordManager&amp; <span class="hljs-keyword">operator</span>=(<span class="hljs-type">const</span> PasswordManager&amp;) = <span class="hljs-keyword">delete</span>;<br><br>    <span class="hljs-comment">// å…è®¸ç§»åŠ¨</span><br>    <span class="hljs-built_in">PasswordManager</span>(PasswordManager&amp;&amp;) <span class="hljs-keyword">noexcept</span> = <span class="hljs-keyword">default</span>;<br>    PasswordManager&amp; <span class="hljs-keyword">operator</span>=(PasswordManager&amp;&amp;) <span class="hljs-keyword">noexcept</span> = <span class="hljs-keyword">default</span>;<br>&#125;;<br></code></pre></td></tr></table></figure><p><code>std::unique_ptr</code> æ­£æ˜¯å¦‚æ­¤ï¼šæ‹·è´ <code>delete</code>ï¼Œç§»åŠ¨ <code>default</code>ã€‚</p><hr><h3 id="åˆå§‹åŒ–åˆ—è¡¨ï¼šé«˜æ•ˆæ„é€ çš„èµ·ç‚¹"><a href="#åˆå§‹åŒ–åˆ—è¡¨ï¼šé«˜æ•ˆæ„é€ çš„èµ·ç‚¹" class="headerlink" title="åˆå§‹åŒ–åˆ—è¡¨ï¼šé«˜æ•ˆæ„é€ çš„èµ·ç‚¹"></a>åˆå§‹åŒ–åˆ—è¡¨ï¼šé«˜æ•ˆæ„é€ çš„èµ·ç‚¹</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-comment">// âŒ ä½æ•ˆï¼šå…ˆé»˜è®¤æ„é€ ï¼Œå†èµ‹å€¼</span><br><span class="hljs-built_in">Vector</span>() &#123;<br>    _size = <span class="hljs-number">0</span>;<br>    _capacity = <span class="hljs-number">4</span>;<br>    _data = <span class="hljs-keyword">new</span> T[_capacity];<br>&#125;<br><br><span class="hljs-comment">// âœ… é«˜æ•ˆï¼šç›´æ¥åˆå§‹åŒ–</span><br><span class="hljs-built_in">Vector</span>() : _size(<span class="hljs-number">0</span>), _capacity(<span class="hljs-number">4</span>), _data(<span class="hljs-keyword">new</span> T[_capacity]) &#123;&#125;<br></code></pre></td></tr></table></figure><p><strong>å¿…é¡»ç”¨åˆå§‹åŒ–åˆ—è¡¨çš„æƒ…å½¢</strong>ï¼š<code>const</code> æˆå‘˜ã€å¼•ç”¨æˆå‘˜ã€æ— é»˜è®¤æ„é€ å‡½æ•°çš„ç±»å‹ã€‚</p><hr><h2 id="ç¬¬14è®²ï¼šç§»åŠ¨è¯­ä¹‰ï¼ˆMove-Semanticsï¼‰"><a href="#ç¬¬14è®²ï¼šç§»åŠ¨è¯­ä¹‰ï¼ˆMove-Semanticsï¼‰" class="headerlink" title="ç¬¬14è®²ï¼šç§»åŠ¨è¯­ä¹‰ï¼ˆMove Semanticsï¼‰"></a>ç¬¬14è®²ï¼šç§»åŠ¨è¯­ä¹‰ï¼ˆMove Semanticsï¼‰</h2><h3 id="é—®é¢˜ï¼šæ‹·è´æ˜‚è´µï¼Œä¸´æ—¶å¯¹è±¡å¯â€å·â€"><a href="#é—®é¢˜ï¼šæ‹·è´æ˜‚è´µï¼Œä¸´æ—¶å¯¹è±¡å¯â€å·â€" class="headerlink" title="é—®é¢˜ï¼šæ‹·è´æ˜‚è´µï¼Œä¸´æ—¶å¯¹è±¡å¯â€å·â€"></a>é—®é¢˜ï¼šæ‹·è´æ˜‚è´µï¼Œä¸´æ—¶å¯¹è±¡å¯â€å·â€</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-function">Photo <span class="hljs-title">takePhoto</span><span class="hljs-params">()</span></span>;  <span class="hljs-comment">// è¿”å› Photo å¯¹è±¡ï¼ˆä¸´æ—¶ï¼‰</span><br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br>    Photo selfie = <span class="hljs-built_in">takePhoto</span>();  <span class="hljs-comment">// æ‹·è´æ„é€ ï¼ˆå¤åˆ¶ 8MB åƒç´ æ•°æ®ï¼ï¼‰</span><br>&#125;                                <span class="hljs-comment">// ä¸´æ—¶å¯¹è±¡ç«‹å³ææ„ï¼ˆæµªè´¹ï¼ï¼‰</span><br></code></pre></td></tr></table></figure><h3 id="æ ¸å¿ƒæ€æƒ³ï¼šç§»åŠ¨-æ¥ç®¡èµ„æº-ç•™ä¸‹ç©ºå£³"><a href="#æ ¸å¿ƒæ€æƒ³ï¼šç§»åŠ¨-æ¥ç®¡èµ„æº-ç•™ä¸‹ç©ºå£³" class="headerlink" title="æ ¸å¿ƒæ€æƒ³ï¼šç§»åŠ¨ &#x3D; æ¥ç®¡èµ„æº + ç•™ä¸‹ç©ºå£³"></a>æ ¸å¿ƒæ€æƒ³ï¼šç§»åŠ¨ &#x3D; æ¥ç®¡èµ„æº + ç•™ä¸‹ç©ºå£³</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Photo</span> &#123;<br>    <span class="hljs-type">int</span> width, height;<br>    <span class="hljs-type">int</span>* data;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-comment">// ç§»åŠ¨æ„é€ ï¼šæ¥ç®¡èµ„æºï¼Œä½¿æºå¯¹è±¡å®‰å…¨ææ„</span><br>    <span class="hljs-built_in">Photo</span>(Photo&amp;&amp; other) <span class="hljs-keyword">noexcept</span><br>        : <span class="hljs-built_in">width</span>(other.width), <span class="hljs-built_in">height</span>(other.height), <span class="hljs-built_in">data</span>(other.data) &#123;<br>        other.data = <span class="hljs-literal">nullptr</span>;  <span class="hljs-comment">// æºå˜&quot;ç©ºå£³&quot;</span><br>    &#125;<br><br>    <span class="hljs-comment">// ç§»åŠ¨èµ‹å€¼</span><br>    Photo&amp; <span class="hljs-keyword">operator</span>=(Photo&amp;&amp; other) <span class="hljs-keyword">noexcept</span> &#123;<br>        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span> != &amp;other) &#123;<br>            <span class="hljs-keyword">delete</span>[] data;<br>            width = other.width;<br>            height = other.height;<br>            data = other.data;<br>            other.data = <span class="hljs-literal">nullptr</span>;<br>        &#125;<br>        <span class="hljs-keyword">return</span> *<span class="hljs-keyword">this</span>;<br>    &#125;<br>&#125;;<br></code></pre></td></tr></table></figure><table><thead><tr><th>æ“ä½œ</th><th>æ‹·è´æ„é€ </th><th>ç§»åŠ¨æ„é€ </th></tr></thead><tbody><tr><td>æ—¶é—´å¤æ‚åº¦</td><td>O(n)</td><td>O(1)</td></tr><tr><td>å†…å­˜å¼€é”€</td><td>é¢å¤–åˆ†é… n å­—èŠ‚</td><td>0</td></tr><tr><td>æºå¯¹è±¡çŠ¶æ€</td><td>ä¸å˜</td><td>valid but unspecified</td></tr></tbody></table><blockquote><p><strong><code>noexcept</code> è‡³å…³é‡è¦</strong>ï¼šSTL å®¹å™¨ä»…å½“ç§»åŠ¨æ„é€  <code>noexcept</code> æ—¶æ‰å¯ç”¨ç§»åŠ¨ï¼Œå¦åˆ™é€€åŒ–ä¸ºæ‹·è´ä»¥é˜²å¼‚å¸¸å®‰å…¨é—®é¢˜ã€‚</p></blockquote><hr><h3 id="lvalue-vs-rvalue"><a href="#lvalue-vs-rvalue" class="headerlink" title="lvalue vs rvalue"></a>lvalue vs rvalue</h3><table><thead><tr><th>ç±»å‹</th><th>å®šä¹‰</th><th>ç¤ºä¾‹</th></tr></thead><tbody><tr><td><strong>lvalue</strong></td><td>æœ‰æŒä¹…èº«ä»½çš„å¯¹è±¡ï¼ˆå…·åã€å¯å–åœ°å€ï¼‰</td><td><code>a</code>, <code>*p</code>, <code>vec[0]</code></td></tr><tr><td><strong>rvalue</strong></td><td>ä¸´æ—¶å¯¹è±¡ï¼ˆæ— åã€å°†ç«‹å³é”€æ¯ï¼‰</td><td><code>42</code>, <code>takePhoto()</code>, <code>a + b</code></td></tr></tbody></table><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">foo</span><span class="hljs-params">(Photo&amp;  lval)</span></span>;   <span class="hljs-comment">// ä»…æ¥å— lvalue</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">foo</span><span class="hljs-params">(Photo&amp;&amp; rval)</span></span>;   <span class="hljs-comment">// ä»…æ¥å— rvalue</span><br><br>Photo p;<br><span class="hljs-built_in">foo</span>(p);           <span class="hljs-comment">// â†’ lvalue é‡è½½</span><br><span class="hljs-built_in">foo</span>(<span class="hljs-built_in">takePhoto</span>()); <span class="hljs-comment">// â†’ rvalue é‡è½½</span><br></code></pre></td></tr></table></figure><p><strong>å…³é”®è§„åˆ™</strong>ï¼š</p><ul><li>æ‹·è´ç”¨äº lvalueï¼ˆæŒä¹…å¯¹è±¡ï¼Œéœ€ä¿ç•™åŸå€¼ï¼‰</li><li>ç§»åŠ¨ç”¨äº rvalueï¼ˆä¸´æ—¶å¯¹è±¡ï¼Œå¯â€ç‰ºç‰²â€ï¼‰</li><li>ç¼–è¯‘å™¨è‡ªåŠ¨é€‰æ‹© <code>&amp;</code> &#x2F; <code>&amp;&amp;</code> é‡è½½</li></ul><hr><h3 id="std-moveï¼šå¼ºåˆ¶â€ç§»åŠ¨è®¸å¯â€"><a href="#std-moveï¼šå¼ºåˆ¶â€ç§»åŠ¨è®¸å¯â€" class="headerlink" title="std::moveï¼šå¼ºåˆ¶â€ç§»åŠ¨è®¸å¯â€"></a><code>std::move</code>ï¼šå¼ºåˆ¶â€ç§»åŠ¨è®¸å¯â€</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs cpp">Photo selfie = <span class="hljs-built_in">takePhoto</span>();<br><span class="hljs-built_in">upload</span>(selfie);             <span class="hljs-comment">// æ‹·è´ï¼(selfie æ˜¯ lvalue)</span><br><span class="hljs-built_in">upload</span>(std::<span class="hljs-built_in">move</span>(selfie));  <span class="hljs-comment">// ç§»åŠ¨ï¼selfie å˜ç©ºå£³</span><br></code></pre></td></tr></table></figure><p><strong>æ³¨æ„</strong>ï¼š</p><ul><li><code>std::move</code> æœ¬è´¨æ˜¯ <code>static_cast&lt;T&amp;&amp;&gt;</code>ï¼Œä¸åšç§»åŠ¨ï¼Œä»…ç±»å‹è½¬æ¢</li><li>ç§»åŠ¨åå¯¹è±¡å¤„äº valid but unspecified çŠ¶æ€ï¼Œç¦æ­¢ç›´æ¥ä½¿ç”¨</li><li>ç§»åŠ¨åä»…å…è®¸ï¼šææ„ã€èµ‹å€¼</li></ul><hr><h3 id="Rule-of-Zero-Three-Five"><a href="#Rule-of-Zero-Three-Five" class="headerlink" title="Rule of Zero &#x2F; Three &#x2F; Five"></a>Rule of Zero &#x2F; Three &#x2F; Five</h3><table><thead><tr><th>æ³•åˆ™</th><th>é€‚ç”¨åœºæ™¯</th><th>å®è·µå»ºè®®</th></tr></thead><tbody><tr><td><strong>Rule of Zero</strong></td><td>ç±»ä¸ç›´æ¥ç®¡ç†èµ„æº</td><td>æ°¸ä¸å†™ SMFï¼Œä¾èµ–æˆå‘˜çš„ SMF</td></tr><tr><td><strong>Rule of Three</strong></td><td>ç±»æ‰‹åŠ¨ç®¡ç†èµ„æº</td><td>å¿…é¡»è‡ªå®šä¹‰ï¼šææ„ + æ‹·è´æ„é€  + æ‹·è´èµ‹å€¼</td></tr><tr><td><strong>Rule of Five</strong></td><td>Rule of Three + æƒ³æ”¯æŒç§»åŠ¨</td><td>äº”è€…éƒ½è‡ªå®šä¹‰</td></tr></tbody></table><p><strong>Rule of Zero èŒƒä¾‹ï¼ˆç°ä»£ C++ é¦–é€‰ï¼‰</strong>ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-keyword">struct</span> <span class="hljs-title class_">Post</span> &#123;<br>    Photo photo;          <span class="hljs-comment">// Photo åº”éµå¾ª Rule of Five</span><br>    std::string caption;  <span class="hljs-comment">// string å·²å®Œç¾ç®¡ç†èµ„æº</span><br>    <span class="hljs-comment">// ç¼–è¯‘å™¨ç”Ÿæˆæ‰€æœ‰ SMF â†’ é›¶å¼€é”€ã€å¼‚å¸¸å®‰å…¨ã€æ”¯æŒç§»åŠ¨</span><br>&#125;;<br></code></pre></td></tr></table></figure><hr><h2 id="å®æˆ˜ï¼šPhoto-ç±»å®Œæ•´å®ç°ï¼ˆRule-of-Fiveï¼‰"><a href="#å®æˆ˜ï¼šPhoto-ç±»å®Œæ•´å®ç°ï¼ˆRule-of-Fiveï¼‰" class="headerlink" title="å®æˆ˜ï¼šPhoto ç±»å®Œæ•´å®ç°ï¼ˆRule of Fiveï¼‰"></a>å®æˆ˜ï¼š<code>Photo</code> ç±»å®Œæ•´å®ç°ï¼ˆRule of Fiveï¼‰</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Photo</span> &#123;<br>    <span class="hljs-type">int</span> width, height;<br>    <span class="hljs-type">int</span>* data = <span class="hljs-literal">nullptr</span>;<br><br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-comment">// æ„é€ </span><br>    <span class="hljs-built_in">Photo</span>(<span class="hljs-type">int</span> w, <span class="hljs-type">int</span> h)<br>        : <span class="hljs-built_in">width</span>(w), <span class="hljs-built_in">height</span>(h), <span class="hljs-built_in">data</span>(<span class="hljs-keyword">new</span> <span class="hljs-type">int</span>[w * h]&#123;&#125;) &#123;&#125;<br><br>    <span class="hljs-comment">// æ‹·è´æ„é€ ï¼ˆæ·±æ‹·è´ï¼‰</span><br>    <span class="hljs-built_in">Photo</span>(<span class="hljs-type">const</span> Photo&amp; other)<br>        : <span class="hljs-built_in">width</span>(other.width), <span class="hljs-built_in">height</span>(other.height),<br>          <span class="hljs-built_in">data</span>(<span class="hljs-keyword">new</span> <span class="hljs-type">int</span>[width * height]) &#123;<br>        std::<span class="hljs-built_in">copy</span>(other.data, other.data + width * height, data);<br>    &#125;<br><br>    <span class="hljs-comment">// æ‹·è´èµ‹å€¼ï¼ˆè‡ªèµ‹å€¼å®‰å…¨ï¼‰</span><br>    Photo&amp; <span class="hljs-keyword">operator</span>=(<span class="hljs-type">const</span> Photo&amp; other) &#123;<br>        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span> == &amp;other) <span class="hljs-keyword">return</span> *<span class="hljs-keyword">this</span>;<br>        <span class="hljs-keyword">delete</span>[] data;<br>        width = other.width;<br>        height = other.height;<br>        data = <span class="hljs-keyword">new</span> <span class="hljs-type">int</span>[width * height];<br>        std::<span class="hljs-built_in">copy</span>(other.data, other.data + width * height, data);<br>        <span class="hljs-keyword">return</span> *<span class="hljs-keyword">this</span>;<br>    &#125;<br><br>    <span class="hljs-comment">// ç§»åŠ¨æ„é€ </span><br>    <span class="hljs-built_in">Photo</span>(Photo&amp;&amp; other) <span class="hljs-keyword">noexcept</span><br>        : <span class="hljs-built_in">width</span>(other.width), <span class="hljs-built_in">height</span>(other.height), <span class="hljs-built_in">data</span>(other.data) &#123;<br>        other.data = <span class="hljs-literal">nullptr</span>;<br>    &#125;<br><br>    <span class="hljs-comment">// ç§»åŠ¨èµ‹å€¼</span><br>    Photo&amp; <span class="hljs-keyword">operator</span>=(Photo&amp;&amp; other) <span class="hljs-keyword">noexcept</span> &#123;<br>        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span> == &amp;other) <span class="hljs-keyword">return</span> *<span class="hljs-keyword">this</span>;<br>        <span class="hljs-keyword">delete</span>[] data;<br>        width = other.width;<br>        height = other.height;<br>        data = other.data;<br>        other.data = <span class="hljs-literal">nullptr</span>;<br>        <span class="hljs-keyword">return</span> *<span class="hljs-keyword">this</span>;<br>    &#125;<br><br>    <span class="hljs-comment">// ææ„</span><br>    ~<span class="hljs-built_in">Photo</span>() &#123; <span class="hljs-keyword">delete</span>[] data; &#125;<br><br>    <span class="hljs-function"><span class="hljs-type">int</span>&amp; <span class="hljs-title">at</span><span class="hljs-params">(<span class="hljs-type">int</span> i, <span class="hljs-type">int</span> j)</span> </span>&#123; <span class="hljs-keyword">return</span> data[i * width + j]; &#125;<br>&#125;;<br></code></pre></td></tr></table></figure><hr><h2 id="ç§»åŠ¨è¯­ä¹‰é™·é˜±ä¸æœ€ä½³å®è·µ"><a href="#ç§»åŠ¨è¯­ä¹‰é™·é˜±ä¸æœ€ä½³å®è·µ" class="headerlink" title="ç§»åŠ¨è¯­ä¹‰é™·é˜±ä¸æœ€ä½³å®è·µ"></a>ç§»åŠ¨è¯­ä¹‰é™·é˜±ä¸æœ€ä½³å®è·µ</h2><h3 id="å¸¸è§é”™è¯¯"><a href="#å¸¸è§é”™è¯¯" class="headerlink" title="å¸¸è§é”™è¯¯"></a>å¸¸è§é”™è¯¯</h3><table><thead><tr><th>é”™è¯¯</th><th>åæœ</th><th>ä¿®å¤</th></tr></thead><tbody><tr><td>ç§»åŠ¨åä½¿ç”¨æºå¯¹è±¡</td><td>æœªå®šä¹‰è¡Œä¸º</td><td>ç§»åŠ¨åä»…å…è®¸ææ„&#x2F;èµ‹å€¼</td></tr><tr><td>ç§»åŠ¨æ„é€ æœªç½®ç©ºæºæŒ‡é’ˆ</td><td>double free</td><td>åŠ¡å¿…å°†æºæŒ‡é’ˆç½®ä¸º <code>nullptr</code></td></tr><tr><td>ç§»åŠ¨å‡½æ•°æœªæ ‡ <code>noexcept</code></td><td>STL é€€åŒ–ä¸ºæ‹·è´</td><td>ç§»åŠ¨æ“ä½œå¿…é¡» <code>noexcept</code></td></tr></tbody></table><h3 id="æœ€ä½³å®è·µ"><a href="#æœ€ä½³å®è·µ" class="headerlink" title="æœ€ä½³å®è·µ"></a>æœ€ä½³å®è·µ</h3><ol><li><p><strong>ä¼˜å…ˆéµå¾ª Rule of Zero</strong>ï¼šç”¨ <code>std::unique_ptr</code>, <code>std::vector</code> ç­‰ RAII å®¹å™¨ç®¡ç†èµ„æº</p></li><li><p><strong>ç§»åŠ¨æ“ä½œå¿…é¡» <code>noexcept</code></strong></p></li><li><p><strong>ç§»åŠ¨åå¯¹è±¡åº”å¤„äºâ€æœ‰æ•ˆä½†æœªæŒ‡å®šâ€çŠ¶æ€</strong>ï¼šæœ€å°è¦æ±‚æ˜¯å¯å®‰å…¨ææ„ã€å¯èµ‹å€¼</p></li><li><p><strong>é¿å…ä¸å¿…è¦çš„ <code>std::move</code></strong>ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-comment">// âŒ å¤šä½™ï¼šè¿”å›å€¼è‡ªåŠ¨ç§»åŠ¨ï¼ŒRVO/NRVO ä¼˜åŒ–æ›´ä¼˜</span><br><span class="hljs-function">std::string <span class="hljs-title">makeString</span><span class="hljs-params">()</span> </span>&#123;<br>    std::string s = <span class="hljs-string">&quot;hello&quot;</span>;<br>    <span class="hljs-keyword">return</span> std::<span class="hljs-built_in">move</span>(s);  <span class="hljs-comment">// é˜»æ­¢ RVOï¼</span><br>&#125;<br></code></pre></td></tr></table></figure></li></ol><hr><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><table><thead><tr><th>æ¦‚å¿µ</th><th>æ ¸å¿ƒæ€æƒ³</th><th>å·¥ç¨‹ä»·å€¼</th></tr></thead><tbody><tr><td><strong>RAII</strong></td><td>èµ„æº &#x3D; å¯¹è±¡ç”Ÿå‘½å‘¨æœŸ</td><td>è‡ªåŠ¨åŒ–èµ„æºç®¡ç†ï¼Œæœç»æ³„æ¼</td></tr><tr><td><strong>Rule of Zero</strong></td><td>å§”æ‰˜èµ„æºç®¡ç†ç»™æˆå‘˜</td><td>æœ€å°åŒ–ä»£ç ï¼Œæœ€å¤§åŒ–å®‰å…¨æ€§</td></tr><tr><td><strong>ç§»åŠ¨è¯­ä¹‰</strong></td><td>ä¸´æ—¶å¯¹è±¡ â†’ èµ„æºæ¥ç®¡</td><td>é›¶æ‹·è´æ€§èƒ½ï¼Œæ— ç¼é›†æˆ STL</td></tr><tr><td><strong>lvalue&#x2F;rvalue</strong></td><td>ç¼–è¯‘æœŸåŒºåˆ†æŒä¹…&#x2F;ä¸´æ—¶</td><td>è‡ªåŠ¨é€‰æ‹©æœ€ä¼˜è¯­ä¹‰</td></tr></tbody></table><hr><h2 id="é™„å½•ï¼šéªŒè¯ä»£ç "><a href="#é™„å½•ï¼šéªŒè¯ä»£ç " class="headerlink" title="é™„å½•ï¼šéªŒè¯ä»£ç "></a>é™„å½•ï¼šéªŒè¯ä»£ç </h2><h3 id="ç§»åŠ¨è¯­ä¹‰éªŒè¯"><a href="#ç§»åŠ¨è¯­ä¹‰éªŒè¯" class="headerlink" title="ç§»åŠ¨è¯­ä¹‰éªŒè¯"></a>ç§»åŠ¨è¯­ä¹‰éªŒè¯</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;string&gt;</span></span><br><br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">Trace</span> &#123;<br>    std::string name;<br>    <br>    <span class="hljs-built_in">Trace</span>(<span class="hljs-type">const</span> <span class="hljs-type">char</span>* n) : <span class="hljs-built_in">name</span>(n) &#123; <br>        std::cout &lt;&lt; <span class="hljs-string">&quot;CTOR: &quot;</span> &lt;&lt; name &lt;&lt; <span class="hljs-string">&quot;\n&quot;</span>; <br>    &#125;<br>    <span class="hljs-built_in">Trace</span>(<span class="hljs-type">const</span> Trace&amp; other) : <span class="hljs-built_in">name</span>(other.name + <span class="hljs-string">&quot;_copy&quot;</span>) &#123;<br>        std::cout &lt;&lt; <span class="hljs-string">&quot;COPY: &quot;</span> &lt;&lt; name &lt;&lt; <span class="hljs-string">&quot;\n&quot;</span>;<br>    &#125;<br>    <span class="hljs-built_in">Trace</span>(Trace&amp;&amp; other) <span class="hljs-keyword">noexcept</span> : <span class="hljs-built_in">name</span>(std::<span class="hljs-built_in">move</span>(other.name)) &#123;<br>        name += <span class="hljs-string">&quot;_moved&quot;</span>;<br>        other.name = <span class="hljs-string">&quot;null&quot;</span>;<br>        std::cout &lt;&lt; <span class="hljs-string">&quot;MOVE: &quot;</span> &lt;&lt; name &lt;&lt; <span class="hljs-string">&quot;\n&quot;</span>;<br>    &#125;<br>    ~<span class="hljs-built_in">Trace</span>() &#123; std::cout &lt;&lt; <span class="hljs-string">&quot;DTOR: &quot;</span> &lt;&lt; name &lt;&lt; <span class="hljs-string">&quot;\n&quot;</span>; &#125;<br>&#125;;<br><br><span class="hljs-function">Trace <span class="hljs-title">make</span><span class="hljs-params">()</span> </span>&#123; <span class="hljs-keyword">return</span> <span class="hljs-built_in">Trace</span>(<span class="hljs-string">&quot;temp&quot;</span>); &#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br>    <span class="hljs-function">Trace <span class="hljs-title">t1</span><span class="hljs-params">(<span class="hljs-string">&quot;local&quot;</span>)</span></span>;<br>    Trace t2 = t1;           <span class="hljs-comment">// COPY</span><br>    Trace t3 = <span class="hljs-built_in">make</span>();       <span class="hljs-comment">// MOVE (RVO may elide)</span><br>    t2 = std::<span class="hljs-built_in">move</span>(t1);      <span class="hljs-comment">// MOVE ASSIGN</span><br>&#125;<br></code></pre></td></tr></table></figure><h3 id="Rule-of-Zero-å®æˆ˜"><a href="#Rule-of-Zero-å®æˆ˜" class="headerlink" title="Rule of Zero å®æˆ˜"></a>Rule of Zero å®æˆ˜</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;vector&gt;</span></span><br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">ModernVector</span> &#123;<br>    std::vector&lt;<span class="hljs-type">int</span>&gt; data;  <span class="hljs-comment">// RAII å®¹å™¨</span><br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">push_back</span><span class="hljs-params">(<span class="hljs-type">int</span> x)</span> </span>&#123; data.<span class="hljs-built_in">push_back</span>(x); &#125;<br>    <span class="hljs-comment">// æ‰€æœ‰ SMF ç”±ç¼–è¯‘å™¨ç”Ÿæˆ â†’ æ·±æ‹·è´+ç§»åŠ¨å‡æ­£ç¡®</span><br>&#125;;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br>    ModernVector v1;<br>    v<span class="hljs-number">1.</span><span class="hljs-built_in">push_back</span>(<span class="hljs-number">42</span>);<br>    ModernVector v2 = v1;            <span class="hljs-comment">// æ·±æ‹·è´</span><br>    ModernVector v3 = std::<span class="hljs-built_in">move</span>(v1); <span class="hljs-comment">// ç§»åŠ¨ O(1)</span><br>&#125;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>CS106L</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>CS106L-04</title>
    <link href="/2025/11/29/CS106L-04/"/>
    <url>/2025/11/29/CS106L-04/</url>
    
    <content type="html"><![CDATA[<h2 id="ç¬¬11è®²ï¼šå‡½æ•°å¯¹è±¡ä¸-Lambda-è¡¨è¾¾å¼-ğŸ§©"><a href="#ç¬¬11è®²ï¼šå‡½æ•°å¯¹è±¡ä¸-Lambda-è¡¨è¾¾å¼-ğŸ§©" class="headerlink" title="ç¬¬11è®²ï¼šå‡½æ•°å¯¹è±¡ä¸ Lambda è¡¨è¾¾å¼ ğŸ§©"></a>ç¬¬11è®²ï¼šå‡½æ•°å¯¹è±¡ä¸ Lambda è¡¨è¾¾å¼ ğŸ§©</h2><h3 id="å‡½æ•°æŒ‡é’ˆ-vs-å‡½æ•°å¯¹è±¡ï¼ˆFunctorï¼‰"><a href="#å‡½æ•°æŒ‡é’ˆ-vs-å‡½æ•°å¯¹è±¡ï¼ˆFunctorï¼‰" class="headerlink" title="å‡½æ•°æŒ‡é’ˆ vs å‡½æ•°å¯¹è±¡ï¼ˆFunctorï¼‰"></a>å‡½æ•°æŒ‡é’ˆ vs å‡½æ•°å¯¹è±¡ï¼ˆFunctorï¼‰</h3><p>C++ æ”¯æŒå°†<strong>è¡Œä¸ºä½œä¸ºå€¼ä¼ é€’</strong>ï¼Œè¿™æ˜¯æ³›å‹ç®—æ³•çš„åŸºçŸ³ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-comment">// âŒ å‡½æ•°æŒ‡é’ˆï¼šç±»å‹è„†å¼±ã€æ— æ³•æ•è·çŠ¶æ€</span><br><span class="hljs-function"><span class="hljs-type">bool</span> <span class="hljs-title">cmp</span><span class="hljs-params">(<span class="hljs-type">int</span> a, <span class="hljs-type">int</span> b)</span> </span>&#123; <span class="hljs-keyword">return</span> a &lt; b; &#125;<br>std::<span class="hljs-built_in">sort</span>(vec.<span class="hljs-built_in">begin</span>(), vec.<span class="hljs-built_in">end</span>(), cmp);<br></code></pre></td></tr></table></figure><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-comment">// âœ… å‡½æ•°å¯¹è±¡ï¼ˆFunctorï¼‰ï¼šå¯æºå¸¦çŠ¶æ€ã€å†…è”å‹å¥½</span><br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">Ascending</span> &#123;<br>    <span class="hljs-function"><span class="hljs-type">bool</span> <span class="hljs-title">operator</span><span class="hljs-params">()</span><span class="hljs-params">(<span class="hljs-type">int</span> a, <span class="hljs-type">int</span> b)</span> <span class="hljs-type">const</span> </span>&#123; <span class="hljs-keyword">return</span> a &lt; b; &#125;<br>&#125;;<br>std::<span class="hljs-built_in">sort</span>(vec.<span class="hljs-built_in">begin</span>(), vec.<span class="hljs-built_in">end</span>(), Ascending&#123;&#125;);<br></code></pre></td></tr></table></figure><blockquote><p>ğŸ’¡ <strong>Functor çš„æœ¬è´¨</strong>ï¼šé‡è½½äº† <code>operator()</code> çš„ç±»å®ä¾‹ï¼Œè¡Œä¸ºåƒå‡½æ•°ï¼Œä½†å¯ä¿å­˜çŠ¶æ€ï¼ˆå¦‚é˜ˆå€¼ã€æ¯”è¾ƒç­–ç•¥ç­‰ï¼‰ã€‚</p></blockquote><hr><h3 id="Lambda-è¡¨è¾¾å¼ï¼šåŒ¿åå‡½æ•°çš„ç°ä»£å†™æ³•-ğŸª„"><a href="#Lambda-è¡¨è¾¾å¼ï¼šåŒ¿åå‡½æ•°çš„ç°ä»£å†™æ³•-ğŸª„" class="headerlink" title="Lambda è¡¨è¾¾å¼ï¼šåŒ¿åå‡½æ•°çš„ç°ä»£å†™æ³• ğŸª„"></a>Lambda è¡¨è¾¾å¼ï¼šåŒ¿åå‡½æ•°çš„ç°ä»£å†™æ³• ğŸª„</h3><p>Lambda æ˜¯ç¼–è¯‘å™¨è‡ªåŠ¨ç”Ÿæˆçš„<strong>åŒ¿å functor</strong>ï¼Œè¯­æ³•ç®€æ´å¼ºå¤§ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-comment">// åŸºç¡€ï¼šæ— æ•è·</span><br><span class="hljs-keyword">auto</span> square = [](<span class="hljs-type">int</span> x) &#123; <span class="hljs-keyword">return</span> x * x; &#125;;<br>std::cout &lt;&lt; <span class="hljs-built_in">square</span>(<span class="hljs-number">5</span>); <span class="hljs-comment">// 25</span><br></code></pre></td></tr></table></figure><h4 id="æ•è·æœºåˆ¶ï¼ˆCaptureï¼‰"><a href="#æ•è·æœºåˆ¶ï¼ˆCaptureï¼‰" class="headerlink" title="æ•è·æœºåˆ¶ï¼ˆCaptureï¼‰"></a>æ•è·æœºåˆ¶ï¼ˆCaptureï¼‰</h4><table><thead><tr><th>è¯­æ³•</th><th>å«ä¹‰</th><th>æ³¨æ„äº‹é¡¹</th></tr></thead><tbody><tr><td><code>[]</code></td><td>æ— æ•è·</td><td>âœ… æœ€å®‰å…¨</td></tr><tr><td><code>[=]</code></td><td>å€¼æ•è·æ‰€æœ‰</td><td>âš ï¸ C++20èµ·å¼ƒç”¨éšå¼æ•è·<code>this</code></td></tr><tr><td><code>[&amp;]</code></td><td>å¼•ç”¨æ•è·æ‰€æœ‰</td><td>âš ï¸ æ‚¬ç©ºå¼•ç”¨é£é™©ï¼</td></tr><tr><td><code>[x]</code></td><td>å€¼æ•è· <code>x</code></td><td>âœ… æ¨èç»†ç²’åº¦æ§åˆ¶</td></tr><tr><td><code>[&amp;x]</code></td><td>å¼•ç”¨æ•è· <code>x</code></td><td></td></tr><tr><td><code>[x = expr]</code></td><td>åˆå§‹åŒ–æ•è·(C++14)</td><td>âœ… ç§»åŠ¨è¯­ä¹‰ã€é‡å‘½å</td></tr><tr><td><code>[this]</code></td><td>æ•è·<code>this</code>æŒ‡é’ˆ</td><td>âš ï¸ æ‚¬ç©ºé£é™©</td></tr><tr><td><code>[*this]</code></td><td>å€¼æ•è·<code>*this</code>(C++17)</td><td>âœ… å®‰å…¨è®¿é—®æˆå‘˜</td></tr><tr><td><code>[=, this]</code></td><td>C++20æ˜¾å¼æ•è·</td><td>âœ… æ›¿ä»£æ—§å¼<code>[=]</code></td></tr></tbody></table><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-type">int</span> threshold = <span class="hljs-number">10</span>;<br><span class="hljs-keyword">auto</span> filter = [threshold](<span class="hljs-type">int</span> x) &#123;  <span class="hljs-comment">// âœ… å€¼æ•è·</span><br>    <span class="hljs-keyword">return</span> x &gt; threshold;<br>&#125;;<br><br><span class="hljs-comment">// âš ï¸ é”™è¯¯ç¤ºèŒƒï¼šå¼•ç”¨æ•è·å±€éƒ¨å˜é‡ â†’ æ‚¬ç©ºï¼</span><br><span class="hljs-keyword">auto</span> bad = [&amp;threshold](<span class="hljs-type">int</span> x) &#123; <span class="hljs-keyword">return</span> x &gt; threshold; &#125;;<br><span class="hljs-comment">// ... threshold å‡ºä½œç”¨åŸŸåï¼Œbad æˆä¸ºå®šæ—¶ç‚¸å¼¹</span><br></code></pre></td></tr></table></figure><h4 id="C-14-17-é«˜çº§æ•è·"><a href="#C-14-17-é«˜çº§æ•è·" class="headerlink" title="C++14&#x2F;17 é«˜çº§æ•è·"></a>C++14&#x2F;17 é«˜çº§æ•è·</h4><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-comment">// C++14 åˆå§‹åŒ–æ•è· - ç§»åŠ¨unique_ptr</span><br><span class="hljs-keyword">auto</span> ptr = std::<span class="hljs-built_in">make_unique</span>&lt;<span class="hljs-type">int</span>&gt;(<span class="hljs-number">42</span>);<br><span class="hljs-keyword">auto</span> lambda = [p = std::<span class="hljs-built_in">move</span>(ptr)]() &#123;<br>    std::cout &lt;&lt; *p; <span class="hljs-comment">// 42</span><br>&#125;;<br><br><span class="hljs-comment">// C++17 å€¼æ•è·*this - é¿å…æ‚¬ç©º</span><br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">S</span> &#123;<br>    <span class="hljs-type">int</span> x = <span class="hljs-number">10</span>;<br>    <span class="hljs-function"><span class="hljs-keyword">auto</span> <span class="hljs-title">getLambda</span><span class="hljs-params">()</span> </span>&#123;<br>        <span class="hljs-keyword">return</span> [*<span class="hljs-keyword">this</span>]() &#123; <span class="hljs-keyword">return</span> x; &#125;; <span class="hljs-comment">// âœ… å¤åˆ¶æ•´ä¸ªå¯¹è±¡</span><br>    &#125;<br>&#125;;<br></code></pre></td></tr></table></figure><h4 id="æ³›å‹-Lambdaï¼ˆC-14-ï¼‰"><a href="#æ³›å‹-Lambdaï¼ˆC-14-ï¼‰" class="headerlink" title="æ³›å‹ Lambdaï¼ˆC++14+ï¼‰"></a>æ³›å‹ Lambdaï¼ˆC++14+ï¼‰</h4><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-keyword">auto</span> printer = [](<span class="hljs-type">const</span> <span class="hljs-keyword">auto</span>&amp; x) &#123;<br>    std::cout &lt;&lt; x &lt;&lt; <span class="hljs-string">&#x27;\n&#x27;</span>;<br>&#125;;<br><span class="hljs-built_in">printer</span>(<span class="hljs-number">42</span>);         <span class="hljs-comment">// âœ… int</span><br><span class="hljs-built_in">printer</span>(<span class="hljs-string">&quot;hello&quot;</span>);    <span class="hljs-comment">// âœ… const char*</span><br><span class="hljs-built_in">printer</span>(<span class="hljs-number">3.14</span>);       <span class="hljs-comment">// âœ… double</span><br><br><span class="hljs-comment">// âš ï¸ æ³¨æ„ï¼šç±»å‹å¿…é¡»æ”¯æŒ operator</span><br><span class="hljs-comment">// printer(std::vector&#123;1,2,3&#125;); // âŒ ç¼–è¯‘é”™è¯¯ï¼švectoræ²¡æœ‰&lt;&lt;è¿ç®—ç¬¦</span><br></code></pre></td></tr></table></figure><blockquote><p>ğŸ” <strong>åŸç†</strong>ï¼šç¼–è¯‘å™¨ç”Ÿæˆæ¨¡æ¿ <code>operator()</code>ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-keyword">struct</span> <span class="hljs-comment">/*anonymous*/</span> &#123;<br>    <span class="hljs-function"><span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">typename</span> T&gt;</span><br><span class="hljs-function">    <span class="hljs-keyword">auto</span> <span class="hljs-title">operator</span><span class="hljs-params">()</span><span class="hljs-params">(<span class="hljs-type">const</span> T&amp; x)</span> <span class="hljs-type">const</span> </span>&#123; <br>        std::cout &lt;&lt; x &lt;&lt; <span class="hljs-string">&#x27;\n&#x27;</span>;<br>    &#125;<br>&#125;;<br></code></pre></td></tr></table></figure></blockquote><h4 id="Lambda-é«˜çº§æŠ€å·§"><a href="#Lambda-é«˜çº§æŠ€å·§" class="headerlink" title="Lambda é«˜çº§æŠ€å·§"></a>Lambda é«˜çº§æŠ€å·§</h4><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-comment">// 1. mutable Lambda - ä¿®æ”¹æ•è·çš„å€¼å‰¯æœ¬</span><br><span class="hljs-type">int</span> count = <span class="hljs-number">0</span>;<br><span class="hljs-keyword">auto</span> counter = [count]() <span class="hljs-keyword">mutable</span> &#123;<br>    <span class="hljs-keyword">return</span> ++count; <span class="hljs-comment">// âœ… ä¿®æ”¹å‰¯æœ¬</span><br>&#125;;<br><span class="hljs-built_in">counter</span>(); <span class="hljs-comment">// 1</span><br><span class="hljs-built_in">counter</span>(); <span class="hljs-comment">// 2</span><br><span class="hljs-comment">// count ä»ä¸º 0ï¼ˆå¤–éƒ¨æœªå˜ï¼‰</span><br><br><span class="hljs-comment">// 2. ç«‹å³è°ƒç”¨ Lambda è¡¨è¾¾å¼ï¼ˆIIFEï¼‰</span><br><span class="hljs-type">int</span> result = [&amp;]() &#123;<br>    <span class="hljs-comment">// å¤æ‚åˆå§‹åŒ–é€»è¾‘</span><br>    <span class="hljs-keyword">if</span> (condition) <span class="hljs-keyword">return</span> <span class="hljs-number">42</span>;<br>    <span class="hljs-keyword">else</span> <span class="hljs-keyword">return</span> <span class="hljs-built_in">compute</span>();<br>&#125;();<br><br><span class="hljs-comment">// 3. é€’å½’ Lambda (C++14+)</span><br><span class="hljs-keyword">auto</span> fib = [](<span class="hljs-type">int</span> n) &#123;<br>    <span class="hljs-keyword">auto</span> impl = [](<span class="hljs-type">int</span> n, <span class="hljs-keyword">auto</span>&amp; self) -&gt; <span class="hljs-type">int</span> &#123;<br>        <span class="hljs-keyword">return</span> n &lt; <span class="hljs-number">2</span> ? n : <span class="hljs-built_in">self</span>(n<span class="hljs-number">-1</span>, self) + <span class="hljs-built_in">self</span>(n<span class="hljs-number">-2</span>, self);<br>    &#125;;<br>    <span class="hljs-keyword">return</span> <span class="hljs-built_in">impl</span>(n, impl);<br>&#125;;<br>std::cout &lt;&lt; <span class="hljs-built_in">fib</span>(<span class="hljs-number">10</span>); <span class="hljs-comment">// 55</span><br></code></pre></td></tr></table></figure><hr><h3 id="std-functionï¼šç»Ÿä¸€çš„å¯è°ƒç”¨åŒ…è£…å™¨-ğŸ“¦"><a href="#std-functionï¼šç»Ÿä¸€çš„å¯è°ƒç”¨åŒ…è£…å™¨-ğŸ“¦" class="headerlink" title="std::functionï¼šç»Ÿä¸€çš„å¯è°ƒç”¨åŒ…è£…å™¨ ğŸ“¦"></a><code>std::function</code>ï¼šç»Ÿä¸€çš„å¯è°ƒç”¨åŒ…è£…å™¨ ğŸ“¦</h3><p>å½“éœ€è¦<strong>ç±»å‹æ“¦é™¤</strong>ï¼ˆtype erasureï¼‰â€”â€”å³æŠŠä¸åŒå¯è°ƒç”¨å¯¹è±¡ç»Ÿä¸€ä¸ºåŒä¸€ç±»å‹æ—¶ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;functional&gt;</span></span><br><br>std::function&lt;<span class="hljs-type">int</span>(<span class="hljs-type">int</span>)&gt; f;<br><br>f = [](<span class="hljs-type">int</span> x) &#123; <span class="hljs-keyword">return</span> x * <span class="hljs-number">2</span>; &#125;;   <span class="hljs-comment">// Lambda</span><br>f = &amp;square;                       <span class="hljs-comment">// å‡½æ•°æŒ‡é’ˆ</span><br>f = std::<span class="hljs-built_in">bind</span>(std::plus&#123;&#125;, <span class="hljs-number">10</span>, std::placeholders::_1); <span class="hljs-comment">// bind</span><br><br>std::cout &lt;&lt; <span class="hljs-built_in">f</span>(<span class="hljs-number">5</span>); <span class="hljs-comment">// 10, 25, 15</span><br></code></pre></td></tr></table></figure><h4 id="æ€§èƒ½å¯¹æ¯”"><a href="#æ€§èƒ½å¯¹æ¯”" class="headerlink" title="æ€§èƒ½å¯¹æ¯”"></a>æ€§èƒ½å¯¹æ¯”</h4><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-comment">// âœ… ç›´æ¥ Lambda/æ¨¡æ¿ï¼šé›¶å¼€é”€ï¼ˆå†…è”ï¼‰</span><br><span class="hljs-function"><span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">typename</span> F&gt;</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">process</span><span class="hljs-params">(F&amp;&amp; func)</span> </span>&#123; <span class="hljs-built_in">func</span>(); &#125; <span class="hljs-comment">// ç¼–è¯‘æœŸä¼˜åŒ–</span><br><br><span class="hljs-comment">// âš ï¸ std::functionï¼šè¿è¡Œæ—¶å¼€é”€ï¼ˆ~20-30nsï¼‰</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">process</span><span class="hljs-params">(std::function&lt;<span class="hljs-type">void</span>()&gt; func)</span> </span>&#123; <span class="hljs-built_in">func</span>(); &#125; <span class="hljs-comment">// è™šè¡¨æŸ¥æ‰¾</span><br></code></pre></td></tr></table></figure><p><strong>ä½¿ç”¨åœºæ™¯</strong>ï¼š</p><ul><li>âœ… éœ€è¦å­˜å‚¨å¼‚æ„å¯è°ƒç”¨å¯¹è±¡ï¼ˆå®¹å™¨&#x2F;ç±»æˆå‘˜ï¼‰</li><li>âœ… è¿è¡Œæ—¶åŠ¨æ€åˆ‡æ¢å‡½æ•°</li><li>âœ… ABI ç¨³å®šæ¥å£ï¼ˆä¸æš´éœ²æ¨¡æ¿ï¼‰</li><li>âŒ é«˜é¢‘è·¯å¾„&#x2F;æ€§èƒ½å…³é”®ä»£ç ï¼ˆç”¨æ¨¡æ¿ï¼‰</li></ul><blockquote><p>âš ï¸ <strong>æ€§èƒ½ä»£ä»·</strong>ï¼š<code>std::function</code> é€šå¸¸æœ‰è™šè¡¨è°ƒç”¨å¼€é”€ + å°å¯¹è±¡ä¼˜åŒ–ï¼ˆSSOï¼‰è¾¹ç•Œï¼ˆâ‰ˆ16â€“32å­—èŠ‚ï¼‰ã€‚</p></blockquote><hr><h2 id="ç¬¬12è®²ï¼šè¿ç®—ç¬¦é‡è½½-â•â–Ã—Ã·"><a href="#ç¬¬12è®²ï¼šè¿ç®—ç¬¦é‡è½½-â•â–Ã—Ã·" class="headerlink" title="ç¬¬12è®²ï¼šè¿ç®—ç¬¦é‡è½½ â•â–Ã—Ã·"></a>ç¬¬12è®²ï¼šè¿ç®—ç¬¦é‡è½½ â•â–Ã—Ã·</h2><h3 id="ä¸ºä»€ä¹ˆéœ€è¦è¿ç®—ç¬¦é‡è½½ï¼Ÿ"><a href="#ä¸ºä»€ä¹ˆéœ€è¦è¿ç®—ç¬¦é‡è½½ï¼Ÿ" class="headerlink" title="ä¸ºä»€ä¹ˆéœ€è¦è¿ç®—ç¬¦é‡è½½ï¼Ÿ"></a>ä¸ºä»€ä¹ˆéœ€è¦è¿ç®—ç¬¦é‡è½½ï¼Ÿ</h3><blockquote><p><strong>â€œè¿ç®—ç¬¦èƒ½è®©ç±»å‹è¡Œä¸ºåƒå†…ç½®ç±»å‹ä¸€æ ·è‡ªç„¶ã€‚â€</strong><br>â€”â€”Bjarne Stroustrup</p></blockquote><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs cpp">StanfordID a&#123;<span class="hljs-string">&quot;Alice&quot;</span>, <span class="hljs-string">&quot;alice&quot;</span>, <span class="hljs-number">123</span>&#125;;<br>StanfordID b&#123;<span class="hljs-string">&quot;Bob&quot;</span>, <span class="hljs-string">&quot;bob&quot;</span>, <span class="hljs-number">456</span>&#125;;<br><br><span class="hljs-comment">// âŒ ä¸ç›´è§‚</span><br><span class="hljs-keyword">if</span> (a.<span class="hljs-built_in">lessThan</span>(b)) &#123; ... &#125;<br><br><span class="hljs-comment">// âœ… ç›´è§‰ï¼šID æ˜¯æœ‰åºçš„ï¼Œ`&lt;` å°±è¯¥æœ‰æ„ä¹‰</span><br><span class="hljs-keyword">if</span> (a &lt; b) &#123; ... &#125;<br><br><span class="hljs-keyword">auto</span> m = std::<span class="hljs-built_in">min</span>(a, b); <span class="hljs-comment">// âœ¨ ç°åœ¨å¯ä»¥ç”¨äº†ï¼</span><br></code></pre></td></tr></table></figure><hr><h3 id="é‡è½½æ–¹å¼ï¼šæˆå‘˜-vs-éæˆå‘˜"><a href="#é‡è½½æ–¹å¼ï¼šæˆå‘˜-vs-éæˆå‘˜" class="headerlink" title="é‡è½½æ–¹å¼ï¼šæˆå‘˜ vs éæˆå‘˜"></a>é‡è½½æ–¹å¼ï¼šæˆå‘˜ vs éæˆå‘˜</h3><table><thead><tr><th>æ–¹å¼</th><th>è¯­æ³•</th><th>é€‚ç”¨åœºæ™¯</th><th>ç¼ºç‚¹</th></tr></thead><tbody><tr><td><strong>æˆå‘˜å‡½æ•°</strong></td><td><code>bool operator&lt;(const T&amp; rhs) const;</code></td><td>ä¿®æ”¹å·¦ä¾§å¯¹è±¡ï¼ˆå¦‚ <code>+=</code>, <code>=</code>ï¼‰</td><td>âŒ å·¦æ“ä½œæ•°å¿…é¡»æ˜¯ç±»ç±»å‹</td></tr><tr><td><strong>éæˆå‘˜å‡½æ•°</strong></td><td><code>bool operator&lt;(const T&amp; lhs, const T&amp; rhs);</code></td><td>å¯¹ç§°æ“ä½œï¼ˆ<code>+</code>, <code>&lt;</code>, <code>==</code>ï¼‰</td><td>âŒ æ— æ³•è®¿é—®ç§æœ‰æˆå‘˜ï¼ˆé™¤é <code>friend</code>ï¼‰</td></tr></tbody></table><p>âœ… <strong>STL æ¨è</strong>ï¼šä¼˜å…ˆä½¿ç”¨<strong>éæˆå‘˜é‡è½½</strong>ï¼ˆæ›´æ³›åŒ–ã€æ”¯æŒéšå¼è½¬æ¢ï¼‰ã€‚</p><h4 id="ç¤ºä¾‹ï¼šStanfordID-çš„"><a href="#ç¤ºä¾‹ï¼šStanfordID-çš„" class="headerlink" title="ç¤ºä¾‹ï¼šStanfordID çš„ &lt; é‡è½½"></a>ç¤ºä¾‹ï¼š<code>StanfordID</code> çš„ <code>&lt;</code> é‡è½½</h4><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-comment">// StanfordID.h</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">StanfordID</span> &#123;<br>    std::string name, sunet;<br>    <span class="hljs-type">int</span> idNumber;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-built_in">StanfordID</span>(std::string n, std::string s, <span class="hljs-type">int</span> id);<br><br>    <span class="hljs-comment">// 1ï¸âƒ£ æˆå‘˜é‡è½½ï¼ˆä»…å½“ lhs æ˜¯ StanfordIDï¼‰</span><br>    <span class="hljs-type">bool</span> <span class="hljs-keyword">operator</span>&lt;(<span class="hljs-type">const</span> StanfordID&amp; rhs) <span class="hljs-type">const</span>;<br><br>    <span class="hljs-comment">// 2ï¸âƒ£ éæˆå‘˜é‡è½½ï¼ˆéœ€ friend è®¿é—®ç§æœ‰ï¼‰</span><br>    <span class="hljs-keyword">friend</span> <span class="hljs-type">bool</span> <span class="hljs-keyword">operator</span>&lt;(<span class="hljs-type">const</span> StanfordID&amp; lhs, <span class="hljs-type">const</span> StanfordID&amp; rhs);<br>&#125;;<br><br><span class="hljs-comment">// StanfordID.cpp</span><br><span class="hljs-comment">// æˆå‘˜ç‰ˆæœ¬</span><br><span class="hljs-type">bool</span> StanfordID::<span class="hljs-keyword">operator</span>&lt;(<span class="hljs-type">const</span> StanfordID&amp; rhs) <span class="hljs-type">const</span> &#123;<br>    <span class="hljs-keyword">return</span> idNumber &lt; rhs.idNumber;  <span class="hljs-comment">// âœ… ç›´æ¥è®¿é—® rhs.idNumberï¼ˆåŒç±»å‹ï¼‰</span><br>&#125;<br><br><span class="hljs-comment">// éæˆå‘˜ç‰ˆæœ¬ï¼ˆæ›´çµæ´»ï¼‰</span><br><span class="hljs-type">bool</span> <span class="hljs-keyword">operator</span>&lt;(<span class="hljs-type">const</span> StanfordID&amp; lhs, <span class="hljs-type">const</span> StanfordID&amp; rhs) &#123;<br>    <span class="hljs-keyword">return</span> lhs.idNumber &lt; rhs.idNumber;<br>&#125;<br></code></pre></td></tr></table></figure><blockquote><p>ğŸ¯ <strong>æœ€ä½³å®è·µ</strong>ï¼š  </p><ul><li>å¯¹ç§°æ“ä½œï¼ˆ<code>==</code>, <code>&lt;</code>, <code>+</code>ï¼‰â†’ <strong>éæˆå‘˜ + <code>friend</code></strong>  </li><li>ä¿®æ”¹å·¦ä¾§ï¼ˆ<code>+=</code>, <code>=</code>ï¼‰â†’ <strong>æˆå‘˜å‡½æ•°</strong>  </li><li>æµæ“ä½œï¼ˆ<code>&lt;&lt;</code>, <code>&gt;&gt;</code>ï¼‰â†’ <strong>å¿…é¡»éæˆå‘˜</strong>ï¼ˆ<code>ostream</code> ä¸æ˜¯ä½ å†™çš„ç±»ï¼ï¼‰</li></ul></blockquote><hr><h3 id="å¿…é¡»é‡è½½çš„â€é…å¥—â€è¿ç®—ç¬¦"><a href="#å¿…é¡»é‡è½½çš„â€é…å¥—â€è¿ç®—ç¬¦" class="headerlink" title="å¿…é¡»é‡è½½çš„â€é…å¥—â€è¿ç®—ç¬¦"></a>å¿…é¡»é‡è½½çš„â€é…å¥—â€è¿ç®—ç¬¦</h3><h4 id="Rule-of-Contrarietyï¼ˆåæ¼”å¾‹ï¼‰"><a href="#Rule-of-Contrarietyï¼ˆåæ¼”å¾‹ï¼‰" class="headerlink" title="Rule of Contrarietyï¼ˆåæ¼”å¾‹ï¼‰"></a>Rule of Contrarietyï¼ˆåæ¼”å¾‹ï¼‰</h4><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-comment">// âœ… è‡ªåŠ¨æ¨å¯¼ != æ¥è‡ª ==</span><br><span class="hljs-type">bool</span> <span class="hljs-keyword">operator</span>==(<span class="hljs-type">const</span> StanfordID&amp; lhs, <span class="hljs-type">const</span> StanfordID&amp; rhs) &#123;<br>    <span class="hljs-keyword">return</span> lhs.name == rhs.name &amp;&amp;<br>           lhs.sunet == rhs.sunet &amp;&amp;<br>           lhs.idNumber == rhs.idNumber;<br>&#125;<br><br><span class="hljs-type">bool</span> <span class="hljs-keyword">operator</span>!=(<span class="hljs-type">const</span> StanfordID&amp; lhs, <span class="hljs-type">const</span> StanfordID&amp; rhs) &#123;<br>    <span class="hljs-keyword">return</span> !(lhs == rhs);  <span class="hljs-comment">// âœ… ä¸€è¡Œæå®šï¼Œæ°¸ä¸çŸ›ç›¾</span><br>&#125;<br></code></pre></td></tr></table></figure><h4 id="C-20-Spaceship-Operator"><a href="#C-20-Spaceship-Operator" class="headerlink" title="C++20 Spaceship Operator &lt;=&gt;"></a>C++20 Spaceship Operator <code>&lt;=&gt;</code></h4><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-comment">// âœ… ä¸€ä¸ªè¿ç®—ç¬¦è‡ªåŠ¨ç”Ÿæˆ 6 ä¸ªæ¯”è¾ƒ</span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;compare&gt;</span></span><br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">StanfordID</span> &#123;<br>    std::string name, sunet;<br>    <span class="hljs-type">int</span> idNumber;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-comment">// è‡ªåŠ¨ç”Ÿæˆ: ==, !=, &lt;, &lt;=, &gt;, &gt;=</span><br>    <span class="hljs-keyword">auto</span> <span class="hljs-built_in">operator</span>&lt;=&gt;(<span class="hljs-type">const</span> StanfordID&amp;) <span class="hljs-type">const</span> = <span class="hljs-keyword">default</span>;<br>&#125;;<br></code></pre></td></tr></table></figure><h4 id="æµæ’å…¥-æå–ï¼š"><a href="#æµæ’å…¥-æå–ï¼š" class="headerlink" title="æµæ’å…¥&#x2F;æå–ï¼š&lt;&lt; &#x2F; &gt;&gt;"></a>æµæ’å…¥&#x2F;æå–ï¼š<code>&lt;&lt;</code> &#x2F; <code>&gt;&gt;</code></h4><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-comment">// è¾“å‡º</span><br>std::ostream&amp; <span class="hljs-keyword">operator</span>&lt;&lt;(std::ostream&amp; os, <span class="hljs-type">const</span> StanfordID&amp; sid) &#123;<br>    <span class="hljs-keyword">return</span> os &lt;&lt; <span class="hljs-string">&quot;Name: &quot;</span> &lt;&lt; sid.name<br>              &lt;&lt; <span class="hljs-string">&quot;, SUNet: &quot;</span> &lt;&lt; sid.sunet<br>              &lt;&lt; <span class="hljs-string">&quot;, ID: &quot;</span> &lt;&lt; sid.idNumber;<br>&#125;<br><br><span class="hljs-comment">// è¾“å…¥</span><br>std::istream&amp; <span class="hljs-keyword">operator</span>&gt;&gt;(std::istream&amp; is, StanfordID&amp; sid) &#123;<br>    std::string name, sunet;<br>    <span class="hljs-type">int</span> id;<br>    <br>    <span class="hljs-comment">// æ ¼å¼: Alice alice 123</span><br>    <span class="hljs-keyword">if</span> (is &gt;&gt; name &gt;&gt; sunet &gt;&gt; id) &#123;<br>        sid = StanfordID&#123;name, sunet, id&#125;;<br>    &#125;<br>    <span class="hljs-keyword">return</span> is; <span class="hljs-comment">// âœ… æ”¯æŒé“¾å¼è°ƒç”¨å’Œé”™è¯¯æ£€æŸ¥</span><br>&#125;<br><br><span class="hljs-comment">// ä½¿ç”¨</span><br>std::cout &lt;&lt; a &lt;&lt; <span class="hljs-string">&#x27;\n&#x27;</span>; <br><span class="hljs-comment">// â†’ Name: Alice, SUNet: alice, ID: 123</span><br><br>StanfordID s;<br>std::cin &gt;&gt; s;<br><span class="hljs-keyword">if</span> (std::cin) &#123; <span class="hljs-comment">/* è¯»å–æˆåŠŸ */</span> &#125;<br></code></pre></td></tr></table></figure><blockquote><p>ğŸ”‘ <strong>æ³¨æ„</strong>ï¼š  </p><ul><li>è¿”å› <code>ostream&amp;</code> &#x2F; <code>istream&amp;</code> ä»¥æ”¯æŒé“¾å¼è°ƒç”¨ï¼ˆ<code>cout &lt;&lt; a &lt;&lt; b</code>ï¼‰  </li><li>å‚æ•°ä¸º <code>const &amp;</code> é¿å…æ‹·è´ï¼ˆè¾“å‡ºï¼‰&#x2F; éconstå¼•ç”¨ï¼ˆè¾“å…¥ï¼‰  </li><li><strong>æ°¸ä¸</strong>åœ¨ <code>&lt;&lt;</code> ä¸­è¾“å‡º <code>endl</code>ï¼ˆç ´åç¼“å†²æ§åˆ¶æƒï¼‰</li></ul></blockquote><hr><h3 id="The-Rule-of-Three-Five-Zero"><a href="#The-Rule-of-Three-Five-Zero" class="headerlink" title="The Rule of Three&#x2F;Five&#x2F;Zero"></a>The Rule of Three&#x2F;Five&#x2F;Zero</h3><p>âš ï¸ <strong>å¦‚æœé‡è½½äº†èµ‹å€¼è¿ç®—ç¬¦ï¼Œå¿…é¡»è€ƒè™‘èµ„æºç®¡ç†</strong>ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-comment">// Rule of Five (C++11)</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Resource</span> &#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-built_in">Resource</span>(<span class="hljs-type">const</span> Resource&amp;);              <span class="hljs-comment">// æ‹·è´æ„é€ </span><br>    Resource&amp; <span class="hljs-keyword">operator</span>=(<span class="hljs-type">const</span> Resource&amp;);   <span class="hljs-comment">// æ‹·è´èµ‹å€¼ â¬…ï¸ é‡è½½</span><br>    <span class="hljs-built_in">Resource</span>(Resource&amp;&amp;) <span class="hljs-keyword">noexcept</span>;          <span class="hljs-comment">// ç§»åŠ¨æ„é€ </span><br>    Resource&amp; <span class="hljs-keyword">operator</span>=(Resource&amp;&amp;) <span class="hljs-keyword">noexcept</span>; <span class="hljs-comment">// ç§»åŠ¨èµ‹å€¼ â¬…ï¸ é‡è½½</span><br>    ~<span class="hljs-built_in">Resource</span>();                            <span class="hljs-comment">// ææ„å‡½æ•°</span><br>&#125;;<br><br><span class="hljs-comment">// âœ… æˆ–éµå¾ª Rule of Zero: ä¸æ‰‹åŠ¨ç®¡ç†èµ„æº</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Modern</span> &#123;<br>    std::unique_ptr&lt;<span class="hljs-type">int</span>&gt; data; <span class="hljs-comment">// è‡ªåŠ¨ç®¡ç†</span><br>    <span class="hljs-comment">// ç¼–è¯‘å™¨ç”Ÿæˆæ‰€æœ‰ç‰¹æ®Šæˆå‘˜å‡½æ•°</span><br>&#125;;<br></code></pre></td></tr></table></figure><hr><h3 id="è¿ç®—ç¬¦é‡è½½å¸¸è§é™·é˜±-âš ï¸"><a href="#è¿ç®—ç¬¦é‡è½½å¸¸è§é™·é˜±-âš ï¸" class="headerlink" title="è¿ç®—ç¬¦é‡è½½å¸¸è§é™·é˜± âš ï¸"></a>è¿ç®—ç¬¦é‡è½½å¸¸è§é™·é˜± âš ï¸</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-comment">// âŒ é”™è¯¯1: è¿”å›å±€éƒ¨å¼•ç”¨</span><br><span class="hljs-type">const</span> T&amp; <span class="hljs-keyword">operator</span>+(<span class="hljs-type">const</span> T&amp; other) <span class="hljs-type">const</span> &#123;<br>    T result = *<span class="hljs-keyword">this</span>; <span class="hljs-comment">// å±€éƒ¨å˜é‡</span><br>    result += other;<br>    <span class="hljs-keyword">return</span> result; <span class="hljs-comment">// ğŸ’£ æ‚¬ç©ºå¼•ç”¨!</span><br>&#125;<br><br><span class="hljs-comment">// âœ… æ­£ç¡®: è¿”å›å€¼ï¼ˆRVO/NRVOä¼˜åŒ–ï¼‰</span><br>T <span class="hljs-keyword">operator</span>+(<span class="hljs-type">const</span> T&amp; other) <span class="hljs-type">const</span> &#123;<br>    T result = *<span class="hljs-keyword">this</span>;<br>    result += other;<br>    <span class="hljs-keyword">return</span> result;<br>&#125;<br><br><span class="hljs-comment">// âŒ é”™è¯¯2: ç ´åå¯¹ç§°æ€§</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Money</span> &#123;<br>    <span class="hljs-type">bool</span> <span class="hljs-keyword">operator</span>==(<span class="hljs-type">int</span> amount) <span class="hljs-type">const</span>; <span class="hljs-comment">// ä»…æ”¯æŒ m == 42</span><br>&#125;;<br>Money m&#123;<span class="hljs-number">100</span>&#125;;<br>m == <span class="hljs-number">42</span>;  <span class="hljs-comment">// âœ…</span><br><span class="hljs-number">42</span> == m;  <span class="hljs-comment">// âŒ ç¼–è¯‘é”™è¯¯!</span><br><br><span class="hljs-comment">// âœ… è§£å†³: éæˆå‘˜é‡è½½</span><br><span class="hljs-type">bool</span> <span class="hljs-keyword">operator</span>==(<span class="hljs-type">const</span> Money&amp; m, <span class="hljs-type">int</span> amount);<br><span class="hljs-type">bool</span> <span class="hljs-keyword">operator</span>==(<span class="hljs-type">int</span> amount, <span class="hljs-type">const</span> Money&amp; m);<br><br><span class="hljs-comment">// âœ… C++20: spaceship è‡ªåŠ¨å¯¹ç§°</span><br><span class="hljs-keyword">auto</span> <span class="hljs-built_in">operator</span>&lt;=&gt;(<span class="hljs-type">const</span> Money&amp;) <span class="hljs-type">const</span> = <span class="hljs-keyword">default</span>;<br></code></pre></td></tr></table></figure><hr><h3 id="é‡è½½å“²å­¦ï¼šPrinciple-of-Least-Astonishment-PoLA"><a href="#é‡è½½å“²å­¦ï¼šPrinciple-of-Least-Astonishment-PoLA" class="headerlink" title="é‡è½½å“²å­¦ï¼šPrinciple of Least Astonishment (PoLA)"></a>é‡è½½å“²å­¦ï¼šPrinciple of Least Astonishment (PoLA)</h3><blockquote><p><strong>â€œä¸è¦è®© <code>+</code> åšé›†åˆå·®ï¼Œä¸è¦è®© <code>*</code> è¡¨ç¤ºå­—ç¬¦ä¸²æ‹¼æ¥ã€‚â€</strong></p></blockquote><table><thead><tr><th>è¿ç®—ç¬¦</th><th>æ¨èè¯­ä¹‰</th><th>ç¦å¿Œ</th></tr></thead><tbody><tr><td><code>+</code>, <code>-</code></td><td>æ•°å­¦åŠ å‡ã€é›†åˆå¹¶&#x2F;å·®</td><td>å­—ç¬¦ä¸²æ‹¼æ¥ï¼ˆç”¨ <code>+=</code> å¯æ¥å—ï¼‰</td></tr><tr><td><code>&lt;</code>, <code>&gt;</code></td><td>ä¸¥æ ¼å¼±åºï¼ˆstrict weak orderingï¼‰</td><td>å­—å…¸åºä»¥å¤–çš„ä»»æ„é¡ºåºï¼ˆé™¤éæ˜ç¡®æ–‡æ¡£è¯´æ˜ï¼‰</td></tr><tr><td><code>==</code></td><td>é€æˆå‘˜ç›¸ç­‰</td><td>å¼•ç”¨ç›¸ç­‰ï¼ˆç”¨ <code>std::addressof</code> æ¯”è¾ƒæŒ‡é’ˆï¼‰</td></tr><tr><td><code>()</code></td><td>å‡½æ•°è°ƒç”¨</td><td>ä»»æ„å‰¯ä½œç”¨å¯†é›†æ“ä½œ</td></tr></tbody></table><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-comment">// âŒ åäººç±»ï¼ša + b å±…ç„¶æ˜¯ b - aï¼Ÿï¼</span><br>Money <span class="hljs-keyword">operator</span>+(<span class="hljs-type">const</span> Money&amp; a, <span class="hljs-type">const</span> Money&amp; b) &#123;<br>    <span class="hljs-keyword">return</span> b - a;  <span class="hljs-comment">// ğŸ¤¯</span><br>&#125;<br></code></pre></td></tr></table></figure><hr><h2 id="é«˜é˜¶æŠ€å·§ï¼šLambda-Operator-Overloading-å®æˆ˜"><a href="#é«˜é˜¶æŠ€å·§ï¼šLambda-Operator-Overloading-å®æˆ˜" class="headerlink" title="é«˜é˜¶æŠ€å·§ï¼šLambda + Operator Overloading å®æˆ˜"></a>é«˜é˜¶æŠ€å·§ï¼šLambda + Operator Overloading å®æˆ˜</h2><h3 id="åœºæ™¯ï¼šè‡ªå®šä¹‰æ’åºè°“è¯"><a href="#åœºæ™¯ï¼šè‡ªå®šä¹‰æ’åºè°“è¯" class="headerlink" title="åœºæ™¯ï¼šè‡ªå®šä¹‰æ’åºè°“è¯"></a>åœºæ™¯ï¼šè‡ªå®šä¹‰æ’åºè°“è¯</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs cpp">std::vector&lt;StanfordID&gt; students = &#123; <span class="hljs-comment">/*...*/</span> &#125;;<br><br><span class="hljs-comment">// æ–¹æ¡ˆ1ï¼šä¸´æ—¶ lambdaï¼ˆæœ€å¸¸ç”¨ï¼‰</span><br>std::<span class="hljs-built_in">sort</span>(students.<span class="hljs-built_in">begin</span>(), students.<span class="hljs-built_in">end</span>(),<br>    [](<span class="hljs-type">const</span> <span class="hljs-keyword">auto</span>&amp; a, <span class="hljs-type">const</span> <span class="hljs-keyword">auto</span>&amp; b) &#123;<br>        <span class="hljs-keyword">return</span> a.name &lt; b.name;  <span class="hljs-comment">// æŒ‰å§“åæ’åº</span><br>    &#125;);<br><br><span class="hljs-comment">// æ–¹æ¡ˆ2ï¼šå¯å¤ç”¨ functor</span><br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">BySunet</span> &#123;<br>    <span class="hljs-function"><span class="hljs-type">bool</span> <span class="hljs-title">operator</span><span class="hljs-params">()</span><span class="hljs-params">(<span class="hljs-type">const</span> StanfordID&amp; a, <span class="hljs-type">const</span> StanfordID&amp; b)</span> <span class="hljs-type">const</span> </span>&#123;<br>        <span class="hljs-keyword">return</span> a.sunet &lt; b.sunet;<br>    &#125;<br>&#125;;<br>std::<span class="hljs-built_in">sort</span>(students.<span class="hljs-built_in">begin</span>(), students.<span class="hljs-built_in">end</span>(), BySunet&#123;&#125;);<br></code></pre></td></tr></table></figure><h3 id="åœºæ™¯ï¼šå¸¦çŠ¶æ€çš„æ¯”è¾ƒå™¨"><a href="#åœºæ™¯ï¼šå¸¦çŠ¶æ€çš„æ¯”è¾ƒå™¨" class="headerlink" title="åœºæ™¯ï¼šå¸¦çŠ¶æ€çš„æ¯”è¾ƒå™¨"></a>åœºæ™¯ï¼šå¸¦çŠ¶æ€çš„æ¯”è¾ƒå™¨</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs cpp">std::string prefix = <span class="hljs-string">&quot;cs&quot;</span>;<br><span class="hljs-keyword">auto</span> startsWith = [&amp;prefix](<span class="hljs-type">const</span> StanfordID&amp; id) &#123;<br>    <span class="hljs-keyword">return</span> id.sunet.<span class="hljs-built_in">starts_with</span>(prefix);<br>&#125;;<br><br>std::vector&lt;StanfordID&gt; cs_studs;<br>std::<span class="hljs-built_in">copy_if</span>(students.<span class="hljs-built_in">begin</span>(), students.<span class="hljs-built_in">end</span>(),<br>             std::<span class="hljs-built_in">back_inserter</span>(cs_studs), startsWith);<br></code></pre></td></tr></table></figure><hr><h2 id="æ€»ç»“ä¸æœ€ä½³å®è·µ"><a href="#æ€»ç»“ä¸æœ€ä½³å®è·µ" class="headerlink" title="æ€»ç»“ä¸æœ€ä½³å®è·µ"></a>æ€»ç»“ä¸æœ€ä½³å®è·µ</h2><h3 id="åŠŸèƒ½å¯¹æ¯”è¡¨"><a href="#åŠŸèƒ½å¯¹æ¯”è¡¨" class="headerlink" title="åŠŸèƒ½å¯¹æ¯”è¡¨"></a>åŠŸèƒ½å¯¹æ¯”è¡¨</h3><table><thead><tr><th>æ¦‚å¿µ</th><th>æ ¸å¿ƒè¦ç‚¹</th><th>æ€§èƒ½è€ƒé‡</th><th>é€‚ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td><strong>å‡½æ•°æŒ‡é’ˆ</strong></td><td>ä¼ ç»Ÿã€æ— çŠ¶æ€</td><td>é˜»æ­¢å†…è”</td><td>ç®€å•å›è°ƒã€C å…¼å®¹</td></tr><tr><td><strong>Functor</strong></td><td>æœ‰çŠ¶æ€ã€ç±»å‹å®‰å…¨</td><td>å¯å†…è”ä¼˜åŒ–</td><td>å¤æ‚é€»è¾‘ã€éœ€è¦çŠ¶æ€</td></tr><tr><td><strong>Lambda</strong></td><td>åŒ¿å Functor è¯­æ³•ç³–</td><td>åŒ Functor</td><td>ä¸€æ¬¡æ€§ä½¿ç”¨ã€ç®€æ´</td></tr><tr><td><strong>æ³›å‹ Lambda</strong></td><td><code>auto</code> å‚æ•°&#x3D;æ¨¡æ¿</td><td>ç¼–è¯‘æœŸå¤šæ€</td><td>é€šç”¨ç®—æ³•</td></tr><tr><td><strong><code>std::function</code></strong></td><td>ç±»å‹æ“¦é™¤ã€è¿è¡Œæ—¶å¤šæ€</td><td>è™šè¡¨å¼€é”€(~20ns)</td><td>å­˜å‚¨&#x2F;å®¹å™¨ã€åŠ¨æ€ç»‘å®š</td></tr><tr><td><strong>æˆå‘˜é‡è½½</strong></td><td>ä¿®æ”¹å·¦ä¾§</td><td>-</td><td><code>+=</code>, <code>=</code>, <code>[]</code></td></tr><tr><td><strong>éæˆå‘˜é‡è½½</strong></td><td>å¯¹ç§°æ€§ã€æ³›åŒ–</td><td>åŒæˆå‘˜</td><td><code>+</code>, <code>==</code>, <code>&lt;</code>, <code>&lt;&lt;</code></td></tr><tr><td><strong>Spaceship <code>&lt;=&gt;</code></strong></td><td>è‡ªåŠ¨ç”Ÿæˆ 6 ä¸ªæ¯”è¾ƒ(C++20)</td><td>é›¶å¼€é”€</td><td>æ‰€æœ‰å¯æ¯”è¾ƒç±»å‹</td></tr></tbody></table><h3 id="å®è·µæŒ‡å—"><a href="#å®è·µæŒ‡å—" class="headerlink" title="å®è·µæŒ‡å—"></a>å®è·µæŒ‡å—</h3><table><thead><tr><th>åœºæ™¯</th><th>æ¨èæ–¹æ¡ˆ</th></tr></thead><tbody><tr><td>ä¸€æ¬¡æ€§ç®€å•å‡½æ•°</td><td>âœ… Lambdaï¼ˆå€¼æ•è·ä¼˜å…ˆï¼‰</td></tr><tr><td>å¤šæ¬¡å¤ç”¨&#x2F;å¤æ‚é€»è¾‘</td><td>âœ… å‘½å Functor</td></tr><tr><td>æ³›å‹å›è°ƒæ¥å£</td><td>âœ… æ¨¡æ¿å‚æ•°ï¼ˆ<code>template&lt;typename F&gt;</code>ï¼‰æˆ– <code>std::function</code>ï¼ˆéœ€ç±»å‹æ“¦é™¤æ—¶ï¼‰</td></tr><tr><td>å¯¹ç§°è¿ç®—ï¼ˆ<code>==</code>, <code>&lt;</code>ï¼‰</td><td>âœ… éæˆå‘˜é‡è½½ + <code>friend</code></td></tr><tr><td>ä¿®æ”¹å·¦ä¾§è¿ç®—ï¼ˆ<code>+=</code>ï¼‰</td><td>âœ… æˆå‘˜é‡è½½</td></tr><tr><td>æµæ“ä½œï¼ˆ<code>&lt;&lt;</code>ï¼‰</td><td>âœ… éæˆå‘˜é‡è½½ï¼ˆå‚æ•° <code>ostream&amp;</code>, <code>const T&amp;</code>ï¼‰</td></tr><tr><td>é¿å…æ­§ä¹‰</td><td>âœ… ä¸è¦åŒæ—¶å®šä¹‰æˆå‘˜ä¸éæˆå‘˜åŒåè¿ç®—ç¬¦</td></tr><tr><td>C++20 æ–°é¡¹ç›®</td><td>âœ… ä¼˜å…ˆä½¿ç”¨ <code>&lt;=&gt;</code> è‡ªåŠ¨ç”Ÿæˆæ¯”è¾ƒè¿ç®—ç¬¦</td></tr></tbody></table><blockquote><p>ğŸ§  <strong>é‡‘å¥</strong>ï¼š<br><strong>â€œè¿ç®—ç¬¦é‡è½½ä¸æ˜¯ç‚«æŠ€ï¼Œè€Œæ˜¯è®©ç±»å‹è¡Œä¸ºç¬¦åˆç›´è§‰ï¼›Lambda ä¸æ˜¯è¯­æ³•ç³–ï¼Œè€Œæ˜¯å°†è¡Œä¸ºä¸€ç­‰å…¬æ°‘åŒ–çš„æ¡¥æ¢ã€‚â€</strong></p></blockquote><hr><h2 id="é™„å½•ï¼šå®Œæ•´ç¤ºä¾‹ä»£ç "><a href="#é™„å½•ï¼šå®Œæ•´ç¤ºä¾‹ä»£ç " class="headerlink" title="é™„å½•ï¼šå®Œæ•´ç¤ºä¾‹ä»£ç "></a>é™„å½•ï¼šå®Œæ•´ç¤ºä¾‹ä»£ç </h2><h3 id="Lambda-ç»¼åˆç¤ºä¾‹"><a href="#Lambda-ç»¼åˆç¤ºä¾‹" class="headerlink" title="Lambda ç»¼åˆç¤ºä¾‹"></a>Lambda ç»¼åˆç¤ºä¾‹</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;vector&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;algorithm&gt;</span></span><br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br>    std::vector&lt;<span class="hljs-type">int</span>&gt; nums = &#123;<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>&#125;;<br>    <br>    <span class="hljs-comment">// å€¼æ•è·</span><br>    <span class="hljs-type">int</span> factor = <span class="hljs-number">10</span>;<br>    std::<span class="hljs-built_in">transform</span>(nums.<span class="hljs-built_in">begin</span>(), nums.<span class="hljs-built_in">end</span>(), nums.<span class="hljs-built_in">begin</span>(),<br>        [factor](<span class="hljs-type">int</span> x) &#123; <span class="hljs-keyword">return</span> x * factor; &#125;);<br>    <br>    <span class="hljs-comment">// æ³›å‹ Lambda</span><br>    <span class="hljs-keyword">auto</span> print = [](<span class="hljs-type">const</span> <span class="hljs-keyword">auto</span>&amp; x) &#123; std::cout &lt;&lt; x &lt;&lt; <span class="hljs-string">&quot; &quot;</span>; &#125;;<br>    std::for_each(nums.<span class="hljs-built_in">begin</span>(), nums.<span class="hljs-built_in">end</span>(), print);<br>    <br>    <span class="hljs-comment">// mutable Lambda</span><br>    <span class="hljs-type">int</span> sum = <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">auto</span> accumulate = [sum](<span class="hljs-type">int</span> x) <span class="hljs-keyword">mutable</span> &#123; <span class="hljs-keyword">return</span> sum += x; &#125;;<br>    std::cout &lt;&lt; <span class="hljs-string">&quot;\nLast: &quot;</span> &lt;&lt; <span class="hljs-built_in">accumulate</span>(nums.<span class="hljs-built_in">back</span>()); <span class="hljs-comment">// ä»…æœ€åä¸€ä¸ªå…ƒç´ </span><br>    <br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="è¿ç®—ç¬¦é‡è½½å®Œæ•´ç±»"><a href="#è¿ç®—ç¬¦é‡è½½å®Œæ•´ç±»" class="headerlink" title="è¿ç®—ç¬¦é‡è½½å®Œæ•´ç±»"></a>è¿ç®—ç¬¦é‡è½½å®Œæ•´ç±»</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;string&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;compare&gt;</span></span><br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">StanfordID</span> &#123;<br>    std::string name, sunet;<br>    <span class="hljs-type">int</span> idNumber;<br>    <br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-built_in">StanfordID</span>(std::string n, std::string s, <span class="hljs-type">int</span> id)<br>        : <span class="hljs-built_in">name</span>(std::<span class="hljs-built_in">move</span>(n)), <span class="hljs-built_in">sunet</span>(std::<span class="hljs-built_in">move</span>(s)), <span class="hljs-built_in">idNumber</span>(id) &#123;&#125;<br>    <br>    <span class="hljs-comment">// C++20 è‡ªåŠ¨ç”Ÿæˆæ‰€æœ‰æ¯”è¾ƒ</span><br>    <span class="hljs-keyword">auto</span> <span class="hljs-built_in">operator</span>&lt;=&gt;(<span class="hljs-type">const</span> StanfordID&amp;) <span class="hljs-type">const</span> = <span class="hljs-keyword">default</span>;<br>    <br>    <span class="hljs-comment">// æµè¾“å‡º</span><br>    <span class="hljs-keyword">friend</span> std::ostream&amp; <span class="hljs-keyword">operator</span>&lt;&lt;(std::ostream&amp; os, <span class="hljs-type">const</span> StanfordID&amp; sid) &#123;<br>        <span class="hljs-keyword">return</span> os &lt;&lt; <span class="hljs-string">&quot;Name: &quot;</span> &lt;&lt; sid.name <br>                  &lt;&lt; <span class="hljs-string">&quot;, SUNet: &quot;</span> &lt;&lt; sid.sunet <br>                  &lt;&lt; <span class="hljs-string">&quot;, ID: &quot;</span> &lt;&lt; sid.idNumber;<br>    &#125;<br>    <br>    <span class="hljs-comment">// æµè¾“å…¥</span><br>    <span class="hljs-keyword">friend</span> std::istream&amp; <span class="hljs-keyword">operator</span>&gt;&gt;(std::istream&amp; is, StanfordID&amp; sid) &#123;<br>        <span class="hljs-keyword">return</span> is &gt;&gt; sid.name &gt;&gt; sid.sunet &gt;&gt; sid.idNumber;<br>    &#125;<br>&#125;;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br>    StanfordID a&#123;<span class="hljs-string">&quot;Alice&quot;</span>, <span class="hljs-string">&quot;alice&quot;</span>, <span class="hljs-number">123</span>&#125;;<br>    StanfordID b&#123;<span class="hljs-string">&quot;Bob&quot;</span>, <span class="hljs-string">&quot;bob&quot;</span>, <span class="hljs-number">456</span>&#125;;<br>    <br>    std::cout &lt;&lt; a &lt;&lt; <span class="hljs-string">&#x27;\n&#x27;</span>;<br>    std::cout &lt;&lt; (a &lt; b ? <span class="hljs-string">&quot;Alice before Bob&quot;</span> : <span class="hljs-string">&quot;Bob before Alice&quot;</span>) &lt;&lt; <span class="hljs-string">&#x27;\n&#x27;</span>;<br>    <br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>CS106L</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>CS106L-03</title>
    <link href="/2025/11/24/CS106L-03/"/>
    <url>/2025/11/24/CS106L-03/</url>
    
    <content type="html"><![CDATA[<h2 id="ç¬¬9è®²ï¼šæ¨¡æ¿ç±»ï¼ˆTemplate-Classesï¼‰"><a href="#ç¬¬9è®²ï¼šæ¨¡æ¿ç±»ï¼ˆTemplate-Classesï¼‰" class="headerlink" title="ç¬¬9è®²ï¼šæ¨¡æ¿ç±»ï¼ˆTemplate Classesï¼‰"></a>ç¬¬9è®²ï¼šæ¨¡æ¿ç±»ï¼ˆTemplate Classesï¼‰</h2><h3 id="ä¸ºä»€ä¹ˆéœ€è¦æ¨¡æ¿ï¼Ÿ"><a href="#ä¸ºä»€ä¹ˆéœ€è¦æ¨¡æ¿ï¼Ÿ" class="headerlink" title="ä¸ºä»€ä¹ˆéœ€è¦æ¨¡æ¿ï¼Ÿ"></a>ä¸ºä»€ä¹ˆéœ€è¦æ¨¡æ¿ï¼Ÿ</h3><p>è®¾æƒ³ä½ è¦å®ç°ä¸€ä¸ªåŠ¨æ€æ•°ç»„â€”â€”ä½†åˆ†åˆ«ç”¨äº <code>int</code>ã€<code>double</code>ã€<code>std::string</code>â€¦â€¦</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-keyword">class</span> <span class="hljs-title class_">IntVector</span>   &#123; <span class="hljs-type">int</span>*    elems; ... &#125;;<br><span class="hljs-keyword">class</span> <span class="hljs-title class_">DoubleVector</span>&#123; <span class="hljs-type">double</span>* elems; ... &#125;;<br><span class="hljs-keyword">class</span> <span class="hljs-title class_">StringVector</span>&#123; string* elems; ... &#125;;<br><span class="hljs-comment">// ...è¿˜è¦ä¸ºè‡ªå®šä¹‰ç±»å‹å†å†™ä¸€éï¼ŸğŸ¤¯</span><br></code></pre></td></tr></table></figure><p><strong>é—®é¢˜ï¼š</strong> é€»è¾‘å®Œå…¨ä¸€æ ·ï¼Œåªæ˜¯ç±»å‹ä¸åŒ â†’ æåº¦é‡å¤ + æ˜“å‡ºé”™ + éš¾ç»´æŠ¤ã€‚</p><h3 id="è§£å†³æ–¹æ¡ˆï¼šæ¨¡æ¿ç±»-âœ¨"><a href="#è§£å†³æ–¹æ¡ˆï¼šæ¨¡æ¿ç±»-âœ¨" class="headerlink" title="è§£å†³æ–¹æ¡ˆï¼šæ¨¡æ¿ç±» âœ¨"></a>è§£å†³æ–¹æ¡ˆï¼šæ¨¡æ¿ç±» âœ¨</h3><p>æ¨¡æ¿ç±»æ˜¯<strong>ç±»å‹å‚æ•°åŒ–çš„ç±»è“å›¾</strong>ï¼Œç¼–è¯‘å™¨æ ¹æ®ä½ ä½¿ç”¨çš„ç±»å‹<strong>è‡ªåŠ¨å®ä¾‹åŒ–å…·ä½“ç±»</strong>ã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">typename</span> T&gt;<br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Vector</span> &#123;<br><span class="hljs-keyword">private</span>:<br>    T* elems;          <span class="hljs-comment">// â† T æ˜¯å ä½ç¬¦ï¼Œç¼–è¯‘æ—¶æ›¿æ¢</span><br>    <span class="hljs-type">size_t</span> size_, cap_;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">push_back</span><span class="hljs-params">(<span class="hljs-type">const</span> T&amp; elem)</span></span>;<br>    <span class="hljs-function">T&amp; <span class="hljs-title">at</span><span class="hljs-params">(<span class="hljs-type">size_t</span> idx)</span></span>;<br>    <span class="hljs-function"><span class="hljs-type">size_t</span> <span class="hljs-title">size</span><span class="hljs-params">()</span> <span class="hljs-type">const</span></span>;<br>    <span class="hljs-comment">// ...</span><br>&#125;;<br><br><span class="hljs-comment">// ä½¿ç”¨ï¼ˆæ¨¡æ¿å®ä¾‹åŒ–ï¼‰ï¼š</span><br>Vector&lt;<span class="hljs-type">int</span>&gt;    v1;  <span class="hljs-comment">// â† ç¼–è¯‘å™¨ç”Ÿæˆ `IntVector` ç±»</span><br>Vector&lt;string&gt; v2;  <span class="hljs-comment">// â† ç¼–è¯‘å™¨ç”Ÿæˆ `StringVector` ç±»</span><br>Vector&lt;Vector&lt;<span class="hljs-type">int</span>&gt;&gt; v3; <span class="hljs-comment">// â† åµŒå¥—ï¼å®Œå…¨æ”¯æŒ</span><br></code></pre></td></tr></table></figure><blockquote><p><strong>ğŸ’¡ æ¨¡æ¿ vs ç±»å‹</strong></p><ul><li><code>template&lt;typename T&gt; class Vector</code> æ˜¯<strong>æ¨¡æ¿</strong>ï¼ˆä¸æ˜¯ç±»å‹ï¼ï¼‰</li><li><code>Vector&lt;int&gt;</code> æ˜¯<strong>ç±»å‹</strong>ï¼ˆæ¨¡æ¿å®ä¾‹åŒ–ç»“æœï¼‰</li></ul></blockquote><h3 id="æ¨¡æ¿å®ç°çš„â€œå¥‡æ€ªâ€è§„åˆ™"><a href="#æ¨¡æ¿å®ç°çš„â€œå¥‡æ€ªâ€è§„åˆ™" class="headerlink" title="æ¨¡æ¿å®ç°çš„â€œå¥‡æ€ªâ€è§„åˆ™"></a>æ¨¡æ¿å®ç°çš„â€œå¥‡æ€ªâ€è§„åˆ™</h3><p>ç”±äºæ¨¡æ¿æ˜¯<strong>ç¼–è¯‘æœŸç”Ÿæˆä»£ç </strong>ï¼Œå…¶å®ç°éœ€æ”¾åœ¨å¤´æ–‡ä»¶ä¸­ï¼ˆæˆ–ç¡®ä¿ <code>.h</code> åŒ…å« <code>.cpp</code>ï¼‰ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-comment">// Vector.h</span><br><span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">typename</span> T&gt;<br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Vector</span> &#123; <span class="hljs-comment">/* ... */</span> &#125;;<br><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&quot;Vector.tpp&quot;</span>  <span class="hljs-comment">// ğŸ‘ˆ æ³¨æ„ï¼šä¸æ˜¯ #include &quot;Vector.cpp&quot;</span></span><br></code></pre></td></tr></table></figure><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-comment">// Vector.tpp ï¼ˆæƒ¯ä¾‹ç”¨ .tpp è¡¨ç¤ºæ¨¡æ¿å®ç°æ–‡ä»¶ï¼‰</span><br><span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">typename</span> T&gt;<br><span class="hljs-type">void</span> Vector&lt;T&gt;::<span class="hljs-built_in">push_back</span>(<span class="hljs-type">const</span> T&amp; elem) &#123;  <span class="hljs-comment">// â† å¿…é¡»å†™æˆ Vector&lt;T&gt;</span><br>    <span class="hljs-comment">// å®ç°...</span><br>&#125;<br></code></pre></td></tr></table></figure><blockquote><p><strong>ğŸ“Œ æœ¯è¯­æç¤º</strong>ï¼š<code>typename</code> å’Œ <code>class</code> åœ¨æ¨¡æ¿å‚æ•°ä¸­å®Œå…¨ç­‰ä»·ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">class</span> <span class="hljs-title class_">T</span>&gt; <span class="hljs-keyword">class</span> <span class="hljs-title class_">Vec</span>;     <span class="hljs-comment">// âœ…</span><br><span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">typename</span> T&gt; <span class="hljs-keyword">class</span> <span class="hljs-title class_">Vec</span>; <span class="hljs-comment">// âœ…</span><br></code></pre></td></tr></table></figure></blockquote><hr><h2 id="ç¬¬10è®²ï¼šæ¨¡æ¿å‡½æ•°ï¼ˆTemplate-Functionsï¼‰"><a href="#ç¬¬10è®²ï¼šæ¨¡æ¿å‡½æ•°ï¼ˆTemplate-Functionsï¼‰" class="headerlink" title="ç¬¬10è®²ï¼šæ¨¡æ¿å‡½æ•°ï¼ˆTemplate Functionsï¼‰"></a>ç¬¬10è®²ï¼šæ¨¡æ¿å‡½æ•°ï¼ˆTemplate Functionsï¼‰</h2><h3 id="æ¨¡æ¿ä¸æ­¢å±äºç±»ï¼"><a href="#æ¨¡æ¿ä¸æ­¢å±äºç±»ï¼" class="headerlink" title="æ¨¡æ¿ä¸æ­¢å±äºç±»ï¼"></a>æ¨¡æ¿ä¸æ­¢å±äºç±»ï¼</h3><p>å‡½æ•°ä¹Ÿå¯ä»¥æ¨¡æ¿åŒ–â€”â€”å‘Šåˆ«é‡è½½åœ°ç‹± ğŸ‘‡</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-comment">// âŒ ä¼ ç»Ÿé‡è½½</span><br><span class="hljs-function"><span class="hljs-type">int</span>    <span class="hljs-title">min</span><span class="hljs-params">(<span class="hljs-type">int</span> a, <span class="hljs-type">int</span> b)</span>    </span>&#123; <span class="hljs-keyword">return</span> a &lt; b ? a : b; &#125;<br><span class="hljs-function"><span class="hljs-type">double</span> <span class="hljs-title">min</span><span class="hljs-params">(<span class="hljs-type">double</span> a, <span class="hljs-type">double</span> b)</span> </span>&#123; <span class="hljs-keyword">return</span> a &lt; b ? a : b; &#125;<br><span class="hljs-function">string <span class="hljs-title">min</span><span class="hljs-params">(string a, string b)</span> </span>&#123; <span class="hljs-keyword">return</span> a &lt; b ? a : b; &#125;<br><br><span class="hljs-comment">// âœ… æ¨¡æ¿å‡½æ•°</span><br><span class="hljs-function"><span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">typename</span> T&gt;</span><br><span class="hljs-function">T <span class="hljs-title">min</span><span class="hljs-params">(<span class="hljs-type">const</span> T&amp; a, <span class="hljs-type">const</span> T&amp; b)</span> </span>&#123;<br>    <span class="hljs-keyword">return</span> a &lt; b ? a : b;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="è°ƒç”¨æ–¹å¼çµæ´»"><a href="#è°ƒç”¨æ–¹å¼çµæ´»" class="headerlink" title="è°ƒç”¨æ–¹å¼çµæ´»"></a>è°ƒç”¨æ–¹å¼çµæ´»</h3><ul><li><strong>éšå¼å®ä¾‹åŒ–</strong>ï¼ˆæ¨èï¼‰ï¼šç¼–è¯‘å™¨è‡ªåŠ¨æ¨å¯¼ç±»å‹<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-keyword">auto</span> m1 = <span class="hljs-built_in">min</span>(<span class="hljs-number">3</span>, <span class="hljs-number">5</span>);            <span class="hljs-comment">// T = int</span><br><span class="hljs-keyword">auto</span> m2 = <span class="hljs-built_in">min</span>(<span class="hljs-number">1.2</span>, <span class="hljs-number">3.4</span>);        <span class="hljs-comment">// T = double</span><br></code></pre></td></tr></table></figure></li><li><strong>æ˜¾å¼å®ä¾‹åŒ–</strong>ï¼šæ‰‹åŠ¨æŒ‡å®šç±»å‹ï¼ˆè§£å†³æ­§ä¹‰ï¼‰<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-keyword">auto</span> m3 = <span class="hljs-built_in">min</span>&lt;std::string&gt;(<span class="hljs-string">&quot;CS&quot;</span>, <span class="hljs-string">&quot;106L&quot;</span>);  <span class="hljs-comment">// é¿å… char* æŒ‡é’ˆæ¯”è¾ƒé—®é¢˜</span><br><span class="hljs-keyword">auto</span> m4 = <span class="hljs-built_in">min</span>&lt;<span class="hljs-type">double</span>&gt;(<span class="hljs-number">42</span>, <span class="hljs-number">3.14</span>);           <span class="hljs-comment">// æ··åˆç±»å‹ï¼šint + double</span><br></code></pre></td></tr></table></figure></li></ul><h3 id="å®æˆ˜ï¼šæ³›å‹-find-ç®—æ³•"><a href="#å®æˆ˜ï¼šæ³›å‹-find-ç®—æ³•" class="headerlink" title="å®æˆ˜ï¼šæ³›å‹ find ç®—æ³•"></a>å®æˆ˜ï¼šæ³›å‹ <code>find</code> ç®—æ³•</h3><p>æ ‡å‡†åº“ <code>std::find</code> çš„ç®€åŒ–ç‰ˆâ€”â€”é€‚ç”¨äº<strong>ä»»ä½•æ”¯æŒè¿­ä»£å™¨çš„å®¹å™¨</strong>ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">typename</span> Iterator, <span class="hljs-keyword">typename</span> T&gt;</span><br><span class="hljs-function">Iterator <span class="hljs-title">find</span><span class="hljs-params">(Iterator begin, Iterator end, <span class="hljs-type">const</span> T&amp; value)</span> </span>&#123;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">auto</span> it = begin; it != end; ++it) &#123;<br>        <span class="hljs-keyword">if</span> (*it == value) <span class="hljs-keyword">return</span> it;  <span class="hljs-comment">// ä¾èµ– operator==ï¼Œéœ€ç±»å‹æ”¯æŒ</span><br>    &#125;<br>    <span class="hljs-keyword">return</span> end;<br>&#125;<br><br><span class="hljs-comment">// ä½¿ç”¨ï¼š</span><br>std::vector&lt;<span class="hljs-type">int</span>&gt; v&#123;<span class="hljs-number">1</span>, <span class="hljs-number">4</span>, <span class="hljs-number">2</span>, <span class="hljs-number">8</span>&#125;;<br><span class="hljs-keyword">auto</span> it = <span class="hljs-built_in">find</span>(v.<span class="hljs-built_in">begin</span>(), v.<span class="hljs-built_in">end</span>(), <span class="hljs-number">2</span>);<br><span class="hljs-keyword">if</span> (it != v.<span class="hljs-built_in">end</span>()) std::cout &lt;&lt; <span class="hljs-string">&quot;Found: &quot;</span> &lt;&lt; *it; <span class="hljs-comment">// 2</span><br><br>std::set&lt;std::string&gt; s&#123;<span class="hljs-string">&quot;a&quot;</span>, <span class="hljs-string">&quot;b&quot;</span>, <span class="hljs-string">&quot;c&quot;</span>&#125;;<br><span class="hljs-keyword">auto</span> jt = <span class="hljs-built_in">find</span>(s.<span class="hljs-built_in">begin</span>(), s.<span class="hljs-built_in">end</span>(), <span class="hljs-string">&quot;b&quot;</span>); <span class="hljs-comment">// âœ… åŒæ ·æ”¯æŒï¼</span><br></code></pre></td></tr></table></figure><hr><h2 id="è¿›é˜¶ä¸»é¢˜ï¼šè®©æ¨¡æ¿æ›´å¥å£®"><a href="#è¿›é˜¶ä¸»é¢˜ï¼šè®©æ¨¡æ¿æ›´å¥å£®" class="headerlink" title="è¿›é˜¶ä¸»é¢˜ï¼šè®©æ¨¡æ¿æ›´å¥å£®"></a>è¿›é˜¶ä¸»é¢˜ï¼šè®©æ¨¡æ¿æ›´å¥å£®</h2><h3 id="â—-é—®é¢˜ï¼šæ¨¡æ¿â€œç¼–è¯‘æ™šæœŸæŠ¥é”™â€"><a href="#â—-é—®é¢˜ï¼šæ¨¡æ¿â€œç¼–è¯‘æ™šæœŸæŠ¥é”™â€" class="headerlink" title="â— é—®é¢˜ï¼šæ¨¡æ¿â€œç¼–è¯‘æ™šæœŸæŠ¥é”™â€"></a>â— é—®é¢˜ï¼šæ¨¡æ¿â€œç¼–è¯‘æ™šæœŸæŠ¥é”™â€</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-keyword">struct</span> <span class="hljs-title class_">Person</span> &#123; std::string name; &#125;;<br>Person p1&#123;<span class="hljs-string">&quot;Alice&quot;</span>&#125;, p2&#123;<span class="hljs-string">&quot;Bob&quot;</span>&#125;;<br><br><span class="hljs-built_in">min</span>(p1, p2);  <span class="hljs-comment">// âŒ ç¼–è¯‘é”™è¯¯ï¼ä½†æŠ¥é”™ä½ç½®åœ¨ `return a &lt; b` å¤„ï¼Œ</span><br>              <span class="hljs-comment">// è€Œéè°ƒç”¨å¤„ï¼ä¿¡æ¯éš¾æ‡‚ã€‚</span><br></code></pre></td></tr></table></figure><h3 id="âœ…-è§£å†³æ–¹æ¡ˆï¼šC-20-Conceptsï¼ˆæ¦‚å¿µï¼‰"><a href="#âœ…-è§£å†³æ–¹æ¡ˆï¼šC-20-Conceptsï¼ˆæ¦‚å¿µï¼‰" class="headerlink" title="âœ… è§£å†³æ–¹æ¡ˆï¼šC++20 Conceptsï¼ˆæ¦‚å¿µï¼‰"></a>âœ… è§£å†³æ–¹æ¡ˆï¼šC++20 <code>Concepts</code>ï¼ˆæ¦‚å¿µï¼‰</h3><p><strong>æå‰çº¦æŸæ¨¡æ¿å‚æ•°</strong>ï¼Œä½¿é”™è¯¯æ›´æ¸…æ™°ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-comment">// å®šä¹‰â€œå¯æ¯”è¾ƒâ€æ¦‚å¿µ</span><br><span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">typename</span> T&gt;<br><span class="hljs-keyword">concept</span> Comparable = <span class="hljs-built_in">requires</span>(<span class="hljs-type">const</span> T&amp; a, <span class="hljs-type">const</span> T&amp; b) &#123;<br>    &#123; a &lt; b &#125; -&gt; std::convertible_to&lt;<span class="hljs-type">bool</span>&gt;;<br>&#125;;<br><br><span class="hljs-comment">// åº”ç”¨æ¦‚å¿µ</span><br><span class="hljs-keyword">template</span>&lt;Comparable T&gt;  <span class="hljs-comment">// â† æ˜ç¡®è¦æ±‚ T å¿…é¡»æ»¡è¶³ Comparable</span><br><span class="hljs-function">T <span class="hljs-title">min</span><span class="hljs-params">(<span class="hljs-type">const</span> T&amp; a, <span class="hljs-type">const</span> T&amp; b)</span> </span>&#123;<br>    <span class="hljs-keyword">return</span> a &lt; b ? a : b;<br>&#125;<br><br><span class="hljs-built_in">min</span>(p1, p2);  <span class="hljs-comment">// âŒ ç¼–è¯‘é”™è¯¯ï¼ç›´æ¥æç¤ºï¼š</span><br>              <span class="hljs-comment">// â€œPerson does not satisfy concept Comparableâ€</span><br></code></pre></td></tr></table></figure><blockquote><p><strong>ğŸ¯ çœŸå®åœºæ™¯</strong>ï¼šSTL å®¹å™¨å¦‚ <code>std::set&lt;T&gt;</code> éšå« <code>T</code> éœ€æ»¡è¶³ <code>StrictTotallyOrdered</code>ï¼Œç”¨æ¦‚å¿µåå¯æå‰æŠ¥é”™ã€‚</p></blockquote><hr><h2 id="é«˜é˜¶æŠ€å·§ï¼šå˜å‚æ¨¡æ¿ä¸ç¼–è¯‘æœŸè®¡ç®—"><a href="#é«˜é˜¶æŠ€å·§ï¼šå˜å‚æ¨¡æ¿ä¸ç¼–è¯‘æœŸè®¡ç®—" class="headerlink" title="é«˜é˜¶æŠ€å·§ï¼šå˜å‚æ¨¡æ¿ä¸ç¼–è¯‘æœŸè®¡ç®—"></a>é«˜é˜¶æŠ€å·§ï¼šå˜å‚æ¨¡æ¿ä¸ç¼–è¯‘æœŸè®¡ç®—</h2><h3 id="ğŸŒŸ-å˜å‚æ¨¡æ¿ï¼ˆVariadic-Templatesï¼‰"><a href="#ğŸŒŸ-å˜å‚æ¨¡æ¿ï¼ˆVariadic-Templatesï¼‰" class="headerlink" title="ğŸŒŸ å˜å‚æ¨¡æ¿ï¼ˆVariadic Templatesï¼‰"></a>ğŸŒŸ å˜å‚æ¨¡æ¿ï¼ˆVariadic Templatesï¼‰</h3><p>æ”¯æŒ<strong>ä»»æ„æ•°é‡ã€ä»»æ„ç±»å‹</strong>å‚æ•°çš„å‡½æ•°ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-comment">// é€’å½’åŸºç¡€ï¼šå•å‚æ•°ç‰ˆæœ¬</span><br><span class="hljs-function"><span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">typename</span> T&gt;</span><br><span class="hljs-function">T <span class="hljs-title">min</span><span class="hljs-params">(<span class="hljs-type">const</span> T&amp; v)</span> </span>&#123; <span class="hljs-keyword">return</span> v; &#125;<br><br><span class="hljs-comment">// é€’å½’å±•å¼€ï¼šv + (args...)</span><br><span class="hljs-function"><span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">typename</span> T, <span class="hljs-keyword">typename</span>... Args&gt;</span><br><span class="hljs-function">T <span class="hljs-title">min</span><span class="hljs-params">(<span class="hljs-type">const</span> T&amp; v, <span class="hljs-type">const</span> Args&amp;... args)</span> </span>&#123;<br>    <span class="hljs-keyword">auto</span> m = <span class="hljs-built_in">min</span>(args...);  <span class="hljs-comment">// â† é€’å½’è°ƒç”¨ï¼Œå‚æ•°åŒ…å±•å¼€</span><br>    <span class="hljs-keyword">return</span> v &lt; m ? v : m;<br>&#125;<br><br><span class="hljs-comment">// ä½¿ç”¨ï¼šæ”¯æŒä»»æ„æ•°é‡å‚æ•°ï¼</span><br><span class="hljs-keyword">auto</span> m = <span class="hljs-built_in">min</span>(<span class="hljs-number">3.14</span>, <span class="hljs-number">42</span>, <span class="hljs-number">-1</span>, <span class="hljs-number">2.718</span>);  <span class="hljs-comment">// âœ… T=doubleï¼Œè‡ªåŠ¨æ¨å¯¼</span><br></code></pre></td></tr></table></figure><h3 id="âš™ï¸-æ¨¡æ¿å…ƒç¼–ç¨‹ï¼ˆTMPï¼‰ä¸-constexpr"><a href="#âš™ï¸-æ¨¡æ¿å…ƒç¼–ç¨‹ï¼ˆTMPï¼‰ä¸-constexpr" class="headerlink" title="âš™ï¸ æ¨¡æ¿å…ƒç¼–ç¨‹ï¼ˆTMPï¼‰ä¸ constexpr"></a>âš™ï¸ æ¨¡æ¿å…ƒç¼–ç¨‹ï¼ˆTMPï¼‰ä¸ <code>constexpr</code></h3><p><strong>åœ¨ç¼–è¯‘æœŸå®Œæˆè®¡ç®—</strong>ï¼ˆé›¶è¿è¡Œæ—¶å¼€é”€ï¼‰ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-comment">// ä¼ ç»Ÿæ¨¡æ¿å…ƒç¼–ç¨‹ï¼ˆC++11 é£æ ¼ï¼‰</span><br><span class="hljs-keyword">template</span>&lt;<span class="hljs-type">size_t</span> N&gt;<br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">Factorial</span> &#123;<br>    <span class="hljs-type">static</span> <span class="hljs-keyword">constexpr</span> <span class="hljs-type">size_t</span> value = N * Factorial&lt;N<span class="hljs-number">-1</span>&gt;::value;<br>&#125;;<br><span class="hljs-keyword">template</span>&lt;&gt; <span class="hljs-keyword">struct</span> <span class="hljs-title class_">Factorial</span>&lt;<span class="hljs-number">0</span>&gt; &#123; <span class="hljs-type">static</span> <span class="hljs-keyword">constexpr</span> <span class="hljs-type">size_t</span> value = <span class="hljs-number">1</span>; &#125;;<br><br><span class="hljs-keyword">constexpr</span> <span class="hljs-keyword">auto</span> f1 = Factorial&lt;<span class="hljs-number">5</span>&gt;::value; <span class="hljs-comment">// 120ï¼Œç¼–è¯‘æœŸè®¡ç®—</span><br><br><span class="hljs-comment">// ç°ä»£å†™æ³•ï¼šconstexpr å‡½æ•°ï¼ˆæ›´æ¸…æ™°ï¼ï¼‰</span><br><span class="hljs-function"><span class="hljs-keyword">constexpr</span> <span class="hljs-type">size_t</span> <span class="hljs-title">factorial</span><span class="hljs-params">(<span class="hljs-type">size_t</span> n)</span> </span>&#123;<br>    <span class="hljs-keyword">return</span> (n &lt;= <span class="hljs-number">1</span>) ? <span class="hljs-number">1</span> : n * <span class="hljs-built_in">factorial</span>(n<span class="hljs-number">-1</span>);<br>&#125;<br><span class="hljs-keyword">constexpr</span> <span class="hljs-keyword">auto</span> f2 = <span class="hljs-built_in">factorial</span>(<span class="hljs-number">5</span>); <span class="hljs-comment">// åŒæ · 120ï¼Œç¼–è¯‘æœŸè®¡ç®—</span><br></code></pre></td></tr></table></figure><blockquote><p><strong>ğŸ” ä¼˜åŠ¿</strong>ï¼šç”Ÿæˆçš„æ±‡ç¼–ä¸­ç›´æ¥æ˜¯ <code>mov esi, 120</code>ï¼Œæ— å‡½æ•°è°ƒç”¨ï¼</p></blockquote><blockquote><p><strong>ğŸ§  é‡‘å¥</strong>ï¼š**â€œæ¨¡æ¿æ˜¯ç¼–è¯‘å™¨çš„ä»£ç ç”Ÿæˆå™¨ï¼Œè€Œ Concepts æ˜¯å®ƒçš„ä½¿ç”¨è¯´æ˜ä¹¦ã€‚â€</p></blockquote><hr>]]></content>
    
    
    <categories>
      
      <category>CS106L</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>Japan Trip 2025-2026</title>
    <link href="/2025/11/17/jp-travel/"/>
    <url>/2025/11/17/jp-travel/</url>
    
    <content type="html"><![CDATA[<h2 id="ğŸ“…-Overview"><a href="#ğŸ“…-Overview" class="headerlink" title="ğŸ“… Overview"></a>ğŸ“… Overview</h2><p><strong>æ—¥æœŸ Date:</strong> 2025å¹´12æœˆ28æ—¥ - 2026å¹´1æœˆ14æ—¥<br><strong>å¤©æ•° Duration:</strong> 18å¤©<br><strong>è·¯çº¿ Route:</strong> ä¸œäº¬ â†’ äº¬éƒ½ â†’ å¤§é˜ª â†’ æœ­å¹Œ â†’ æ´çˆ·æ¹– â†’ å‡½é¦† â†’ æœ­å¹Œ</p><ul><li>âœˆï¸ <strong>Shanghai â†’ Tokyo Haneda</strong>: ä¸œèˆª MU539 17:40èµ·é£</li><li>ğŸš„ <strong>Tokyo â†’ Kyoto</strong>: Shinkansen æ–°å¹²çº¿ (Dec 30)</li><li>ğŸš„ <strong>Kyoto â†’ Osaka</strong>: JR (Jan 4)</li><li>âœˆï¸ <strong>Osaka ITM â†’ Sapporo CTS</strong>: å›½å†…èˆªç­ (Jan 4)</li><li>ğŸšŒ <strong>Sapporo â†” Lake Toya</strong>: JRç‰¹æ€¥ (Jan 9)</li><li>ğŸš„ <strong>Lake Toya â†’ Hakodate</strong>: JR (Jan 9)</li><li>ğŸš„ <strong>Hakodate â†’ Sapporo</strong>: JR (Jan 10)</li><li>âœˆï¸ <strong>Sapporo CTS â†’ Shanghai PVG</strong>: æ–°åƒæ­³ç©ºæ¸¯ 13:50 â†’ æµ¦ä¸œT2 (Jan 14)</li></ul><h2 id="ğŸ—“ï¸-Itinerary"><a href="#ğŸ—“ï¸-Itinerary" class="headerlink" title="ğŸ—“ï¸ Itinerary"></a>ğŸ—“ï¸ Itinerary</h2><details close><summary>Day 1-4: Tokyo ä¸œäº¬ (Dec 28-31)</summary>Overview  <p><img src="/../images/tokyo-00.png" alt="tokyo"></p><p>Dec.29</p><p><img src="/../images/tokyo-01.png" alt="tokyo"></p><p>Dec.30</p><p><img src="/../images/tokyo-02.png" alt="tokyo"><br><img src="/../images/tokyo-02-meiji.png" alt="tokyo"></p><p>Dec.31 (New yearâ€™s eve)<br><img src="/../images/tokyo-03.png" alt="tokyo"></p></details><details close><summary>Day 5-8: Kyoto äº¬éƒ½ (Jan 1-4)</summary><p>Overview</p><p><img src="/../images/kyoto-00.png" alt="kyoto"></p><p>Jan.2</p><p><img src="/../images/kyoto-01.png" alt="kyoto"></p><p>Jan.3  </p><p><img src="/../images/kyoto-02.png" alt="kyoto"><br><img src="/../images/kyoto-03.png" alt="kyoto"><br><img src="/../images/kyoto-04.png" alt="kyoto"></p><p>Jan.4 (checkout - ä»å²šå±±å›æ¥å»å¤§é˜ª)</p><p><img src="/../images/kyoto-05.png" alt="kyoto"></p></details><details close><summary>Day 9-18: Sapporo æœ­å¹Œ (Jan 5-14)</summary><p>Overview<br><img src="/../images/hokkaido-00.png" alt="hokkaido"></p><p>Jan.6</p><p><img src="/../images/hokkaido-01.png" alt="hokkaido"></p><p>Jan.7-8<br><img src="/../images/hokkaido-02.png" alt="hokkaido"></p><p>Jan. 10<br><img src="/../images/hokkaido-03.png" alt="hokkaido"></p><p>Jan. 11-14<br><img src="/../images/hokkaido-04.png" alt="hokkaido"></p></details><h2 id="âœ…-Checklist"><a href="#âœ…-Checklist" class="headerlink" title="âœ… Checklist"></a>âœ… Checklist</h2><ul><li><input checked="" disabled="" type="checkbox"> eVisa ç”µå­ç­¾è¯</li><li><input checked="" disabled="" type="checkbox"> Book flights é¢„è®¢æœºç¥¨</li><li><input checked="" disabled="" type="checkbox"> Reserve accommodations é¢„è®¢é…’åº—</li><li><input disabled="" type="checkbox"> eSIM å‡†å¤‡eSIMå¡ (16 days)</li><li><input disabled="" type="checkbox"> åˆ°æ—¥æœ¬åï¼šæ¢æ±‡ (50,000 JPY)ï¼Œsuica</li></ul><h2 id="ğŸ“-Notes"><a href="#ğŸ“-Notes" class="headerlink" title="ğŸ“ Notes"></a>ğŸ“ Notes</h2><ul><li>æ–°å¹´æœŸé—´(12&#x2F;31-1&#x2F;3)è®¸å¤šæ™¯ç‚¹å¯èƒ½è°ƒæ•´è¥ä¸šæ—¶é—´</li><li>åŒ—æµ·é“1æœˆæ¸©åº¦çº¦-5Â°Cåˆ°-10Â°Cï¼Œéœ€å‡†å¤‡æ»‘é›ªè£…å¤‡</li><li>æ–°åƒå²ç©ºæ¸¯å’Œå¤§é˜ªå›½éš›ç©ºæ¸¯æå‰åˆ°è¾¾(è‡³å°‘2å°æ—¶)</li></ul>]]></content>
    
    
    
  </entry>
  
  
  
  <entry>
    <title>CS106L-02</title>
    <link href="/2025/11/17/CS106L-02/"/>
    <url>/2025/11/17/CS106L-02/</url>
    
    <content type="html"><![CDATA[<p><img src="/../images/cs106l-09.png"></p><hr><h2 id="ç¬¬5è®²ï¼šå®¹å™¨ï¼ˆContainersï¼‰ğŸ“¦"><a href="#ç¬¬5è®²ï¼šå®¹å™¨ï¼ˆContainersï¼‰ğŸ“¦" class="headerlink" title="ç¬¬5è®²ï¼šå®¹å™¨ï¼ˆContainersï¼‰ğŸ“¦"></a>ç¬¬5è®²ï¼šå®¹å™¨ï¼ˆContainersï¼‰ğŸ“¦</h2><p>å®¹å™¨æ˜¯ C++ ä¸­ç»„ç»‡æ•°æ®çš„æ ¸å¿ƒå·¥å…·ï¼Œæä¾›ç±»å‹å®‰å…¨ã€é«˜æ€§èƒ½çš„é€šç”¨æ•°æ®ç»“æ„ã€‚</p><p><img src="/../images/cs106l-07.png"></p><h3 id="å®¹å™¨æ˜¯ä»€ä¹ˆ"><a href="#å®¹å™¨æ˜¯ä»€ä¹ˆ" class="headerlink" title="å®¹å™¨æ˜¯ä»€ä¹ˆ"></a>å®¹å™¨æ˜¯ä»€ä¹ˆ</h3><p>å®¹å™¨æ˜¯å°è£…äº†<strong>æ•°æ®ç»„ç»‡æ–¹å¼</strong>çš„æ¨¡æ¿ç±»ï¼Œåˆ†ä¸ºä¸¤å¤§ç±»ï¼š</p><ul><li><strong>åºåˆ—å®¹å™¨</strong>ï¼šçº¿æ€§æ’åˆ—å…ƒç´ ï¼ˆå¦‚æ•°ç»„ã€åŒç«¯é˜Ÿåˆ—ï¼‰  </li><li><strong>å…³è”å®¹å™¨</strong>ï¼šæŒ‰é”®ç»„ç»‡å…ƒç´ ï¼ˆå¦‚å­—å…¸ã€é›†åˆï¼‰</li></ul><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs cpp">std::vector&lt;<span class="hljs-type">int</span>&gt; v = &#123;<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>&#125;;               <span class="hljs-comment">// åŠ¨æ€æ•°ç»„</span><br>std::deque&lt;<span class="hljs-type">double</span>&gt; q;                          <span class="hljs-comment">// åŒç«¯é˜Ÿåˆ—</span><br>std::map&lt;std::string, <span class="hljs-type">int</span>&gt; m = &#123;&#123;<span class="hljs-string">&quot;age&quot;</span>, <span class="hljs-number">25</span>&#125;&#125;; <span class="hljs-comment">// æœ‰åºæ˜ å°„</span><br>std::unordered_map&lt;std::string, <span class="hljs-type">int</span>&gt; um = m;  <span class="hljs-comment">// æ— åºå“ˆå¸Œæ˜ å°„</span><br></code></pre></td></tr></table></figure><div class="note note-success">            <p>ğŸ“Œ æ‰€æœ‰ STL å®¹å™¨éƒ½æ˜¯<strong>æ¨¡æ¿</strong>ï¼ˆæ³›å‹ï¼‰ï¼Œæ”¯æŒä»»æ„ç±»å‹ï¼ˆåªè¦æ»¡è¶³æ¥å£è¦æ±‚ï¼‰ã€‚</p>           </div><hr><h3 id="åºåˆ—å®¹å™¨ï¼šçº¿æ€§ç»“æ„"><a href="#åºåˆ—å®¹å™¨ï¼šçº¿æ€§ç»“æ„" class="headerlink" title="åºåˆ—å®¹å™¨ï¼šçº¿æ€§ç»“æ„"></a>åºåˆ—å®¹å™¨ï¼šçº¿æ€§ç»“æ„</h3><h4 id="std-vector-â€”â€”-åŠ¨æ€æ•°ç»„"><a href="#std-vector-â€”â€”-åŠ¨æ€æ•°ç»„" class="headerlink" title="std::vector&lt;T&gt; â€”â€” åŠ¨æ€æ•°ç»„"></a><code>std::vector&lt;T&gt;</code> â€”â€” åŠ¨æ€æ•°ç»„</h4><ul><li><strong>è¿ç»­å†…å­˜</strong>ï¼Œç¼“å­˜å‹å¥½  </li><li><strong>å°¾éƒ¨æ“ä½œé«˜æ•ˆ</strong>ï¼š<code>push_back</code> &#x2F; <code>pop_back</code>ï¼ˆæ‘Šè¿˜ <em>O</em>(1)ï¼‰  </li><li><strong>éšæœºè®¿é—®</strong>ï¼š<code>v[i]</code> æˆ– <code>v.at(i)</code>ï¼ˆåè€…è¶Šç•ŒæŠ›å¼‚å¸¸ï¼‰</li></ul><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs cpp">v.<span class="hljs-built_in">push_back</span>(<span class="hljs-number">4</span>);      <span class="hljs-comment">// âœ…</span><br>v[<span class="hljs-number">0</span>] = <span class="hljs-number">10</span>;           <span class="hljs-comment">// âœ… å¿«ï¼Œä½†ä¸æ£€æŸ¥è¾¹ç•Œï¼</span><br>v.<span class="hljs-built_in">at</span>(<span class="hljs-number">100</span>);           <span class="hljs-comment">// âŒ æŠ› std::out_of_range</span><br></code></pre></td></tr></table></figure><div class="note note-success">            <p>âš ï¸ <code>vector</code> <strong>æ²¡æœ‰ <code>push_front</code></strong> â€”â€” å¤´éƒ¨æ’å…¥éœ€æ•´ä½“æ¬ç§»ï¼Œææ…¢ã€‚</p>           </div><h4 id="std-deque-â€”â€”-åŒç«¯é˜Ÿåˆ—ï¼ˆè¯»ä½œ-â€œdeckâ€ï¼‰"><a href="#std-deque-â€”â€”-åŒç«¯é˜Ÿåˆ—ï¼ˆè¯»ä½œ-â€œdeckâ€ï¼‰" class="headerlink" title="std::deque&lt;T&gt; â€”â€” åŒç«¯é˜Ÿåˆ—ï¼ˆè¯»ä½œ â€œdeckâ€ï¼‰"></a><code>std::deque&lt;T&gt;</code> â€”â€” åŒç«¯é˜Ÿåˆ—ï¼ˆè¯»ä½œ â€œdeckâ€ï¼‰</h4><ul><li><strong>åˆ†æ®µè¿ç»­å†…å­˜</strong>ï¼ˆâ€œæ•°ç»„çš„æ•°ç»„â€ï¼‰  </li><li>æ”¯æŒ<strong>é¦–å°¾é«˜æ•ˆæ“ä½œ</strong>ï¼š<code>push_front</code> &#x2F; <code>push_back</code> &#x2F; <code>pop_front</code> &#x2F; <code>pop_back</code>  </li><li>ä»æ”¯æŒ <em>O</em>(1) éšæœºè®¿é—®ï¼ˆç•¥æ…¢äº <code>vector</code>ï¼‰</li></ul><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs cpp">deque&lt;<span class="hljs-type">double</span>&gt; prices;<br>prices.<span class="hljs-built_in">push_front</span>(<span class="hljs-number">100.5</span>);  <span class="hljs-comment">// âœ… é«˜æ•ˆ</span><br>prices.<span class="hljs-built_in">pop_back</span>();          <span class="hljs-comment">// âœ… é«˜æ•ˆ</span><br></code></pre></td></tr></table></figure><div class="note note-success">            <p>âœ… é€‚ç”¨åœºæ™¯ï¼šæ»‘åŠ¨çª—å£ã€ä»»åŠ¡é˜Ÿåˆ—ç­‰éœ€åŒç«¯æ“ä½œçš„åœºæ™¯ã€‚</p>           </div><hr><h3 id="å…³è”å®¹å™¨ï¼šæŒ‰é”®ç´¢å¼•"><a href="#å…³è”å®¹å™¨ï¼šæŒ‰é”®ç´¢å¼•" class="headerlink" title="å…³è”å®¹å™¨ï¼šæŒ‰é”®ç´¢å¼•"></a>å…³è”å®¹å™¨ï¼šæŒ‰é”®ç´¢å¼•</h3><h4 id="std-map-std-set-â€”â€”-æœ‰åºå®¹å™¨"><a href="#std-map-std-set-â€”â€”-æœ‰åºå®¹å™¨" class="headerlink" title="std::map&lt;K, V&gt; &amp; std::set&lt;K&gt; â€”â€” æœ‰åºå®¹å™¨"></a><code>std::map&lt;K, V&gt;</code> &amp; <code>std::set&lt;K&gt;</code> â€”â€” æœ‰åºå®¹å™¨</h4><ul><li>åº•å±‚ï¼š<strong>çº¢é»‘æ ‘</strong>ï¼ˆè‡ªå¹³è¡¡ BSTï¼‰  </li><li><strong>æŒ‰é”®è‡ªåŠ¨æ’åº</strong>ï¼ˆä¸­åºéå†æœ‰åºï¼‰  </li><li>æŸ¥æ‰¾&#x2F;æ’å…¥&#x2F;åˆ é™¤ï¼š<em>O</em>(log <em>n</em>)  </li><li>è¦æ±‚é”®æ”¯æŒ <code>operator&lt;</code></li></ul><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs cpp">map[<span class="hljs-string">&quot;Alex&quot;</span>];  <span class="hljs-comment">// è‹¥ &quot;Alex&quot; ä¸å­˜åœ¨ â†’ è‡ªåŠ¨æ’å…¥ &#123;&quot;Alex&quot;, V&#123;&#125;&#125;ï¼</span><br><span class="hljs-type">int</span> cnt = m.<span class="hljs-built_in">count</span>(<span class="hljs-string">&quot;Alex&quot;</span>);      <span class="hljs-comment">// å®‰å…¨æŸ¥é”®ï¼š0 æˆ– 1</span><br><span class="hljs-comment">// C++20: m.contains(&quot;Alex&quot;)</span><br></code></pre></td></tr></table></figure><ul><li><code>std::set&lt;T&gt;</code> â‰ˆ <code>map&lt;T, void&gt;</code>ï¼šä»…å­˜å”¯ä¸€é”®ï¼Œæœ‰åº  </li><li>è¿­ä»£éå†è¿”å› <code>std::pair&lt;const K, V&gt;</code>ï¼š</li></ul><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-keyword">for</span> (<span class="hljs-type">const</span> <span class="hljs-keyword">auto</span>&amp; [key, val] : m) &#123;<br>    std::cout &lt;&lt; key &lt;&lt; <span class="hljs-string">&quot;: &quot;</span> &lt;&lt; val &lt;&lt; <span class="hljs-string">&#x27;\n&#x27;</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="std-unordered-map-std-unordered-set-â€”â€”-æ— åºå“ˆå¸Œå®¹å™¨"><a href="#std-unordered-map-std-unordered-set-â€”â€”-æ— åºå“ˆå¸Œå®¹å™¨" class="headerlink" title="std::unordered_map&lt;K, V&gt; &amp; std::unordered_set&lt;K&gt; â€”â€” æ— åºå“ˆå¸Œå®¹å™¨"></a><code>std::unordered_map&lt;K, V&gt;</code> &amp; <code>std::unordered_set&lt;K&gt;</code> â€”â€” æ— åºå“ˆå¸Œå®¹å™¨</h4><ul><li>åº•å±‚ï¼š<strong>å“ˆå¸Œè¡¨ + é“¾åœ°å€æ³•</strong>  </li><li><strong>å¹³å‡ <em>O</em>(1)</strong> æŸ¥æ‰¾&#x2F;æ’å…¥&#x2F;åˆ é™¤  </li><li>è¦æ±‚é”®å¯å“ˆå¸Œï¼ˆ<code>std::hash&lt;K&gt;</code>ï¼‰ä¸”å¯åˆ¤ç­‰ï¼ˆ<code>operator==</code>ï¼‰</li></ul><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs cpp">std::unordered_map&lt;std::string, <span class="hljs-type">int</span>&gt; um;<br>um[<span class="hljs-string">&quot;Sean&quot;</span>] = <span class="hljs-number">35</span>;  <span class="hljs-comment">// hash(&quot;Sean&quot;) % bucket_count â†’ å®šä½æ¡¶</span><br></code></pre></td></tr></table></figure><h5 id="å“ˆå¸Œå…³é”®æ¦‚å¿µï¼š"><a href="#å“ˆå¸Œå…³é”®æ¦‚å¿µï¼š" class="headerlink" title="å“ˆå¸Œå…³é”®æ¦‚å¿µï¼š"></a>å“ˆå¸Œå…³é”®æ¦‚å¿µï¼š</h5><table><thead><tr><th>æœ¯è¯­</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><strong>å“ˆå¸Œå‡½æ•°</strong></td><td><code>hash(key) â†’ size_t</code>ï¼Œåº”â€œæ‰“æ•£â€è¾“å…¥ã€æŠ—å†²çª</td></tr><tr><td><strong>è´Ÿè½½å› å­</strong></td><td>&#x3D; å…ƒç´ æ•° &#x2F; æ¡¶æ•°ï¼›é»˜è®¤ &gt;1.0 æ—¶è§¦å‘ <strong>rehash</strong></td></tr><tr><td><strong>å“ˆå¸Œå†²çª</strong></td><td>ä¸åŒé”®æ˜ å°„åˆ°åŒæ¡¶ â†’ é“¾å¼çº¿æ€§æŸ¥æ‰¾ï¼ˆéœ€åˆ¤ç­‰ï¼‰</td></tr></tbody></table><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cpp">um.<span class="hljs-built_in">max_load_factor</span>(<span class="hljs-number">2.0</span>);  <span class="hljs-comment">// è°ƒé«˜é˜ˆå€¼ï¼ˆé€šå¸¸æ— éœ€æ‰‹åŠ¨è°ƒï¼‰</span><br></code></pre></td></tr></table></figure><div class="note note-success">            <p>âœ… å†…ç½®æ”¯æŒï¼š<code>int</code>ã€<code>double</code>ã€<code>std::string</code><br>âŒ ä¸æ”¯æŒï¼š<code>std::ifstream</code> ç­‰æ— é»˜è®¤å“ˆå¸Œçš„ç±»å‹</p>           </div><hr><h3 id="å®¹å™¨é€‰å‹ï¼šç©ºé—´-vs-æ—¶é—´"><a href="#å®¹å™¨é€‰å‹ï¼šç©ºé—´-vs-æ—¶é—´" class="headerlink" title="å®¹å™¨é€‰å‹ï¼šç©ºé—´ vs æ—¶é—´"></a>å®¹å™¨é€‰å‹ï¼šç©ºé—´ vs æ—¶é—´</h3><table><thead><tr><th>å®¹å™¨</th><th>éšæœºè®¿é—®</th><th>æŸ¥æ‰¾</th><th>æ’å…¥</th><th>åˆ é™¤</th><th>æœ‰åº</th><th>å…¸å‹åœºæ™¯</th></tr></thead><tbody><tr><td><code>vector</code></td><td>âœ… <em>O</em>(1)</td><td><em>O</em>(<em>n</em>)</td><td>å°¾ <em>O</em>(1)</td><td>å°¾ <em>O</em>(1)</td><td>âŒ</td><td>é¡ºåºæ•°æ®ã€é¢‘ç¹éå†</td></tr><tr><td><code>deque</code></td><td>âœ… <em>O</em>(1)</td><td><em>O</em>(<em>n</em>)</td><td>é¦–å°¾ <em>O</em>(1)</td><td>é¦–å°¾ <em>O</em>(1)</td><td>âŒ</td><td>åŒç«¯é˜Ÿåˆ—ã€æ»‘åŠ¨çª—å£</td></tr><tr><td><code>map</code>&#x2F;<code>set</code></td><td>âŒ</td><td><em>O</em>(log <em>n</em>)</td><td><em>O</em>(log <em>n</em>)</td><td><em>O</em>(log <em>n</em>)</td><td>âœ…</td><td>éœ€æœ‰åºã€èŒƒå›´æŸ¥è¯¢</td></tr><tr><td><code>unordered_map</code>&#x2F;<code>set</code></td><td>âŒ</td><td><em>O</em>(1) avg</td><td><em>O</em>(1) avg</td><td><em>O</em>(1) avg</td><td>âŒ</td><td>é«˜é¢‘æŸ¥æ‰¾ã€æ— åºå¯æ¥å—</td></tr></tbody></table><div class="note note-success">            <p>ğŸ”‘ ç»éªŒæ³•åˆ™ï¼š  </p> <ul> <li>é»˜è®¤ä¼˜å…ˆ <code>unordered_map</code>ï¼ˆå¿«ï¼ï¼‰  </li> <li>éœ€<strong>æœ‰åºéå†</strong>æˆ– <code>lower_bound</code> â†’ ç”¨ <code>map</code>  </li> <li>é”®<strong>æ— å¯æ¯”æ€§ä½†å¯å“ˆå¸Œ</strong> â†’ åªèƒ½ç”¨ <code>unordered_map</code></li> </ul>           </div><div class="note note-success">            <p>ğŸ’¡ Stroustrup åè¨€ï¼š<strong>â€œSpace is time.â€</strong><br>â€”â€” <code>unordered_map</code> ç”¨æ›´å¤šå†…å­˜æ¢æ›´å¿«æŸ¥æ‰¾ï¼›<code>vector</code> ç”¨ç´§å‡‘å†…å­˜æ¢æ›´æ…¢æŸ¥æ‰¾ã€‚</p>           </div><hr><h3 id="å…¶ä»–å¸¸ç”¨å®¹å™¨ï¼ˆæ‹“å±•ï¼‰"><a href="#å…¶ä»–å¸¸ç”¨å®¹å™¨ï¼ˆæ‹“å±•ï¼‰" class="headerlink" title="å…¶ä»–å¸¸ç”¨å®¹å™¨ï¼ˆæ‹“å±•ï¼‰"></a>å…¶ä»–å¸¸ç”¨å®¹å™¨ï¼ˆæ‹“å±•ï¼‰</h3><table><thead><tr><th>å®¹å™¨</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><code>std::array&lt;T, N&gt;</code></td><td>ç¼–è¯‘æœŸå®šé•¿æ•°ç»„ï¼Œæ— åŠ¨æ€å¼€é”€</td></tr><tr><td><code>std::list&lt;T&gt;</code></td><td>åŒå‘é“¾è¡¨ï¼Œä»»æ„ä½ç½® <em>O</em>(1) æ’åˆ ï¼ˆç¼“å­˜ä¸å‹å¥½ï¼‰</td></tr><tr><td><code>std::multimap</code> &#x2F; <code>multiset</code></td><td>å…è®¸é‡å¤é”®ï¼ˆæœ‰åºï¼‰</td></tr><tr><td><code>std::unordered_multimap</code> &#x2F; <code>..._set</code></td><td>å…è®¸é‡å¤é”®ï¼ˆå“ˆå¸Œï¼‰</td></tr></tbody></table><hr><p><img src="/../images/cs106l-08.png"></p><hr><h2 id="ç¬¬6è®²ï¼šè¿­ä»£å™¨ä¸æŒ‡é’ˆ"><a href="#ç¬¬6è®²ï¼šè¿­ä»£å™¨ä¸æŒ‡é’ˆ" class="headerlink" title="ç¬¬6è®²ï¼šè¿­ä»£å™¨ä¸æŒ‡é’ˆ"></a>ç¬¬6è®²ï¼šè¿­ä»£å™¨ä¸æŒ‡é’ˆ</h2><h3 id="å®¹å™¨éå†çš„ç»Ÿä¸€æ¥å£ï¼šè¿­ä»£å™¨"><a href="#å®¹å™¨éå†çš„ç»Ÿä¸€æ¥å£ï¼šè¿­ä»£å™¨" class="headerlink" title="å®¹å™¨éå†çš„ç»Ÿä¸€æ¥å£ï¼šè¿­ä»£å™¨"></a>å®¹å™¨éå†çš„ç»Ÿä¸€æ¥å£ï¼šè¿­ä»£å™¨</h3><p><strong>for-each å¾ªç¯çš„åº•å±‚å®ç°åŸç†ï¼š</strong></p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-keyword">for</span> (<span class="hljs-type">const</span> <span class="hljs-keyword">auto</span>&amp; elem : container) &#123;<br>    std::cout &lt;&lt; elem &lt;&lt; std::endl;<br>&#125;<br><span class="hljs-comment">// â‡“ å®é™…å±•å¼€ä¸º â‡“</span><br><span class="hljs-keyword">auto</span> b = container.<span class="hljs-built_in">begin</span>();<br><span class="hljs-keyword">auto</span> e = container.<span class="hljs-built_in">end</span>();<br><span class="hljs-keyword">for</span> (<span class="hljs-keyword">auto</span> it = b; it != e; ++it) &#123;<br>    <span class="hljs-type">const</span> <span class="hljs-keyword">auto</span>&amp; elem = *it;<br>    std::cout &lt;&lt; elem &lt;&lt; std::endl;<br>&#125;<br></code></pre></td></tr></table></figure><p><strong>æ ¸å¿ƒæŠ½è±¡â€”â€”â€œæŠ“å¨ƒå¨ƒæœºâ€æ¨¡å‹ï¼š</strong></p><ul><li><strong>å®¹å™¨</strong> æä¾›èµ·æ­¢ä½ç½®ï¼š<code>begin()</code>ï¼ˆç¬¬ä¸€ä¸ªå…ƒç´ ï¼‰ã€<code>end()</code>ï¼ˆ<strong>å°¾åä½ç½®</strong>ï¼Œæ°¸ä¸æŒ‡å‘æœ‰æ•ˆå…ƒç´ ï¼‰</li><li><strong>è¿­ä»£å™¨</strong> æ”¯æŒå››ç§åŸºæœ¬æ“ä½œï¼š<ul><li><code>*it</code>ï¼šè§£å¼•ç”¨ï¼Œè·å–å…ƒç´ ï¼ˆè‹¥ <code>it == end()</code> åˆ™æœªå®šä¹‰è¡Œä¸ºï¼‰</li><li><code>++it</code>ï¼šå‰ç§»ä¸€æ­¥ï¼ˆ<strong>æ¨èå‰ç¼€</strong>ï¼Œé¿å…æ‹·è´å¼€é”€ï¼‰</li><li><code>it == jt</code>ï¼šç›¸ç­‰æ€§æ¯”è¾ƒï¼ˆç”¨äºç»ˆæ­¢åˆ¤æ–­ï¼‰</li><li><code>it = container.begin()</code>ï¼šåˆå§‹åŒ–</li></ul></li></ul><p><img src="/../images/cs106l-06-iter-claw.png"></p><div class="note note-success">            <p>ğŸ’¡ <strong>ä¸ºä»€ä¹ˆç”¨ <code>++it</code> è€Œä¸æ˜¯ <code>it++</code>ï¼Ÿ</strong><br>åç½®è‡ªå¢ <code>it++</code> ä¼šæ„é€ ä¸€ä¸ªæ—§å€¼å‰¯æœ¬ï¼Œå¯¹å¤æ‚è¿­ä»£å™¨å¯¹è±¡ï¼ˆé <code>int</code>ï¼‰æœ‰é¢å¤–å¼€é”€ï¼›å‰ç¼€ <code>++it</code> ä»…è¿”å›å¼•ç”¨ï¼Œ<strong>æ°¸ä¸æ›´æ…¢ï¼Œæœ‰æ—¶æ›´å¿«</strong>ï¼ˆBjarne è¯­ï¼‰ã€‚</p>           </div><h3 id="è¿­ä»£å™¨åˆ†ç±»ä½“ç³»ï¼ˆæŒ‰èƒ½åŠ›é€’å¢ï¼‰"><a href="#è¿­ä»£å™¨åˆ†ç±»ä½“ç³»ï¼ˆæŒ‰èƒ½åŠ›é€’å¢ï¼‰" class="headerlink" title="è¿­ä»£å™¨åˆ†ç±»ä½“ç³»ï¼ˆæŒ‰èƒ½åŠ›é€’å¢ï¼‰"></a>è¿­ä»£å™¨åˆ†ç±»ä½“ç³»ï¼ˆæŒ‰èƒ½åŠ›é€’å¢ï¼‰</h3><table><thead><tr><th>ç±»å‹</th><th>èƒ½åŠ›</th><th>å…¸å‹å®¹å™¨</th><th>ç®—æ³•å…¼å®¹æ€§ç¤ºä¾‹</th></tr></thead><tbody><tr><td><strong>Input</strong></td><td>å•å‘åªè¯» (<code>*it</code>, <code>++it</code>)</td><td><code>istream_iterator</code></td><td><code>std::accumulate</code></td></tr><tr><td><strong>Output</strong></td><td>å•å‘åªå†™ (<code>*it = val</code>, <code>++it</code>)</td><td><code>ostream_iterator</code></td><td><code>std::copy</code></td></tr><tr><td><strong>Forward</strong></td><td>å¤šæ¬¡å•å‘éå†</td><td><code>unordered_map/set</code></td><td><code>std::find</code></td></tr><tr><td><strong>Bidirectional</strong></td><td>åŒå‘ç§»åŠ¨ (<code>++it</code>, <code>--it</code>)</td><td><code>map</code>, <code>set</code>, <code>list</code></td><td><code>std::reverse</code></td></tr><tr><td><strong>Random Access</strong></td><td>éšæœºè·³è½¬ (<code>it + n</code>, <code>it[n]</code>, <code>&lt;</code>)</td><td><code>vector</code>, <code>deque</code></td><td><code>std::sort</code>, <code>std::binary_search</code></td></tr></tbody></table><p><img src="/../images/cs106l-06-iter-hierarchy.png"></p><p><strong>å…³é”®é™åˆ¶ç¤ºä¾‹ï¼š</strong></p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs cpp">std::vector&lt;<span class="hljs-type">int</span>&gt; vec&#123;<span class="hljs-number">1</span>,<span class="hljs-number">5</span>,<span class="hljs-number">3</span>,<span class="hljs-number">4</span>&#125;;<br>std::<span class="hljs-built_in">sort</span>(vec.<span class="hljs-built_in">begin</span>(), vec.<span class="hljs-built_in">end</span>());  <span class="hljs-comment">// âœ… OK: random-access iterators</span><br><br>std::set&lt;<span class="hljs-type">int</span>&gt; s&#123;<span class="hljs-number">1</span>,<span class="hljs-number">5</span>,<span class="hljs-number">3</span>,<span class="hljs-number">4</span>&#125;;<br>std::<span class="hljs-built_in">sort</span>(s.<span class="hljs-built_in">begin</span>(), s.<span class="hljs-built_in">end</span>());      <span class="hljs-comment">// âŒ ç¼–è¯‘é”™è¯¯: set::iterator is bidirectional only</span><br></code></pre></td></tr></table></figure><hr><h2 id="ç¬¬7è®²ï¼šç±»ä¸ç»§æ‰¿"><a href="#ç¬¬7è®²ï¼šç±»ä¸ç»§æ‰¿" class="headerlink" title="ç¬¬7è®²ï¼šç±»ä¸ç»§æ‰¿"></a>ç¬¬7è®²ï¼šç±»ä¸ç»§æ‰¿</h2><h3 id="ç±»ï¼šå°è£…æ•°æ®ä¸è¡Œä¸º"><a href="#ç±»ï¼šå°è£…æ•°æ®ä¸è¡Œä¸º" class="headerlink" title="ç±»ï¼šå°è£…æ•°æ®ä¸è¡Œä¸º"></a>ç±»ï¼šå°è£…æ•°æ®ä¸è¡Œä¸º</h3><p><strong>åŠ¨æœºï¼šå¼¥è¡¥ <code>struct</code> ç¼ºé™·ï¼ˆæ— è®¿é—®æ§åˆ¶ï¼‰</strong></p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-keyword">struct</span> <span class="hljs-title class_">StanfordID</span> &#123;  <span class="hljs-comment">// æ‰€æœ‰æˆå‘˜é»˜è®¤ publicï¼Œå¤–éƒ¨å¯ä»»æ„ç¯¡æ”¹</span><br>    std::string name;<br>    <span class="hljs-type">int</span> idNumber;<br>&#125;;<br>s.idNumber = <span class="hljs-number">-999</span>;  <span class="hljs-comment">// ğŸ’€ å±é™©ï¼</span><br></code></pre></td></tr></table></figure><p><strong>ç±»å¼•å…¥è®¿é—®æ§åˆ¶ï¼š</strong></p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-keyword">class</span> <span class="hljs-title class_">StanfordID</span> &#123;<br><span class="hljs-keyword">private</span>:  <span class="hljs-comment">// å¤–éƒ¨ä¸å¯è®¿é—®</span><br>    std::string name;<br>    <span class="hljs-type">int</span> idNumber;<br><span class="hljs-keyword">public</span>:   <span class="hljs-comment">// æ¥å£æš´éœ²ç»™ç”¨æˆ·</span><br>    <span class="hljs-built_in">StanfordID</span>(std::string n, <span class="hljs-type">int</span> id);  <span class="hljs-comment">// æ„é€ å‡½æ•°</span><br>    <span class="hljs-function">std::string <span class="hljs-title">getName</span><span class="hljs-params">()</span> <span class="hljs-type">const</span></span>;        <span class="hljs-comment">// getter</span><br>    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">setID</span><span class="hljs-params">(<span class="hljs-type">int</span> id)</span></span>;                 <span class="hljs-comment">// setterï¼ˆå¯åŠ æ ¡éªŒï¼‰</span><br>&#125;;<br></code></pre></td></tr></table></figure><h3 id="å…³é”®æˆå‘˜å‡½æ•°"><a href="#å…³é”®æˆå‘˜å‡½æ•°" class="headerlink" title="å…³é”®æˆå‘˜å‡½æ•°"></a>å…³é”®æˆå‘˜å‡½æ•°</h3><table><thead><tr><th>æˆå‘˜</th><th>ä½œç”¨</th><th>ç¤ºä¾‹</th></tr></thead><tbody><tr><td><strong>æ„é€ å‡½æ•°</strong></td><td>åˆå§‹åŒ–å¯¹è±¡çŠ¶æ€</td><td><code>StanfordID s&#123;&quot;Alice&quot;, 123&#125;;</code></td></tr><tr><td><strong>åˆ—è¡¨åˆå§‹åŒ–</strong>ï¼ˆC++11ï¼‰</td><td>æ¨èå†™æ³•ï¼Œç›´æ¥åˆå§‹åŒ–æˆå‘˜</td><td><code>StanfordID::StanfordID(string n, int id) : name&#123;n&#125;, idNumber&#123;id&#125; &#123;&#125;</code></td></tr><tr><td><strong>this æŒ‡é’ˆ</strong></td><td>è§£å†³å½¢å‚ä¸æˆå‘˜åŒåå†²çª</td><td><code>this-&gt;name = name;</code></td></tr><tr><td><strong>ææ„å‡½æ•°</strong></td><td>å¯¹è±¡é”€æ¯å‰æ¸…ç†èµ„æºï¼ˆå¦‚ <code>delete[]</code>ï¼‰</td><td><code>~StanfordID() &#123; delete[] buffer; &#125;</code></td></tr></tbody></table><h3 id="ç»§æ‰¿ï¼šä»£ç å¤ç”¨ä¸å¤šæ€"><a href="#ç»§æ‰¿ï¼šä»£ç å¤ç”¨ä¸å¤šæ€" class="headerlink" title="ç»§æ‰¿ï¼šä»£ç å¤ç”¨ä¸å¤šæ€"></a>ç»§æ‰¿ï¼šä»£ç å¤ç”¨ä¸å¤šæ€</h3><p><strong>ç›®æ ‡ï¼šå»ºæ¨¡â€œis-aâ€å…³ç³»ï¼ˆCircle <strong>is a</strong> Shapeï¼‰</strong></p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Shape</span> &#123; <span class="hljs-comment">//base class</span><br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-type">double</span> <span class="hljs-title">area</span><span class="hljs-params">()</span> <span class="hljs-type">const</span> </span>= <span class="hljs-number">0</span>;  <span class="hljs-comment">// çº¯è™šå‡½æ•° â†’ æŠ½è±¡åŸºç±»</span><br>&#125;;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Circle</span> : <span class="hljs-keyword">public</span> Shape &#123; <span class="hljs-comment">// inheritance</span><br><span class="hljs-keyword">private</span>:<br>    <span class="hljs-type">double</span> radius;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-built_in">Circle</span>(<span class="hljs-type">double</span> r) : radius&#123;r&#125; &#123;&#125;<br>    <span class="hljs-function"><span class="hljs-type">double</span> <span class="hljs-title">area</span><span class="hljs-params">()</span> <span class="hljs-type">const</span> <span class="hljs-keyword">override</span> </span>&#123; <span class="hljs-keyword">return</span> <span class="hljs-number">3.14</span> * radius * radius; &#125;  <span class="hljs-comment">// é‡å†™</span><br>&#125;;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Rectangle</span> : <span class="hljs-keyword">public</span> Shape &#123;<br><span class="hljs-keyword">private</span>:<br>    <span class="hljs-type">double</span> w, h;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-built_in">Rectangle</span>(<span class="hljs-type">double</span> w, <span class="hljs-type">double</span> h) : w&#123;w&#125;, h&#123;h&#125; &#123;&#125;<br>    <span class="hljs-function"><span class="hljs-type">double</span> <span class="hljs-title">area</span><span class="hljs-params">()</span> <span class="hljs-type">const</span> <span class="hljs-keyword">override</span> </span>&#123; <span class="hljs-keyword">return</span> w * h; &#125;<br>&#125;;<br></code></pre></td></tr></table></figure><p><strong>åŠ¨æ€å¤šæ€ä½¿ç”¨ï¼š</strong></p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs cpp">std::vector&lt;Shape*&gt; shapes;<br>shapes.<span class="hljs-built_in">push_back</span>(<span class="hljs-keyword">new</span> Circle&#123;<span class="hljs-number">2.0</span>&#125;);<br>shapes.<span class="hljs-built_in">push_back</span>(<span class="hljs-keyword">new</span> Rectangle&#123;<span class="hljs-number">3.0</span>, <span class="hljs-number">4.0</span>&#125;);<br><br><span class="hljs-keyword">for</span> (Shape* s : shapes) &#123;<br>    std::cout &lt;&lt; s-&gt;<span class="hljs-built_in">area</span>() &lt;&lt; <span class="hljs-string">&quot;\n&quot;</span>;  <span class="hljs-comment">// è‡ªåŠ¨è°ƒç”¨ Circle::area æˆ– Rectangle::area</span><br>&#125;<br></code></pre></td></tr></table></figure><div class="note note-success">            <p>âš ï¸ <strong>é’»çŸ³é—®é¢˜ä¸è™šç»§æ‰¿ï¼š</strong><br>å¤šé‡ç»§æ‰¿å¯èƒ½å¯¼è‡´åŸºç±»é‡å¤å®ä¾‹åŒ–ï¼ˆå¦‚ <code>D</code> å«ä¸¤ä»½ <code>A</code>ï¼‰ã€‚<br><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼š<code>class B : virtual public A</code> + <code>class C : virtual public A</code> â†’ <code>D</code> ä»…æŒæœ‰ä¸€ä»½ <code>A</code>ã€‚</p>           </div><p><img src="/../images/cs106l-10.png"></p><details close><summary>Inheritance without virtual</summary><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">A</span> &#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-built_in">A</span>() &#123; std::cout &lt;&lt; <span class="hljs-string">&quot;A() @ &quot;</span> &lt;&lt; <span class="hljs-keyword">this</span> &lt;&lt; <span class="hljs-string">&quot;\n&quot;</span>; &#125;<br>    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">hello</span><span class="hljs-params">()</span> </span>&#123; std::cout &lt;&lt; <span class="hljs-string">&quot;Hello from A @ &quot;</span> &lt;&lt; <span class="hljs-keyword">this</span> &lt;&lt; <span class="hljs-string">&quot;\n&quot;</span>; &#125;<br>&#125;;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">B</span> : <span class="hljs-keyword">public</span> A &#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-built_in">B</span>() &#123; std::cout &lt;&lt; <span class="hljs-string">&quot;B() @ &quot;</span> &lt;&lt; <span class="hljs-keyword">this</span> &lt;&lt; <span class="hljs-string">&quot;\n&quot;</span>; &#125;<br>&#125;;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">C</span> : <span class="hljs-keyword">public</span> A &#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-built_in">C</span>() &#123; std::cout &lt;&lt; <span class="hljs-string">&quot;C() @ &quot;</span> &lt;&lt; <span class="hljs-keyword">this</span> &lt;&lt; <span class="hljs-string">&quot;\n&quot;</span>; &#125;<br>&#125;;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">D</span> : <span class="hljs-keyword">public</span> B, <span class="hljs-keyword">public</span> C &#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-built_in">D</span>() &#123; std::cout &lt;&lt; <span class="hljs-string">&quot;D() @ &quot;</span> &lt;&lt; <span class="hljs-keyword">this</span> &lt;&lt; <span class="hljs-string">&quot;\n&quot;</span>; &#125;<br>&#125;;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br>    std::cout &lt;&lt; <span class="hljs-string">&quot;=== Diamond Problem (no virtual) ===\n&quot;</span>;<br>    D d;<br><br>    std::cout &lt;&lt; <span class="hljs-string">&quot;\nCalling explicitly:\n&quot;</span>;<br>    d.B::<span class="hljs-built_in">hello</span>();   <span class="hljs-comment">// ä½¿ç”¨ B è·¯å¾„çš„ A</span><br>    d.C::<span class="hljs-built_in">hello</span>();   <span class="hljs-comment">// ä½¿ç”¨ C è·¯å¾„çš„ A</span><br><br>    std::cout &lt;&lt; <span class="hljs-string">&quot;\nAddress check:\n&quot;</span>;<br>    A* a_via_b = <span class="hljs-built_in">static_cast</span>&lt;B*&gt;(&amp;d);<br>    A* a_via_c = <span class="hljs-built_in">static_cast</span>&lt;C*&gt;(&amp;d);<br>    std::cout &lt;&lt; <span class="hljs-string">&quot;A via B: &quot;</span> &lt;&lt; a_via_b &lt;&lt; <span class="hljs-string">&quot;\n&quot;</span>;<br>    std::cout &lt;&lt; <span class="hljs-string">&quot;A via C: &quot;</span> &lt;&lt; a_via_c &lt;&lt; <span class="hljs-string">&quot;\n&quot;</span>;<br>    std::cout &lt;&lt; <span class="hljs-string">&quot;Same? &quot;</span> &lt;&lt; std::boolalpha &lt;&lt; (a_via_b == a_via_c) &lt;&lt; <span class="hljs-string">&quot;\n&quot;</span>;<br><br>    <span class="hljs-comment">// d.hello();  // âŒ ç¼–è¯‘é”™è¯¯ï¼šambiguous</span><br>&#125;<br><br></code></pre></td></tr></table></figure><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs csharp">=== <span class="hljs-function">Diamond <span class="hljs-title">Problem</span> (<span class="hljs-params">no <span class="hljs-keyword">virtual</span></span>)</span> ===<br>A() @ <span class="hljs-number">0x7ffff605c38e</span>   <span class="hljs-comment">// â† æ„é€  B æ—¶ï¼Œå…ˆæ„é€ å…¶åŸºç±» Aï¼ˆç¬¬ä¸€ä»½ A å­å¯¹è±¡ï¼‰</span><br>B() @ <span class="hljs-number">0x7ffff605c38e</span>   <span class="hljs-comment">// â† B çš„èµ·å§‹åœ°å€ = å…¶ A å­å¯¹è±¡åœ°å€ï¼ˆæ— è™šç»§æ‰¿æ—¶åŸºç±»å‰ç½®ï¼‰</span><br>A() @ <span class="hljs-number">0x7ffff605c38f</span>   <span class="hljs-comment">// â† æ„é€  C æ—¶ï¼Œå†æ„é€ å…¶åŸºç±» Aï¼ˆç¬¬äºŒä»½ A å­å¯¹è±¡ï¼Œåœ°å€ä¸åŒï¼ï¼‰</span><br>C() @ <span class="hljs-number">0x7ffff605c38f</span>   <span class="hljs-comment">// â† C çš„èµ·å§‹åœ°å€ = å…¶ A å­å¯¹è±¡åœ°å€</span><br>D() @ <span class="hljs-number">0x7ffff605c38e</span>   <span class="hljs-comment">// â† D çš„èµ·å§‹åœ°å€ = é¦–ä¸ªåŸºç±» B çš„èµ·å§‹åœ°å€ï¼ˆå³ç¬¬ä¸€ä»½ Aï¼‰</span><br><br>Calling explicitly:<br>Hello <span class="hljs-keyword">from</span> A @ <span class="hljs-number">0x7ffff605c38e</span>   <span class="hljs-comment">// â† d.B::hello() â†’ è°ƒç”¨ B ä¸­åµŒå¥—çš„ A çš„æ–¹æ³•</span><br>Hello <span class="hljs-keyword">from</span> A @ <span class="hljs-number">0x7ffff605c38f</span>   <span class="hljs-comment">// â† d.C::hello() â†’ è°ƒç”¨ C ä¸­åµŒå¥—çš„ A çš„æ–¹æ³•</span><br><br>Address check:<br>A via B: <span class="hljs-number">0x7ffff605c38e</span>   <span class="hljs-comment">// â† static_cast&lt;B*&gt;(&amp;d) â†’ A*</span><br>A via C: <span class="hljs-number">0x7ffff605c38f</span>   <span class="hljs-comment">// â† static_cast&lt;C*&gt;(&amp;d) â†’ A*</span><br>Same? <span class="hljs-literal">false</span>               <span class="hljs-comment">// â† ä¸¤ä¸ª A å®ä¾‹ â‰  åŒä¸€å¯¹è±¡</span><br></code></pre></td></tr></table></figure></details><details close><summary>Inheritance with virtual</summary><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">A</span> &#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-built_in">A</span>() &#123; std::cout &lt;&lt; <span class="hljs-string">&quot;A() @ &quot;</span> &lt;&lt; <span class="hljs-keyword">this</span> &lt;&lt; <span class="hljs-string">&quot;\n&quot;</span>; &#125;<br>    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">hello</span><span class="hljs-params">()</span> </span>&#123; std::cout &lt;&lt; <span class="hljs-string">&quot;Hello from A @ &quot;</span> &lt;&lt; <span class="hljs-keyword">this</span> &lt;&lt; <span class="hljs-string">&quot;\n&quot;</span>; &#125;<br>&#125;;<br><br><span class="hljs-comment">// âœ… å…³é”®ä¿®å¤ï¼švirtual public A</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">B</span> : <span class="hljs-keyword">virtual</span> <span class="hljs-keyword">public</span> A &#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-built_in">B</span>() &#123; std::cout &lt;&lt; <span class="hljs-string">&quot;B() @ &quot;</span> &lt;&lt; <span class="hljs-keyword">this</span> &lt;&lt; <span class="hljs-string">&quot;\n&quot;</span>; &#125;<br>&#125;;<br><br><span class="hljs-comment">// âœ… å…³é”®ä¿®å¤ï¼švirtual public A</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">C</span> : <span class="hljs-keyword">virtual</span> <span class="hljs-keyword">public</span> A &#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-built_in">C</span>() &#123; std::cout &lt;&lt; <span class="hljs-string">&quot;C() @ &quot;</span> &lt;&lt; <span class="hljs-keyword">this</span> &lt;&lt; <span class="hljs-string">&quot;\n&quot;</span>; &#125;<br>&#125;;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">D</span> : <span class="hljs-keyword">public</span> B, <span class="hljs-keyword">public</span> C &#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-built_in">D</span>() &#123; std::cout &lt;&lt; <span class="hljs-string">&quot;D() @ &quot;</span> &lt;&lt; <span class="hljs-keyword">this</span> &lt;&lt; <span class="hljs-string">&quot;\n&quot;</span>; &#125;<br>&#125;;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br>    std::cout &lt;&lt; <span class="hljs-string">&quot;=== Fixed Diamond (with virtual) ===\n&quot;</span>;<br>    D d;<br><br>    std::cout &lt;&lt; <span class="hljs-string">&quot;\nCalling:\n&quot;</span>;<br>    d.B::<span class="hljs-built_in">hello</span>();   <span class="hljs-comment">// æ˜ç¡®è·¯å¾„ï¼ˆå¯çœç•¥ï¼‰</span><br>    d.C::<span class="hljs-built_in">hello</span>();   <span class="hljs-comment">// æ˜ç¡®è·¯å¾„ï¼ˆå¯çœç•¥ï¼‰</span><br>    d.<span class="hljs-built_in">hello</span>();      <span class="hljs-comment">// âœ… ä¸å†äºŒä¹‰ï¼ç›´æ¥è°ƒç”¨å”¯ä¸€ A::hello()</span><br><br>    std::cout &lt;&lt; <span class="hljs-string">&quot;\nAddress check:\n&quot;</span>;<br>    A* a_via_b = <span class="hljs-built_in">static_cast</span>&lt;B*&gt;(&amp;d);<br>    A* a_via_c = <span class="hljs-built_in">static_cast</span>&lt;C*&gt;(&amp;d);<br>    A* a_direct = &amp;d;  <span class="hljs-comment">// D* â†’ A* éšå¼è½¬æ¢ä¹Ÿå…è®¸ï¼ˆå› å”¯ä¸€ A å­å¯¹è±¡ï¼‰</span><br>    std::cout &lt;&lt; <span class="hljs-string">&quot;A via B:   &quot;</span> &lt;&lt; a_via_b   &lt;&lt; <span class="hljs-string">&quot;\n&quot;</span>;<br>    std::cout &lt;&lt; <span class="hljs-string">&quot;A via C:   &quot;</span> &lt;&lt; a_via_c   &lt;&lt; <span class="hljs-string">&quot;\n&quot;</span>;<br>    std::cout &lt;&lt; <span class="hljs-string">&quot;A direct:  &quot;</span> &lt;&lt; a_direct  &lt;&lt; <span class="hljs-string">&quot;\n&quot;</span>;<br>    std::cout &lt;&lt; <span class="hljs-string">&quot;All same? &quot;</span> &lt;&lt; std::boolalpha<br>              &lt;&lt; (a_via_b == a_via_c &amp;&amp; a_via_c == a_direct) &lt;&lt; <span class="hljs-string">&quot;\n&quot;</span>;<br>&#125;<br></code></pre></td></tr></table></figure><figure class="highlight dns"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs dns">=== Fixed Diamond (with virtual) ===<br><span class="hljs-keyword">A</span>() @ <span class="hljs-number">0</span>x7ffd<span class="hljs-number">12345680</span>   â† åªæ„é€ ä¸€æ¬¡ï¼<br>B() @ <span class="hljs-number">0</span>x7ffd<span class="hljs-number">12345688</span><br>C() @ <span class="hljs-number">0</span>x7ffd<span class="hljs-number">12345690</span><br>D() @ <span class="hljs-number">0</span>x7ffd<span class="hljs-number">12345688</span><br><br>Calling:<br>Hello from <span class="hljs-keyword">A</span> @ <span class="hljs-number">0</span>x7ffd<span class="hljs-number">12345680</span><br>Hello from <span class="hljs-keyword">A</span> @ <span class="hljs-number">0</span>x7ffd<span class="hljs-number">12345680</span><br>Hello from <span class="hljs-keyword">A</span> @ <span class="hljs-number">0</span>x7ffd<span class="hljs-number">12345680</span>   â† åŒä¸€åœ°å€ï¼Œä¸‰è¿ï¼<br><br>Address check:<br><span class="hljs-keyword">A</span> via B:   <span class="hljs-number">0</span>x7ffd<span class="hljs-number">12345680</span><br><span class="hljs-keyword">A</span> via C:   <span class="hljs-number">0</span>x7ffd<span class="hljs-number">12345680</span><br><span class="hljs-keyword">A</span> direct:  <span class="hljs-number">0</span>x7ffd<span class="hljs-number">12345680</span><br>All same? true<br></code></pre></td></tr></table></figure></details>---]]></content>
    
    
    <categories>
      
      <category>CS106L</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>CS106L-01</title>
    <link href="/2025/11/09/CS106L-01/"/>
    <url>/2025/11/09/CS106L-01/</url>
    
    <content type="html"><![CDATA[<h2 id="ç¬¬2è®²ï¼šç±»å‹å’Œç»“æ„ä½“"><a href="#ç¬¬2è®²ï¼šç±»å‹å’Œç»“æ„ä½“" class="headerlink" title="ç¬¬2è®²ï¼šç±»å‹å’Œç»“æ„ä½“"></a>ç¬¬2è®²ï¼šç±»å‹å’Œç»“æ„ä½“</h2><h3 id="ç¼–è¯‘-vs-è§£é‡Š"><a href="#ç¼–è¯‘-vs-è§£é‡Š" class="headerlink" title="ç¼–è¯‘ vs è§£é‡Š"></a>ç¼–è¯‘ vs è§£é‡Š</h3><p><strong>C++ æ˜¯ç¼–è¯‘å‹è¯­è¨€ï¼š</strong></p><ul><li>ç¼–è¯‘æ—¶ï¼šç¼–è¯‘å™¨æ‰«æå…¨éƒ¨ä»£ç ï¼Œæ£€æŸ¥é”™è¯¯</li><li>è¿è¡Œæ—¶ï¼šæ‰§è¡Œå·²ç¼–è¯‘çš„ç¨‹åº</li></ul><p><img src="/../images/cs106l-02.png"></p><p><strong>å¯¹æ¯” Pythonï¼ˆè§£é‡Šå‹ï¼‰ï¼š</strong></p><ul><li>è¿è¡Œæ—¶é€è¡Œè§£é‡Šå’Œæ‰§è¡Œ</li><li>é”™è¯¯åœ¨ä»£ç æ‰§è¡Œåˆ°é‚£è¡Œæ—¶æ‰å‘ç°</li></ul><p><img src="/../images/cs106l-00.png"> </p><p><strong>å…³é”®å·®å¼‚ï¼š</strong> C++ èƒ½åœ¨ä½ è¿è¡Œä»£ç å‰å°±æ•æ‰å¾ˆå¤šé”™è¯¯ï¼</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-comment">// âŒ C++ ç¼–è¯‘æŠ¥é”™ï¼ˆç±»å‹ä¸åŒ¹é…ï¼‰</span><br>std::string hello = <span class="hljs-string">&quot;Hello &quot;</span>;<br>std::string world = <span class="hljs-string">&quot;World!&quot;</span>;<br>std::cout &lt;&lt; hello * world &lt;&lt; std::endl;  <span class="hljs-comment">// å­—ç¬¦ä¸²ä¸èƒ½ç›¸ä¹˜</span><br></code></pre></td></tr></table></figure><h3 id="é™æ€ç±»å‹ç³»ç»Ÿ"><a href="#é™æ€ç±»å‹ç³»ç»Ÿ" class="headerlink" title="é™æ€ç±»å‹ç³»ç»Ÿ"></a>é™æ€ç±»å‹ç³»ç»Ÿ</h3><p>C++ æ˜¯<strong>é™æ€ç±»å‹è¯­è¨€</strong>â€”â€”æ¯ä¸ªå˜é‡å¿…é¡»å£°æ˜ç±»å‹ï¼Œå£°æ˜åä¸èƒ½æ›´æ”¹ã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-type">int</span> x = <span class="hljs-number">5</span>;<br>x = <span class="hljs-string">&quot;hello&quot;</span>;  <span class="hljs-comment">// âŒ ç¼–è¯‘é”™è¯¯</span><br><br>std::string s = <span class="hljs-string">&quot;hello&quot;</span>;<br>s = <span class="hljs-number">123</span>;  <span class="hljs-comment">// âŒ ç¼–è¯‘é”™è¯¯</span><br></code></pre></td></tr></table></figure><p><strong>ä¸ºä»€ä¹ˆè¦é™æ€ç±»å‹ï¼Ÿ</strong></p><ul><li>æ•ˆç‡æ›´é«˜ï¼ˆç¼–è¯‘å™¨èƒ½ä¼˜åŒ–ï¼‰</li><li>ä»£ç æ›´æ¸…æ™°ã€æ˜“ç†è§£</li><li>é”™è¯¯æ›´å®¹æ˜“å‘ç°ï¼ˆç¼–è¯‘æ—¶è€Œéè¿è¡Œæ—¶ï¼‰</li></ul><h3 id="ç»“æ„ä½“ï¼šæ‰“åŒ…å¤šä¸ªæ•°æ®"><a href="#ç»“æ„ä½“ï¼šæ‰“åŒ…å¤šä¸ªæ•°æ®" class="headerlink" title="ç»“æ„ä½“ï¼šæ‰“åŒ…å¤šä¸ªæ•°æ®"></a>ç»“æ„ä½“ï¼šæ‰“åŒ…å¤šä¸ªæ•°æ®</h3><p>ç»“æ„ä½“è®©ä½ æŠŠç›¸å…³çš„å˜é‡ç»„ç»‡åœ¨ä¸€èµ·ã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-keyword">struct</span> <span class="hljs-title class_">Student</span> &#123;<br>    std::string name;<br>    std::string id;<br>    <span class="hljs-type">int</span> year;<br>&#125;;<br><br>Student ryan = &#123;<span class="hljs-string">&quot;Ryan&quot;</span>, <span class="hljs-string">&quot;123456&quot;</span>, <span class="hljs-number">2</span>&#125;;<br>std::cout &lt;&lt; ryan.name &lt;&lt; std::endl;  <span class="hljs-comment">// &quot;Ryan&quot;</span><br></code></pre></td></tr></table></figure><h3 id="ä¾¿æ·å·¥å…·"><a href="#ä¾¿æ·å·¥å…·" class="headerlink" title="ä¾¿æ·å·¥å…·"></a>ä¾¿æ·å·¥å…·</h3><p><strong><code>std::pair</code>ï¼šä¸¤ä¸ªå…ƒç´ çš„é€šç”¨ç»“æ„ä½“</strong></p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs cpp">std::pair&lt;std::string, <span class="hljs-type">int</span>&gt; order = &#123;<span class="hljs-string">&quot;Eggs&quot;</span>, <span class="hljs-number">12</span>&#125;;<br>std::cout &lt;&lt; order.first;   <span class="hljs-comment">// &quot;Eggs&quot;</span><br>std::cout &lt;&lt; order.second;  <span class="hljs-comment">// 12</span><br></code></pre></td></tr></table></figure><p><strong><code>using</code> å…³é”®å­—ï¼šåˆ›å»ºç±»å‹åˆ«å</strong></p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-keyword">using</span> Point = std::pair&lt;<span class="hljs-type">double</span>, <span class="hljs-type">double</span>&gt;;<br>Point p = &#123;<span class="hljs-number">1.0</span>, <span class="hljs-number">2.0</span>&#125;;  <span class="hljs-comment">// æ¯”å†™ std::pair æ¸…æ¥šå¤šäº†</span><br></code></pre></td></tr></table></figure><p><strong><code>auto</code> å…³é”®å­—ï¼šè®©ç¼–è¯‘å™¨æ¨æ–­ç±»å‹</strong></p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-keyword">auto</span> result = <span class="hljs-built_in">complexFunction</span>();  <span class="hljs-comment">// ç¼–è¯‘å™¨è‡ªåŠ¨å¡«å…¥ç±»å‹</span><br><span class="hljs-comment">// ä»ç„¶æ˜¯é™æ€ç±»å‹ï¼åªæ˜¯ä½ ä¸ç”¨æ‰‹å·¥å†™</span><br></code></pre></td></tr></table></figure><hr><h2 id="ç¬¬3è®²ï¼šåˆå§‹åŒ–å’Œå¼•ç”¨"><a href="#ç¬¬3è®²ï¼šåˆå§‹åŒ–å’Œå¼•ç”¨" class="headerlink" title="ç¬¬3è®²ï¼šåˆå§‹åŒ–å’Œå¼•ç”¨"></a>ç¬¬3è®²ï¼šåˆå§‹åŒ–å’Œå¼•ç”¨</h2><h3 id="åˆå§‹åŒ–æ–¹å¼"><a href="#åˆå§‹åŒ–æ–¹å¼" class="headerlink" title="åˆå§‹åŒ–æ–¹å¼"></a>åˆå§‹åŒ–æ–¹å¼</h3><p><strong>ç›´æ¥åˆå§‹åŒ–ï¼ˆDirect Initï¼‰ï¼š</strong> </p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-type">int</span> x = <span class="hljs-number">5</span>;<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">y</span><span class="hljs-params">(<span class="hljs-number">5</span>)</span></span>;<br></code></pre></td></tr></table></figure><p><strong>é—®é¢˜ï¼š</strong> è¿™äº›æ–¹å¼å…è®¸â€ç¼©å°è½¬æ¢â€ï¼ˆnarrowing conversionï¼‰</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-type">int</span> x = <span class="hljs-number">100.8</span>;  <span class="hljs-comment">// 100.8 è¢«é™é»˜æˆªæ–­ä¸º 100 âš ï¸</span><br></code></pre></td></tr></table></figure><p><strong>ç»Ÿä¸€åˆå§‹åŒ–ï¼ˆUniform Initï¼‰ï¼š</strong> âœ¨ æ¨èï¼</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-type">int</span> x&#123;<span class="hljs-number">100</span>&#125;;      <span class="hljs-comment">// âœ“</span><br><span class="hljs-type">int</span> y&#123;<span class="hljs-number">100.8</span>&#125;;    <span class="hljs-comment">// âŒ ç¼–è¯‘é”™è¯¯ï¼æ‹’ç»ç¼©å°è½¬æ¢</span><br><br>std::vector&lt;<span class="hljs-type">int</span>&gt; vec&#123;<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>&#125;;      <span class="hljs-comment">// é€‚ç”¨æ‰€æœ‰ç±»å‹</span><br>std::map&lt;std::string, <span class="hljs-type">int</span>&gt; m&#123;&#123;<span class="hljs-string">&quot;a&quot;</span>, <span class="hljs-number">1</span>&#125;, &#123;<span class="hljs-string">&quot;b&quot;</span>, <span class="hljs-number">2</span>&#125;&#125;;<br></code></pre></td></tr></table></figure><h3 id="ç»“æ„åŒ–ç»‘å®šï¼ˆC-17ï¼‰"><a href="#ç»“æ„åŒ–ç»‘å®šï¼ˆC-17ï¼‰" class="headerlink" title="ç»“æ„åŒ–ç»‘å®šï¼ˆC++17ï¼‰"></a>ç»“æ„åŒ–ç»‘å®šï¼ˆC++17ï¼‰</h3><p>å¿«é€Ÿä»å‡½æ•°è¿”å›å¤šä¸ªå€¼ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-function">std::tuple&lt;std::string, std::string, <span class="hljs-type">int</span>&gt; <span class="hljs-title">getInfo</span><span class="hljs-params">()</span> </span>&#123;<br>    <span class="hljs-keyword">return</span> &#123;<span class="hljs-string">&quot;CS106L&quot;</span>, <span class="hljs-string">&quot;Room 110&quot;</span>, <span class="hljs-number">2025</span>&#125;;<br>&#125;<br><br><span class="hljs-keyword">auto</span> [name, room, year] = <span class="hljs-built_in">getInfo</span>();<br>std::cout &lt;&lt; name &lt;&lt; <span class="hljs-string">&quot; meets in &quot;</span> &lt;&lt; room &lt;&lt; std::endl;<br></code></pre></td></tr></table></figure><h3 id="å¼•ç”¨ï¼šå˜é‡çš„åˆ«å"><a href="#å¼•ç”¨ï¼šå˜é‡çš„åˆ«å" class="headerlink" title="å¼•ç”¨ï¼šå˜é‡çš„åˆ«å"></a>å¼•ç”¨ï¼šå˜é‡çš„åˆ«å</h3><p><strong>å¼•ç”¨ (<code>&amp;</code>)</strong> è®©å¦ä¸€ä¸ªå˜é‡åæŒ‡å‘åŒä¸€å—å†…å­˜ã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-type">int</span> x = <span class="hljs-number">5</span>;<br><span class="hljs-type">int</span>&amp; ref = x;      <span class="hljs-comment">// ref æ˜¯ x çš„åˆ«å</span><br><br>ref = <span class="hljs-number">10</span>;<br>std::cout &lt;&lt; x;    <span class="hljs-comment">// è¾“å‡º 10ï¼ˆé€šè¿‡ ref ä¿®æ”¹äº† xï¼‰</span><br></code></pre></td></tr></table></figure><p><img src="/../images/cs106l-01.png"></p><p><strong>æŒ‰å¼•ç”¨ä¼ é€’å‡½æ•°å‚æ•°ï¼š</strong></p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">increment</span><span class="hljs-params">(<span class="hljs-type">int</span>&amp; n)</span> </span>&#123;<br>    n++;<br>&#125;<br><br><span class="hljs-type">int</span> x = <span class="hljs-number">5</span>;<br><span class="hljs-built_in">increment</span>(x);<br>std::cout &lt;&lt; x;    <span class="hljs-comment">// è¾“å‡º 6</span><br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">shift</span><span class="hljs-params">(std::vector&lt;std::pair&lt;<span class="hljs-type">int</span>, <span class="hljs-type">int</span>&gt;&gt; &amp;nums)</span> </span>&#123;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">auto</span>&amp; [num1, num2] : nums) &#123; <span class="hljs-comment">// æ³¨æ„è¿™é‡Œä¹Ÿéœ€å¼•ç”¨</span><br>        num1++;<br>        num2++;<br>&#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>å¦‚æœæ˜¯ pass by value å°±ä¸ä¼šæ›´æ”¹å‚æ•°æ•°å€¼</p><div class="group-image-container"><div class="group-image-row"><div class="group-image-wrap"><img src="/../images/cs106l-03.png"></div><div class="group-image-wrap"><img src="/../images/cs106l-04.png"></div></div></div><h3 id="Lå€¼-vs-Rå€¼"><a href="#Lå€¼-vs-Rå€¼" class="headerlink" title="Lå€¼ vs Rå€¼"></a>Lå€¼ vs Rå€¼</h3><ul><li><strong>Lå€¼</strong>ï¼šæœ‰å†…å­˜åœ°å€çš„ä¸œè¥¿ï¼ˆå˜é‡ï¼‰- é€šå¸¸åœ¨ <code>=</code> å·¦è¾¹</li><li><strong>Rå€¼</strong>ï¼šä¸´æ—¶å€¼ï¼Œæ²¡æœ‰å›ºå®šåœ°å€ - é€šå¸¸åœ¨ <code>=</code> å³è¾¹</li></ul><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-type">int</span> x = <span class="hljs-number">5</span>;      <span class="hljs-comment">// x æ˜¯ Lå€¼ï¼Œ5 æ˜¯ Rå€¼</span><br><span class="hljs-type">int</span> y = x + <span class="hljs-number">3</span>;  <span class="hljs-comment">// x+3 æ˜¯ Rå€¼ï¼ˆä¸´æ—¶è®¡ç®—ç»“æœï¼‰</span><br></code></pre></td></tr></table></figure><p><strong>å…³é”®è§„åˆ™ï¼š</strong> ä¸èƒ½ç»‘å®šéå¸¸é‡å¼•ç”¨åˆ° Rå€¼</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">foo</span><span class="hljs-params">(<span class="hljs-type">int</span>&amp; x)</span> </span>&#123; &#125;<br><br><span class="hljs-built_in">foo</span>(<span class="hljs-number">5</span>);      <span class="hljs-comment">// âŒ é”™è¯¯ï¼5 æ˜¯ Rå€¼</span><br><span class="hljs-type">int</span> y = <span class="hljs-number">5</span>;<br><span class="hljs-built_in">foo</span>(y);      <span class="hljs-comment">// âœ“ æ­£ç¡®ï¼y æ˜¯ Lå€¼</span><br></code></pre></td></tr></table></figure><h3 id="const-ä¿®é¥°ç¬¦"><a href="#const-ä¿®é¥°ç¬¦" class="headerlink" title="const ä¿®é¥°ç¬¦"></a><code>const</code> ä¿®é¥°ç¬¦</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-type">const</span> <span class="hljs-type">int</span> x = <span class="hljs-number">5</span>;<br>x = <span class="hljs-number">10</span>;  <span class="hljs-comment">// âŒ ç¼–è¯‘é”™è¯¯</span><br><br>std::vector&lt;<span class="hljs-type">int</span>&gt; vec&#123;<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>&#125;;<br><span class="hljs-type">const</span> std::vector&lt;<span class="hljs-type">int</span>&gt;&amp; ref = vec;  <span class="hljs-comment">// const å¼•ç”¨</span><br>ref.<span class="hljs-built_in">push_back</span>(<span class="hljs-number">4</span>);  <span class="hljs-comment">// âŒ ä¸èƒ½é€šè¿‡ const å¼•ç”¨ä¿®æ”¹</span><br></code></pre></td></tr></table></figure><p><strong>è®°ä½ï¼š</strong> å¯ä»¥æŠŠ const å¼•ç”¨ç»‘å®šåˆ° Lå€¼æˆ– Rå€¼ä¸Š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-type">const</span> <span class="hljs-type">int</span>&amp; ref = <span class="hljs-number">5</span>;  <span class="hljs-comment">// âœ“ å¯ä»¥</span><br></code></pre></td></tr></table></figure><hr><h2 id="ç¬¬4è®²ï¼šæµï¼ˆStreamsï¼‰-ğŸŒŠ"><a href="#ç¬¬4è®²ï¼šæµï¼ˆStreamsï¼‰-ğŸŒŠ" class="headerlink" title="ç¬¬4è®²ï¼šæµï¼ˆStreamsï¼‰ ğŸŒŠ"></a>ç¬¬4è®²ï¼šæµï¼ˆStreamsï¼‰ ğŸŒŠ</h2><p>æµæ˜¯ C++ è¯»å†™æ•°æ®çš„ç»Ÿä¸€æ¥å£ã€‚</p><h3 id="æµæ˜¯ä»€ä¹ˆ"><a href="#æµæ˜¯ä»€ä¹ˆ" class="headerlink" title="æµæ˜¯ä»€ä¹ˆ"></a>æµæ˜¯ä»€ä¹ˆ</h3><p>æµåƒä¸€ä¸ªâ€é€šé“â€ï¼Œåœ¨ä½ çš„ç¨‹åºå’Œå¤–éƒ¨èµ„æºï¼ˆé”®ç›˜ã€å±å¹•ã€æ–‡ä»¶ï¼‰ä¹‹é—´ä¼ è¾“æ•°æ®ã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs cpp">std::cout &lt;&lt; <span class="hljs-string">&quot;Hello&quot;</span>;           <span class="hljs-comment">// è¾“å‡ºæµï¼ˆå†™ï¼‰</span><br>std::cin &gt;&gt; x;                   <span class="hljs-comment">// è¾“å…¥æµï¼ˆè¯»ï¼‰</span><br><span class="hljs-function">std::ifstream <span class="hljs-title">file</span><span class="hljs-params">(<span class="hljs-string">&quot;data.txt&quot;</span>)</span></span>;  <span class="hljs-comment">// æ–‡ä»¶è¾“å…¥æµ</span><br><span class="hljs-function">std::ofstream <span class="hljs-title">out</span><span class="hljs-params">(<span class="hljs-string">&quot;out.txt&quot;</span>)</span></span>;    <span class="hljs-comment">// æ–‡ä»¶è¾“å‡ºæµ</span><br></code></pre></td></tr></table></figure><h3 id="æµçš„ç»§æ‰¿å…³ç³»"><a href="#æµçš„ç»§æ‰¿å…³ç³»" class="headerlink" title="æµçš„ç»§æ‰¿å…³ç³»"></a>æµçš„ç»§æ‰¿å…³ç³»</h3><p><img src="/../images/cs106l-05.png"><br><img src="/../images/cs106l-06.png"></p><h3 id="å­—ç¬¦ä¸²æµï¼šå¤„ç†å­—ç¬¦ä¸²å¦‚åŒæ–‡ä»¶"><a href="#å­—ç¬¦ä¸²æµï¼šå¤„ç†å­—ç¬¦ä¸²å¦‚åŒæ–‡ä»¶" class="headerlink" title="å­—ç¬¦ä¸²æµï¼šå¤„ç†å­—ç¬¦ä¸²å¦‚åŒæ–‡ä»¶"></a>å­—ç¬¦ä¸²æµï¼šå¤„ç†å­—ç¬¦ä¸²å¦‚åŒæ–‡ä»¶</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-function">std::stringstream <span class="hljs-title">ss</span><span class="hljs-params">(<span class="hljs-string">&quot;Bjarne Stroustrup C++ rules&quot;</span>)</span></span>;<br><br>std::string first, last, language;<br>ss &gt;&gt; first &gt;&gt; last &gt;&gt; language;<br><br>std::cout &lt;&lt; first &lt;&lt; <span class="hljs-string">&quot; &quot;</span> &lt;&lt; last &lt;&lt; std::endl;  <span class="hljs-comment">// &quot;Bjarne Stroustrup&quot;</span><br></code></pre></td></tr></table></figure><p><strong>å…³é”®ç‚¹ï¼š</strong> <code>&gt;&gt;</code> åœ¨ç©ºç™½å¤„åœæ­¢</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs cpp">std::string quote = <span class="hljs-string">&quot;Hello World&quot;</span>;<br>ss &gt;&gt; quote;  <span class="hljs-comment">// åªè¯»åˆ° &quot;Hello&quot;</span><br></code></pre></td></tr></table></figure><p><strong>è§£å†³æ–¹æ¡ˆï¼šä½¿ç”¨ <code>getline()</code></strong></p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs cpp">std::string wholeLine;<br>std::<span class="hljs-built_in">getline</span>(ss, wholeLine);  <span class="hljs-comment">// è¯»æ•´è¡Œï¼ˆåˆ°æ¢è¡Œç¬¦ \nï¼‰</span><br></code></pre></td></tr></table></figure><h3 id="è¾“å‡ºæµ"><a href="#è¾“å‡ºæµ" class="headerlink" title="è¾“å‡ºæµ"></a>è¾“å‡ºæµ</h3><p><strong><code>std::cout</code>ï¼š</strong> æ ‡å‡†è¾“å‡º</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cpp">std::cout &lt;&lt; <span class="hljs-string">&quot;Hello&quot;</span> &lt;&lt; <span class="hljs-string">&quot; &quot;</span> &lt;&lt; <span class="hljs-string">&quot;World&quot;</span> &lt;&lt; std::endl;<br></code></pre></td></tr></table></figure><p><strong>ç¼“å†²å’Œåˆ·æ–°ï¼š</strong></p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs cpp">std::cout &lt;&lt; <span class="hljs-string">&quot;buffered&quot;</span>;       <span class="hljs-comment">// è¿˜åœ¨ç¼“å†²</span><br>std::cout &lt;&lt; std::flush;       <span class="hljs-comment">// ç«‹å³è¾“å‡º</span><br>std::cout &lt;&lt; <span class="hljs-string">&quot;line&quot;</span> &lt;&lt; std::endl;  <span class="hljs-comment">// endl = è¾“å‡º + åˆ·æ–°</span><br></code></pre></td></tr></table></figure><p><strong>æ€§èƒ½æç¤ºï¼š</strong> ç”¨ <code>&#39;\n&#39;</code> æ¯” <code>std::endl</code> å¿«ï¼ˆä¸å¼ºåˆ¶åˆ·æ–°ï¼‰</p><h3 id="æ–‡ä»¶æµ"><a href="#æ–‡ä»¶æµ" class="headerlink" title="æ–‡ä»¶æµ"></a>æ–‡ä»¶æµ</h3><p><strong>å†™å…¥æ–‡ä»¶ï¼š</strong></p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-function">std::ofstream <span class="hljs-title">out</span><span class="hljs-params">(<span class="hljs-string">&quot;data.txt&quot;</span>)</span></span>;<br><span class="hljs-keyword">if</span> (out.<span class="hljs-built_in">is_open</span>()) &#123;<br>    out &lt;&lt; <span class="hljs-string">&quot;Hello CS106L!&quot;</span> &lt;&lt; <span class="hljs-string">&#x27;\n&#x27;</span>;<br>    out.<span class="hljs-built_in">close</span>();<br>&#125;<br></code></pre></td></tr></table></figure><p><strong>è¯»å–æ–‡ä»¶ï¼š</strong></p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-function">std::ifstream <span class="hljs-title">in</span><span class="hljs-params">(<span class="hljs-string">&quot;data.txt&quot;</span>)</span></span>;<br><span class="hljs-keyword">if</span> (in.<span class="hljs-built_in">is_open</span>()) &#123;<br>    std::string line;<br>    std::<span class="hljs-built_in">getline</span>(in, line);<br>    std::cout &lt;&lt; line &lt;&lt; std::endl;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="æ ‡å‡†è¾“å…¥"><a href="#æ ‡å‡†è¾“å…¥" class="headerlink" title="æ ‡å‡†è¾“å…¥"></a>æ ‡å‡†è¾“å…¥</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-type">int</span> x;<br>std::cin &gt;&gt; x;  <span class="hljs-comment">// ä»é”®ç›˜è¯»å–ï¼ˆç©ºç™½å¤„åœæ­¢ï¼‰</span><br><br>std::string name;<br>std::<span class="hljs-built_in">getline</span>(std::cin, name);  <span class="hljs-comment">// è¯»æ•´è¡Œ</span><br></code></pre></td></tr></table></figure><p><strong>å¸¸è§é—®é¢˜ï¼šæ··ç”¨ <code>&gt;&gt;</code> å’Œ <code>getline()</code></strong></p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-type">int</span> age;<br>std::string name;<br><br>std::cin &gt;&gt; age;  <span class="hljs-comment">// ä»è¾“å…¥ç¼“å†²è¯»ï¼Œç•™ä¸‹ \n</span><br>std::<span class="hljs-built_in">getline</span>(std::cin, name);  <span class="hljs-comment">// ç«‹å³è¯»åˆ°é‚£ä¸ª \nï¼å¾—åˆ°ç©ºå­—ç¬¦ä¸²</span><br><br><span class="hljs-comment">// è§£å†³æ–¹æ¡ˆï¼š</span><br>std::cin &gt;&gt; age;<br>std::<span class="hljs-built_in">getline</span>(std::cin, name);  <span class="hljs-comment">// æ¶ˆè€—å‰©ä½™çš„ \n</span><br>std::<span class="hljs-built_in">getline</span>(std::cin, name);  <span class="hljs-comment">// ç°åœ¨è¯»çœŸæ­£çš„æ•°æ®</span><br></code></pre></td></tr></table></figure><hr>]]></content>
    
    
    <categories>
      
      <category>CS106L</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>roadmap</title>
    <link href="/2025/10/28/roadmap/"/>
    <url>/2025/10/28/roadmap/</url>
    
    <content type="html"><![CDATA[<h1 id="Fun-stuff"><a href="#Fun-stuff" class="headerlink" title="Fun stuff"></a>Fun stuff</h1><div>            <input type="checkbox"  ><a href="https://docs.nvidia.com/cuda/">Flash Attention from Scratch</a>          </div><hr><h1 id="Tut-stuff"><a href="#Tut-stuff" class="headerlink" title="Tut stuff"></a>Tut stuff</h1><div>            <input type="checkbox"  ><a href="https://web.stanford.edu/class/cs106l/">CS106L</a>          </div><ul><li><div>            <input type="checkbox"  checked="checked">lectures          </div></li><li><div>            <input type="checkbox"  >hws          </div></li></ul><div>            <input type="checkbox"  ><a href="https://stanford-cs336.github.io/spring2025">CS336</a>          </div><ul><li><div>            <input type="checkbox"  >lectures          </div></li><li><div>            <input type="checkbox"  >hws          </div></li></ul><h1 id="Extensive-stuff"><a href="#Extensive-stuff" class="headerlink" title="Extensive stuff"></a>Extensive stuff</h1><hr>]]></content>
    
    
    
  </entry>
  
  
  
  <entry>
    <title>Books 2025</title>
    <link href="/2025/10/14/books-2025/"/>
    <url>/2025/10/14/books-2025/</url>
    
    <content type="html"><![CDATA[<h1 id="æ€æ­»ä¸€åªçŸ¥æ›´é¸Ÿ"><a href="#æ€æ­»ä¸€åªçŸ¥æ›´é¸Ÿ" class="headerlink" title="æ€æ­»ä¸€åªçŸ¥æ›´é¸Ÿ"></a>æ€æ­»ä¸€åªçŸ¥æ›´é¸Ÿ</h1><p>ä¸ºä»€ä¹ˆäººä»¬æ†æ¨å¸Œç‰¹å‹’,å´æ— æ³•ä¸é»‘äººå’Œå¹³å…±å¤„?ä¸€ä¸ªå’Œè°çš„å°é•‡,å´å¼¥æ¼«ç€ç™½äººè‡³ä¸Šä¸»ä¹‰ã€‚ä¹Ÿè®¸æˆ‘ä»¬ç»ˆç©¶åªæ˜¯æƒ…ç»ªçš„å¥´éš¶â€”â€”çœ‹ä¼¼å›¢ç»“ä¸€è‡´,å´æ— æ³•ç‹¬ç«‹æ€è€ƒã€‚äººä»¬çœ‹ä¸åˆ°æ±¤å§†Â·é²å®¾é€Šåªæ˜¯ä¸€ä¸ªä¹äºåŠ©äººçš„é»‘äººé’å¹´,çœ‹ä¸åˆ°é˜¿æå…‹æ–¯åªæ˜¯è¯•å›¾åœ¨æ³•åº­ä¸ŠæŒ‡å‡ºè¿™ä¸ªå…³é”®é—®é¢˜ã€‚æˆ‘ä»¬èƒ½å¦æ”¾ä¸‹æ‰€æœ‰ç«‹åœº,æ”¾å¼ƒæˆ‘ä»¬çš„ä¿¡å¿µ,ä»…ä»äº‹å®å’Œé€»è¾‘å‡ºå‘,ç«™åœ¨ä»–äººçš„è§’åº¦é‡æ–°å®¡è§†æˆ‘ä»¬ä¹‹å‰çš„æ‰€æœ‰åˆ¤æ–­?</p><blockquote><p>â€œä½ æ°¸è¿œä¸ä¼šçœŸæ­£äº†è§£ä¸€ä¸ªäºº,é™¤éä½ ä»ä»–çš„è§’åº¦å»æ€è€ƒé—®é¢˜â€¦â€¦é™¤éä½ é’»è¿›ä»–çš„çš®è‚¤é‡Œ,åƒä»–ä¸€æ ·è¡Œèµ°ã€‚â€</p></blockquote><blockquote><p>â€œæˆ‘æƒ³è®©ä½ çœ‹åˆ°ä»€ä¹ˆæ˜¯çœŸæ­£çš„å‹‡æ°”,è€Œä¸æ˜¯è®¤ä¸ºå‹‡æ°”å°±æ˜¯ä¸€ä¸ªæ‰‹é‡Œæ‹¿ç€æªçš„äººã€‚çœŸæ­£çš„å‹‡æ°”æ˜¯,åœ¨ä½ è¿˜æ²¡å¼€å§‹ä¹‹å‰å°±çŸ¥é“è‡ªå·±ä¼šè¾“,ä½†ä½ ä»ç„¶è¦å¼€å§‹,å¹¶ä¸”æ— è®ºå¦‚ä½•éƒ½è¦åšæŒåˆ°åº•ã€‚â€</p></blockquote><!-- more --><h2 id=""><a href="#" class="headerlink" title=""></a><img src="/../images/to-kill-a-mockingbird.png" alt="To Kill a Mockingbird&#39; : 1962 Movie"></h2><h1 id="ç„¦è™‘çš„äºº"><a href="#ç„¦è™‘çš„äºº" class="headerlink" title="ç„¦è™‘çš„äºº"></a>ç„¦è™‘çš„äºº</h1><p>æˆ‘ä»¬éƒ½è¢«è¿‡å»æ‰€å›°ã€‚å¦‚æœå½“åˆåšäº† aã€bã€c,æˆ‘å¯èƒ½ä¼šåˆ°è¾¾ä¸€ä¸ªæ›´å¥½çš„åœ°æ–¹ã€‚æˆ‘ä»¬åº”è¯¥åšå¥½å­©å­ã€å¥½æœ‹å‹ã€å¥½çˆ¶æ¯ã€å¥½é‚»å±…ã€‚æˆ‘ä»¬æ‰¿è½½ç€ç”Ÿæ´»çš„é‡é‡ â€”â€” å·¥ä½œã€å­¦ä¹ ã€ç¤¾ä¼šã€‚æˆ‘ä»¬å´©æºƒåªæ˜¯æ—¶é—´é—®é¢˜ã€‚</p><blockquote><p>â€œæœ‰äº›äººæ¥å—è‡ªå·±æ°¸è¿œæ— æ³•æ‘†è„±ç„¦è™‘,ä»–ä»¬åªæ˜¯å­¦ä¼šäº†æ‰¿è½½å®ƒã€‚å¥¹è¯•å›¾æˆä¸ºä»–ä»¬ä¸­çš„ä¸€å‘˜ã€‚å¥¹å‘Šè¯‰è‡ªå·±,è¿™å°±æ˜¯ä¸ºä»€ä¹ˆä½ åº”è¯¥å–„å¾…ä»–äºº,å³ä½¿æ˜¯å‚»ç“œ,å› ä¸ºä½ æ°¸è¿œä¸çŸ¥é“ä»–ä»¬çš„è´Ÿæ‹…æœ‰å¤šé‡ã€‚â€</p></blockquote><p>è‡´æ‰€æœ‰ç„¦è™‘çš„äºº:ä¸è¦å®³æ€•,è¿™ä¸æ˜¯ä½ çš„é”™ã€‚</p><h2 id="-1"><a href="#-1" class="headerlink" title=""></a><img src="/../images/anxious-people.png" alt="Anxious People"></h2><h1 id="æœˆäº®ä¸å…­ä¾¿å£«"><a href="#æœˆäº®ä¸å…­ä¾¿å£«" class="headerlink" title="æœˆäº®ä¸å…­ä¾¿å£«"></a>æœˆäº®ä¸å…­ä¾¿å£«</h1><p>ä»–æŠ›å¼ƒäº†å¦»å­å’Œå­©å­,é€ƒåˆ°ä¸€ä¸ªé™Œç”Ÿçš„åœ°æ–¹ç‹¬è‡ªä½œç”»ã€‚æˆ‘ä»¬åº”è¯¥ä»ä¼ ç»Ÿé“å¾·çš„è§’åº¦è°´è´£ä»–,è¿˜æ˜¯åº”è¯¥æ¬£èµä»–çš„è‡ªç”±å’Œä¸ç¾ç²¾ç¥?ä»–å‹¾å¼•äº†æ©äººçš„å¦»å­,æœ€ç»ˆå´æŠ›å¼ƒäº†å¥¹,å¯¼è‡´å¥¹è‡ªæ®‹å¹¶æŠ‘éƒè€Œæ­»ã€‚ç„¶è€Œ,å³ä½¿ä»–çš„æ©äººå‡†å¤‡ç¦»å¼€è¿™ä¸ªä¼¤å¿ƒä¹‹åœ°,ä»–ä¹Ÿæ— æ³•ä¸‹å®šå†³å¿ƒæ¯æ‰è¿™ä¸ªç”·äººçš„ç”»ä½œä»¥ç¤ºæŠ¥å¤ã€‚æˆ‘ä»¬åº”è¯¥å¯¹è¿™ä¸ªè½¯å¼±çš„äººæ„Ÿåˆ°æ„¤æ€’,è¿˜æ˜¯åº”è¯¥è°´è´£è¿™ä¸ªç½ªå­½æ·±é‡çš„äºº?æœ€ç»ˆ,ä»€ä¹ˆæ›´é‡è¦â€”â€”éµå®ˆè§„åˆ™ã€å…»è‚²å­©å­,è¿˜æ˜¯è¿èƒŒå¸¸è§„ã€è‡ªç”±åœ°æ´»åœ¨ä¸–ç•Œä¸Š?</p><blockquote><p>â€œæˆ‘ä¸çŸ¥é“äºšä¼¯æ‹‰ç½•æ˜¯å¦çœŸçš„æ¯äº†è‡ªå·±çš„ç”Ÿæ´»ã€‚åšä½ çƒ­çˆ±çš„äº‹,åœ¨ä½ å–œæ¬¢çš„ç¯å¢ƒä¸­å¹³é™åœ°ç”Ÿæ´»â€”â€”è¿™çœŸçš„ç®—æ¯äº†äººç”Ÿå—?ä¸€å®šè¦æˆä¸ºå¹´è–ªä¸€ä¸‡è‹±é•‘çš„è‘—åå¤–ç§‘åŒ»ç”Ÿ,æ‹¥æœ‰ä¸€ä½ç¾ä¸½çš„å¦»å­,æ‰ç®—æˆåŠŸå—?æˆ‘è®¤ä¸ºæˆåŠŸå–å†³äºä½ å¦‚ä½•çœ‹å¾…ç”Ÿå‘½çš„æ„ä¹‰,ä½ èƒ½ä¸ºç¤¾ä¼šå±¥è¡Œä»€ä¹ˆä¹‰åŠ¡,ä»¥åŠä½ å¯¹è‡ªå·±æœ‰ä»€ä¹ˆè¦æ±‚ã€‚ç„¶è€Œ,æˆ‘ä»ç„¶å›°æƒ‘â€”â€”æˆ‘æ˜¯è°,æˆ‘æœ‰ä»€ä¹ˆèµ„æ ¼ä¸ä¸€ä½éª‘å£«äº‰è®º?â€</p></blockquote><h2 id="-2"><a href="#-2" class="headerlink" title=""></a><img src="/../images/the-moon-and-sixpence.png" alt="The Moon and Sixpence: 1942 Movie"></h2><h1 id="ä½ å½“åƒé¸Ÿé£å¾€ä½ çš„å±±"><a href="#ä½ å½“åƒé¸Ÿé£å¾€ä½ çš„å±±" class="headerlink" title="ä½ å½“åƒé¸Ÿé£å¾€ä½ çš„å±±"></a>ä½ å½“åƒé¸Ÿé£å¾€ä½ çš„å±±</h1><p>ä¸€ä¸ªç‹‚çƒ­è¿·ä¿¡çš„çˆ¶äº²,ä¸€ä¸ªæ²‰é»˜é¡ºä»çš„æ¯äº²,ä¸€ä¸ªæš´åŠ›å±é™©çš„å“¥å“¥,ä¸€ä¸ªèƒŒå›å¥¹çš„å§å§ã€‚æ•™è‚²è®©å¥¹ä¸è¿™ä¸ªå®¶åº­å¯¹ç«‹â€”â€”ä»æ·±é™·å…¶ä¸­,åˆ°æ¸´æœ›æ•™è‚²,åˆ°ç»å†æ€æƒ³è½¬å˜,æœ€ååˆ°å®¶åº­å…³ç³»çš„ç ´è£‚ã€‚å¥¹æ˜¯ç‹‚çƒ­å®—æ•™çŒè¾“çš„å—å®³è€…,ä½†æœ€ç»ˆ,å¥¹ä»¥ä¸å¦¥åçš„æ€åº¦,åŸè°…äº†å¥¹çš„åŸç”Ÿå®¶åº­ã€‚</p><h1 id="è¢«ä¾®è¾±ä¸è¢«æŸå®³çš„"><a href="#è¢«ä¾®è¾±ä¸è¢«æŸå®³çš„" class="headerlink" title="è¢«ä¾®è¾±ä¸è¢«æŸå®³çš„"></a>è¢«ä¾®è¾±ä¸è¢«æŸå®³çš„</h1><p>äººç±»çš„æ‰€æœ‰çš„è¡Œä¸ºï¼Œé€‰æ‹©ï¼Œä¸¾æ­¢ï¼Œéƒ½æ·±åˆ»çš„è¢«è‡ªèº«åº•å±‚çš„æ¬²æœ›æ‰€æŒæ§ï¼Œæ— è®ºæ˜¯å¯æ¶çš„å‰¥å‰Šè€…è¿˜æ˜¯å¯æ€œçš„ç©·äººä»¬ã€‚å‰¥å‰Šè€…å¸¦ç€ä¸€ç§ç©å¼„çš„æ€åº¦ï¼Œéšæ„çš„ä¾®è¾±ä»¥åŠæŸå®³ä»–äººã€‚ç©·äººå¸¦èµ°ä¸€ç§æ‚²å“€çš„ï¼Œç”šè‡³å¯ç¬‘çš„å†³ç»çš„æ€åº¦ï¼Œæ–©æ–­ä¸€åˆ‡ä¸å‰¥å‰Šè€…çš„è”ç³»ï¼Œç”šè‡³äºå¯èƒ½ä¼¤å®³åˆ°è‡ªå·±ï¼Œè™šå¹»çš„æ­£ç›´æ„Ÿæ˜¯ä»–ä»¬å”¯ä¸€çš„é—ç‰©ï¼Œå¯æ‚²åœ°æ´»ç€ã€‚ </p><p><img src="/../images/humiliated-and-insulted.png" alt="äººç‰©å…³ç³»"></p><p>å¨œå¡”èèƒŒå¼ƒäº†è‡ªå·±çš„å®¶äººå»æ‰¾é˜¿å»–æ²™ï¼Œå¸¦ç€ä¸€ç§ç—…æ€çš„æ¯çˆ±å¼çš„çˆ±æƒ…è§‚å¿µï¼šå¯¹äºå¹¼ç¨šæ— è„‘çš„ï¼Œå¸¸å¸¸ç§»æƒ…åˆ«æ‹çš„é˜¿å»–æ²™ï¼Œå¥¹æ·±é™·äºåŸè°…ä»–çš„å¿«æ„Ÿä¸­ã€‚å®¶äººçš„è¯…å’’ï¼Œå…¬çˆµçš„é™·å®³ï¼Œéƒ½è®©å¥¹èº«å¿ƒä¿±ç–²ï¼Œæ„Ÿæƒ…ä¹Ÿæ˜¯æ— ç–¾è€Œç»ˆã€‚</p><p>å¡ä½³ä¹Ÿå¹¶éæ˜æ™ºï¼Œå³ä½¿çŸ¥é“å…¬çˆµçš„è¯¡è®¡ï¼Œå¥¹ä¹Ÿæ— æ³•é€ƒè¿‡è‡ªå·±çš„æ¬²æœ›ã€‚åƒä¸€ä¸ªå­©å­ç‹ï¼Œå¥¹æ·±é™·è®©é˜¿å»–æ²™æ•¬ä»°è‡ªå·±çš„å¿«ä¹ã€‚è¢«å…¬çˆµæ·±æ·±æŒæ§çš„äºŒäººï¼Œæœªæ¥æš—æ·¡ã€‚</p><p>ä¸‰äººå¤æ‚çš„å…³ç³»æ‰¿è½½äº†å…¨æ–‡80%çš„ç—›è‹¦ã€‚çˆ¶äº²å°¼å¤æ‹‰æœ¬æ˜¯å…¬çˆµçš„æ•¬ä»°è€…ï¼Œä½†æ— éæ˜¯è¢«å‰¥å‰Šè€…çš„ä¸€å¢æƒ…æ„¿ã€‚è¢«è¯¬é™·ä»¥åŠä¾®è¾±åï¼Œä»–æ·±é™·å¯¹å…¬çˆµçš„ä»‡æ¨ï¼Œç”šè‡³è½¬å«åˆ°å¯¹è‡ªå·±å¥³å„¿èº«ä¸Šã€‚çˆ±ç€å¥¹ï¼ŒåŒæ—¶æ†æ¨è€…å¥¹ã€‚</p><p>ä¸€åˆ‡çœ‹ä¼¼ä»¥å¨œå¡”èå›å®¶ç»“æŸï¼Œå†…è‰çš„æ­»å°†æ‰€æœ‰çš„ç—›è‹¦åœ¨æœ€åä¸€åˆ»é‡Šæ”¾ã€‚æ‚²æƒ¨çš„å­¤å¥³ï¼Œä»å‡ºç”Ÿå‰è¢«å…¬çˆµæŠ›å¼ƒï¼Œæ¯å¥³åœ¨å¤§è¡—è‰°éš¾ç»´ç”Ÿï¼Œå¤–å…¬å¯¹ä¸€åˆ‡ä¹Ÿæ˜¯ç—›æ¨ä¸‡åˆ†ï¼ˆç±»æ¯”å°¼å¤æ‹‰ï¼‰ã€‚æ¯äº²å‘Šè¯«è¦å½“ä¸€è¾ˆå­çš„ç©·äººï¼Œæ‹’ç»ä¸€åˆ‡ï¼Œåªèƒ½æ‰“å·¥æˆ–è€…ä¹è®¨ã€‚æ¯äº²æ­»åè¢«æˆ‘æ‰€æ•‘ã€‚æ¥è‡ªä»–äººçš„çˆ±è®©å†…è‰ä¸è§£ï¼Œå¥¹èµ·åˆç—›è‹¦çš„æ‹’ç»ä¸€åˆ‡ï¼Œæœ€åè¢«æˆ‘å’Œä¸¤ä½è€äººçš„å…³å¿ƒæ„ŸåŒ–ã€‚æœ€ç»ˆåœ¨æ‰€æœ‰äººçš„åŒ…å›´ä¸­ï¼Œå› ç—…å»ä¸–ã€‚</p><blockquote><p>â€œä¸‡å°¼äºšï¼Œä½ å«ä»–ä»¬è¿›æ¥å§ï¼Œâ€å¥¹ç»ˆäºæœ‰æ°”æ— åŠ›åœ°è¯´é“ï¼Œâ€œæˆ‘è¦è·Ÿä»–ä»¬å¤§å®¶å‘Šåˆ«ã€‚æ°¸åˆ«äº†ï¼Œä¸‡å°¼äºšï¼â€¦â€¦â€ å¥¹æœ€åä¸€æ¬¡ç´§ç´§åœ°ã€ç´§ç´§åœ°æ‹¥æŠ±äº†æˆ‘ã€‚æˆ‘ä»¬çš„äººéƒ½è¿›æ¥äº†ã€‚è€çˆ·å­æ²¡æ³•æ˜ç™½ï¼Œå¥¹æ€ä¹ˆå°±è¦æ­»äº†å‘¢ï¼›ä»–ä¸å®¹è®¸æœ‰è¿™æ ·çš„æƒ³æ³•ã€‚ä»–ç›´åˆ°æœ€åä¸€åˆ»éƒ½è·Ÿæˆ‘ä»¬å¤§å®¶äº‰è®ºï¼Œç¡¬è¯´å¥¹çš„ç—…ä¸€å®šä¼šå¥½èµ·æ¥çš„ã€‚å› ä¸ºæ—¥å¤œæ“åŠ³ï¼Œä»–æ•´ä¸ªäººç˜¦äº†ä¸€åœˆï¼Œä»–æ•´å¤©æ•´å¤©åœ°åœ¨ç—…æ¦»æ—é™ªç€å†…è‰ï¼Œç”šè‡³å¤œé‡Œä¹Ÿä¸èµ°â€¦â€¦æœ€åå‡ å¤œä»–æ ¹æœ¬å°±æ²¡ç¡ã€‚ä»–æåŠ›å…ˆæ„æ‰¿å¿—åœ°æ»¡è¶³å†…è‰æœ€å¾®å°çš„ä»»æ€§çš„è¦æ±‚å’Œæœ€å¾®å°çš„æ„¿æœ›ï¼Œæ¯å½“ä»–ç¦»å¼€å¥¹ä¸Šæˆ‘ä»¬è¿™è¾¹æ¥ï¼Œä»–å°±æ©é¢ç—›å“­ï¼Œä½†æ˜¯è¿‡äº†ä¸€åˆ†é’Ÿï¼Œä»–åˆå¼€å§‹å……æ»¡å¸Œæœ›ï¼Œè€Œä¸”ç¡¬è¦æˆ‘ä»¬ç›¸ä¿¡å¥¹çš„ç—…è‚¯å®šä¼šå¥½èµ·æ¥çš„ã€‚ä»–æŠŠé²œèŠ±å †æ»¡äº†å¥¹çš„æˆ¿é—´ã€‚æœ‰ä¸€å›ï¼Œä»–ä¹°å›äº†ä¸€å¤§æŠŠå¨‡è‰³æ¬²æ»´çš„æœˆå­£èŠ±ï¼Œçº¢çš„å’Œç™½çš„ï¼Œä»–ä¸ºäº†ä¹°è¿™äº›èŠ±è·‘äº†å¾ˆè¿œçš„è·¯ï¼Œç„¶åæ‹¿å›æ¥é€ç»™ä»–çš„å†…è‰å¥‡å¡â€¦â€¦å‡¡æ­¤ç§ç§ï¼Œä»–ä½¿å¥¹æ„Ÿåˆ°åˆ†å¤–æ¿€åŠ¨ã€‚å¯¹ç¯ç»•åœ¨å¥¹å››å‘¨çš„çˆ±ï¼Œå¥¹ä¸èƒ½ä¸ç”¨è‡ªå·±çš„æ•´ä¸ªå¿ƒæ¥å›æŠ¥å¤§å®¶ã€‚é‚£å¤©æ™šä¸Šï¼Œåœ¨å¥¹è·Ÿæˆ‘ä»¬ä¸´ç»ˆå‘Šåˆ«çš„é‚£å¤©æ™šä¸Šï¼Œè€çˆ·å­æ€ä¹ˆä¹Ÿä¸è‚¯è·Ÿå¥¹è¯€åˆ«ã€‚å†…è‰å‘ä»–ç²²ç„¶ä¸€ç¬‘ï¼Œæ•´ä¸ªæ™šä¸Šéƒ½æåŠ›è£…å‡ºä¸€å‰¯å¾ˆå¼€å¿ƒçš„æ ·å­ï¼Œè·Ÿä»–é—¹ç€ç©ï¼Œç”šè‡³è¿˜ç¬‘äº†â€¦â€¦æˆ‘ä»¬å¤§å®¶ä»å¥¹å±‹é‡Œèµ°å‡ºæ¥æ—¶å‡ ä¹éƒ½è¿˜æŠ±ç€å¸Œæœ›ï¼Œä½†æ˜¯åˆ°ç¬¬äºŒå¤©ï¼Œå¥¹å·²ç»ä¸èƒ½è¯´è¯äº†ã€‚ä¸¤å¤©åå¥¹å°±æ­»äº†ã€‚æˆ‘è®°å¾—ï¼Œè€çˆ·å­æ€æ ·ç”¨é²œèŠ±æŠŠå¥¹çš„å°æ£ºæè£…é¥°èµ·æ¥ï¼Œä»–æ€æ ·ä¼¤å¿ƒæ¬²ç»åœ°æœ›ç€å¥¹é‚£ç˜¦å‰Šçš„ã€å·²ç»æ­»æ°”æ²‰æ²‰çš„å°è„¸è›‹ï¼Œæœ›ç€å¥¹é‚£æ­»åçš„ç¬‘å®¹ï¼Œæœ›ç€å¥¹é‚£åå­—äº¤å‰åœ°æ”¾åœ¨èƒ¸å‰çš„èƒ³è‡‚ã€‚ä»–åƒå“­è‡ªå·±çš„äº²ç”Ÿå­©å­é‚£æ ·å“­å¥¹ã€‚å¨œå¡”èã€æˆ‘ï¼Œæˆ‘ä»¬å¤§å®¶éƒ½å®‰æ…°ä»–ï¼Œä½†æ˜¯ä»–æ²¡æ³•å¾—åˆ°å®‰æ…°ï¼Œå†…è‰ä¸‹è‘¬åï¼Œä»–ç”Ÿäº†ä¸€åœºå¤§ç—…ã€‚</p></blockquote><p><em><strong>å¦‚æœä½ æƒ³å¾—åˆ°åˆ«äººçš„å°Šé‡ï¼Œæœ€é‡è¦çš„æ˜¯å°Šé‡è‡ªå·±ã€‚åªæœ‰è¿™æ ·ï¼Œåªæœ‰è‡ªå°Šï¼Œä½ æ‰èƒ½è¿«ä½¿åˆ«äººå°Šé‡ä½ ã€‚</strong></em></p><h1 id="ç™½å¤œè¡Œ"><a href="#ç™½å¤œè¡Œ" class="headerlink" title="ç™½å¤œè¡Œ"></a>ç™½å¤œè¡Œ</h1><blockquote><p>æˆ‘çš„å¤©ç©ºé‡Œæ²¡æœ‰å¤ªé˜³ï¼Œæ€»æ˜¯é»‘å¤œï¼Œä½†å¹¶ä¸æš—ï¼Œå› ä¸ºæœ‰ä¸œè¥¿ä»£æ›¿äº†å¤ªé˜³ã€‚è™½ç„¶æ²¡æœ‰å¤ªé˜³é‚£ä¹ˆæ˜äº®ï¼Œä½†å¯¹æˆ‘æ¥è¯´å·²ç»è¶³å¤Ÿã€‚å‡­å€Ÿç€è¿™ä»½å…‰ï¼Œæˆ‘ä¾¿èƒ½æŠŠé»‘å¤œå½“æˆç™½å¤©ã€‚æˆ‘ä»æ¥å°±æ²¡æœ‰å¤ªé˜³ï¼Œæ‰€ä»¥ä¸æ€•å¤±å»ã€‚</p></blockquote><h1 id="é›ªå›½"><a href="#é›ªå›½" class="headerlink" title="é›ªå›½"></a>é›ªå›½</h1><p><img src="/../images/%E9%9B%AA%E5%9B%BD.png" alt="é›ªå›½"></p><blockquote><p>ç©¿è¿‡ç•Œé™é•¿é•¿çš„éš§é“ï¼Œä¾¿æ˜¯é›ªå›½ã€‚å¤œç©ºä¸‹ï¼Œå¤§åœ°ä¸€ç‰‡è¹ç™½ã€‚</p></blockquote><p>åœ¨å¤§é›ªè¦†ç›–çš„é›ªå›½ï¼Œå²›æ‘å’Œè‰ºä¼é©¹å­äº¤å¾€ç€ï¼ŒåŒæ—¶å‘å¾€ç¾ä¸½çº¯æ´çš„å¶å­ã€‚ä½åœ¨ä¹¡ä¸‹èš•æˆ¿çš„é©¹å­ï¼Œå³ä½¿å­¦å¾—ä¸€æ‰‹å¥½ç´ï¼Œå³ä½¿å¯¹å½“ä¸‹åè‘—ä¾ƒä¾ƒè€Œè°ˆï¼Œåœ¨å²›æ‘çœ¼é‡Œä¸è¿‡æ˜¯å¤§é›ªä¹‹ä¸‹ï¼Œé©¹å­åœ¨æ‘ä¸­æ— è°“çš„è¡Œä¸ºã€‚å¯¹äºçº¨ç»”å­å¼Ÿï¼Œä»–æŠŠè‡ªå·±å¯¹é›ªå›½ç¾å¥½çš„å‘å¾€ï¼Œå¯„æ‰˜äºçº¯æ´çš„å¶å­ï¼Œä½†ä¸€åˆ‡éƒ½éšç€å¶å­åœ¨å¤§ç«ä¸­ä¸§ç”Ÿï¼Œæˆ›ç„¶è€Œæ­¢ã€‚</p><h1 id="ä¸€ä¸ªå«æ¬§ç»´çš„ç”·äººå†³å®šå»æ­»"><a href="#ä¸€ä¸ªå«æ¬§ç»´çš„ç”·äººå†³å®šå»æ­»" class="headerlink" title="ä¸€ä¸ªå«æ¬§ç»´çš„ç”·äººå†³å®šå»æ­»"></a>ä¸€ä¸ªå«æ¬§ç»´çš„ç”·äººå†³å®šå»æ­»</h1><p>åœ¨è¯»</p>]]></content>
    
    
    
  </entry>
  
  
  
  
</search>
